<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>The R4GC Book</title>
  <meta name="description" content="Notes and tutorials from ‘Lunch and Learn Data Science with R’ weekly meetups organized by the R4GC Community" />
  <meta name="generator" content="bookdown #bookdown:version# and GitBook 2.6.7" />

  <meta property="og:title" content="The R4GC Book" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://open-canada.github.io/r4gc" />
  <meta property="og:image" content="https://open-canada.github.io/r4gcimages/r4gc-banner.png" />
  <meta property="og:description" content="Notes and tutorials from ‘Lunch and Learn Data Science with R’ weekly meetups organized by the R4GC Community" />
  <meta name="github-repo" content="open-canada/r4gc" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="The R4GC Book" />
  
  <meta name="twitter:description" content="Notes and tutorials from ‘Lunch and Learn Data Science with R’ weekly meetups organized by the R4GC Community" />
  <meta name="twitter:image" content="https://open-canada.github.io/r4gcimages/r4gc-banner.png" />



<meta name="date" content="2022-03-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/R4GC.ico" type="image/x-icon" />
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



<!--bookdown:title:start-->
<div id="header">
<h1 class="title">The R4GC Book</h1>
<h2 class="subtitle"><em>Learn Data Science with R: Notes and tutorials from the R4GC Community ‘Lunch and Learn’ meetups</em></h2>
<p class="author"><em><p>Dmitry Gorodnichy and Patrick Little<br />
<a href="https://open-canada.github.io/r4gc">https://open-canada.github.io/r4gc</a> (License: <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>)</p></em></p>
<p class="date"><em>03 March 2022</em></p>
</div>
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">
<!--bookdown:toc2:start-->
<ul>
<li><a href="#index">Raison d’être</a>
<ul>
<li><a href="#r4gc-community">R4GC Community</a>
<ul>
<li><a href="#lunch-and-learn-data-science-with-r-meetups">“Lunch and Learn Data Science with R” meetups</a></li>
<li><a href="#community-portals">Community portals</a></li>
<li><a href="#community-presentations">Community presentations</a></li>
<li><a href="#gcIMS2021">International Methodology Symposium (October 2021)</a></li>
<li><a href="#gcdata2021">GC Data Conference (February, 2021)</a></li>
</ul></li>
<li><a href="#book-source-code">Book source code</a></li>
<li><a href="#disclaimer-1">Disclaimer</a></li>
<li><a href="#contributors">Contributors</a></li>
<li><a href="#licenses">Licenses</a></li>
<li><a href="#key-principles">Key principles</a>
<ul>
<li><a href="#open-data-open-source-open-science">Open data, open source, open science</a></li>
<li><a href="#chatham-house-rule">Chatham House Rule</a></li>
</ul></li>
<li><a href="#how-to-contribute">How to contribute</a></li>
<li><a href="#about-authors">About authors</a>
<ul>
<li><a href="#contacts">Contacts</a></li>
</ul></li>
</ul></li>
<li><a href="#français">Français</a></li>
<li><a href="#preface">Preface</a>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#data-as-electricity-of-the-21st-century">Data as ‘electricity’ of the 21st century</a></li>
<li><a href="#data-engineering-challenge">Data Engineering challenge</a></li>
<li><a href="#towards-open-source-and-open-science">Towards open source and open science</a></li>
<li><a href="#pedagogical-approach">Pedagogical approach</a></li>
<li><a href="#book-outline">Book outline</a></li>
</ul></li>
<li><a href="#part-general-discussions">(PART) General discussions</a></li>
<li><a href="#why-r"><span class="toc-section-number">1</span> Why R?</a>
<ul>
<li><a href="#top-10-r-advantages-for-data-science"><span class="toc-section-number">1.1</span> Top 10 R advantages for Data Science</a></li>
<li><a href="#r_limitations"><span class="toc-section-number">1.2</span> Tackling the limitations of R</a></li>
<li><a href="#r-vs.-python"><span class="toc-section-number">1.3</span> R vs. Python</a></li>
</ul></li>
<li><a href="#learn-r-right-way"><span class="toc-section-number">2</span> Learn R: <em>R</em>ight way!</a>
<ul>
<li><a href="#intro"><span class="toc-section-number">2.1</span> Intro</a></li>
<li><a href="#in-which-sense-right"><span class="toc-section-number">2.2</span> In which sense ‘Right’?</a></li>
<li><a href="#r101-from-r4gc-lunch-and-learn"><span class="toc-section-number">2.3</span> R101 from “R4GC Lunch and Learn”</a></li>
<li><a href="#additional-resources"><span class="toc-section-number">2.4</span> Additional resources</a>
<ul>
<li><a href="#ways-to-continue-growing-your-r-skills"><span class="toc-section-number">2.4.1</span> Ways to continue growing your R skills</a></li>
<li><a href="#selected-presentations"><span class="toc-section-number">2.4.2</span> Selected presentations</a></li>
</ul></li>
</ul></li>
<li><a href="#great-open-source-textbooks"><span class="toc-section-number">3</span> Great Open Source Textbooks</a>
<ul>
<li><a href="#by-presentation"><span class="toc-section-number">3.1</span> By presentation</a>
<ul>
<li><a href="#in-two-column-format"><span class="toc-section-number">3.1.1</span> In two-column format</a></li>
<li><a href="#in-three-column-format"><span class="toc-section-number">3.1.2</span> In three-column format</a></li>
</ul></li>
<li><a href="#by-topic"><span class="toc-section-number">3.2</span> By Topic</a>
<ul>
<li><a href="#introductory-and-general"><span class="toc-section-number">3.2.1</span> Introductory and General</a></li>
<li><a href="#specialized"><span class="toc-section-number">3.2.2</span> Specialized</a></li>
</ul></li>
</ul></li>
<li><a href="#great-open-source-tutorials"><span class="toc-section-number">4</span> Great Open Source Tutorials</a>
<ul>
<li><a href="#from-rstudio"><span class="toc-section-number">4.1</span> From RStudio</a></li>
<li><a href="#from-data-carpentry"><span class="toc-section-number">4.2</span> From Data Carpentry</a></li>
<li><a href="#more-from-github"><span class="toc-section-number">4.3</span> More from GitHub</a></li>
</ul></li>
<li><a href="#events-and-forums-for-r-users"><span class="toc-section-number">5</span> Events and forums for R users</a>
<ul>
<li><a href="#from-rstudio-1"><span class="toc-section-number">5.1</span> From RStudio</a>
<ul>
<li><a href="#httpsresources.rstudio.com."><span class="toc-section-number">5.1.1</span> <span>https://resources.rstudio.com</span>.</a></li>
<li><a href="#rstudio-community-meetup"><span class="toc-section-number">5.1.2</span> RStudio Community Meetup</a></li>
</ul></li>
<li><a href="#r-blogs"><span class="toc-section-number">5.2</span> R blogs</a></li>
<li><a href="#r-conferences"><span class="toc-section-number">5.3</span> R conferences</a></li>
<li><a href="#related-journals"><span class="toc-section-number">5.4</span> Related journals:</a>
<ul>
<li><a href="#academic-journals"><span class="toc-section-number">5.4.1</span> Academic Journals:</a></li>
</ul></li>
<li><a href="#related-conferences"><span class="toc-section-number">5.5</span> RElated conferences</a>
<ul>
<li><a href="#non-academic"><span class="toc-section-number">5.5.1</span> Non-academic</a></li>
<li><a href="#academic-conferences"><span class="toc-section-number">5.5.2</span> Academic Conferences:</a></li>
<li><a href="#ieee-conferences"><span class="toc-section-number">5.5.3</span> IEEE Conferences</a></li>
</ul></li>
<li><a href="#related-communities-in-gc"><span class="toc-section-number">5.6</span> Related communities in GC</a>
<ul>
<li><a href="#gcconnex-gc-only"><span class="toc-section-number">5.6.1</span> GCConnex (GC only):</a></li>
<li><a href="#gccode-gc-only"><span class="toc-section-number">5.6.2</span> GCcode (GC only):</a></li>
<li><a href="#gccollab-public-with-login"><span class="toc-section-number">5.6.3</span> GCcollab (public with login):</a></li>
<li><a href="#gcwiki-public"><span class="toc-section-number">5.6.4</span> GCwiki (public):</a></li>
<li><a href="#github-public"><span class="toc-section-number">5.6.5</span> GitHub (public):</a></li>
<li><a href="#other-canada-groups"><span class="toc-section-number">5.6.6</span> Other Canada groups</a></li>
</ul></li>
</ul></li>
<li><a href="#open-policies"><span class="toc-section-number">6</span> Open government policies</a>
<ul>
<li><a href="#open-source"><span class="toc-section-number">6.1</span> Open Source</a>
<ul>
<li><a href="#open-government"><span class="toc-section-number">6.1.1</span> Open government</a></li>
</ul></li>
<li><a href="#open-science"><span class="toc-section-number">6.2</span> Open Science</a>
<ul>
<li><a href="#scientific-integrity"><span class="toc-section-number">6.2.1</span> Scientific Integrity</a></li>
</ul></li>
</ul></li>
<li><a href="#part-art-of-r-programming">(PART) Art of R programming</a></li>
<li><a href="#use-r-efficiently-with-data.table"><span class="toc-section-number">7</span> Use R efficiently with data.table!</a>
<ul>
<li><a href="#data.table-vs.-dplyr"><span class="toc-section-number">7.1</span> data.table vs. dplyr</a></li>
<li><a href="#extensions-of-data.table"><span class="toc-section-number">7.2</span> Extensions of data.table</a></li>
</ul></li>
<li><a href="#python-and-r-unite"><span class="toc-section-number">8</span> Python and R unite!</a></li>
<li><a href="#from-excel-to-r"><span class="toc-section-number">9</span> From Excel to R</a></li>
<li><a href="#reading-various-kinds-of-data-in-r"><span class="toc-section-number">10</span> Reading various kinds of data in R</a>
<ul>
<li><a href="#rio"><span class="toc-section-number">10.0.1</span> rio</a></li>
<li><a href="#readxl-and-xlsx"><span class="toc-section-number">10.1</span> readxl and xlsx</a></li>
<li><a href="#discussion"><span class="toc-section-number">10.2</span> Discussion</a></li>
</ul></li>
<li><a href="#other-tips-for-efficient-coding-in-r"><span class="toc-section-number">11</span> Other tips for Efficient coding in R</a>
<ul>
<li><a href="#variable-names"><span class="toc-section-number">11.1</span> Variable names !</a>
<ul>
<li><a href="#code-formating"><span class="toc-section-number">11.1.1</span> Code formating</a></li>
</ul></li>
<li><a href="#code-starter-tricks"><span class="toc-section-number">11.2</span> Code starter tricks</a>
<ul>
<li><a href="#most-important-useful-libraries"><span class="toc-section-number">11.2.1</span> Most important / useful libraries</a></li>
</ul></li>
<li><a href="#efficient-workflows"><span class="toc-section-number">11.3</span> Efficient workflows</a>
<ul>
<li><a href="#workflow-data-first-approach"><span class="toc-section-number">11.3.1</span> Workflow: Data-first approach</a></li>
<li><a href="#workflow-taskneedsalgorithm-first-approach"><span class="toc-section-number">11.3.2</span> Workflow: Task/needs/algorithm-first approach</a></li>
</ul></li>
<li><a href="#object-oriented-programming-in-r"><span class="toc-section-number">11.4</span> Object oriented programming in R</a>
<ul>
<li><a href="#s3"><span class="toc-section-number">11.4.1</span> S3</a></li>
<li><a href="#r6"><span class="toc-section-number">11.4.2</span> R6</a></li>
</ul></li>
<li><a href="#rstudio-tricks"><span class="toc-section-number">11.5</span> RStudio tricks</a>
<ul>
<li><a href="#coding-online"><span class="toc-section-number">11.5.1</span> Coding online</a></li>
</ul></li>
</ul></li>
<li><a href="#using-r-with-gc-data-infastructure-gcdocs-aws-etc"><span class="toc-section-number">12</span> Using R with GC data infastructure (gcdocs, AWS, etc)</a>
<ul>
<li><a href="#gcdocs"><span class="toc-section-number">12.1</span> gcdocs</a></li>
</ul></li>
<li><a href="#part-visualization-and-reporting">(PART) Visualization and Reporting</a></li>
<li><a href="#r-markdown-for-literate-programming-and-automated-reports"><span class="toc-section-number">13</span> R Markdown for literate programming and automated reports</a>
<ul>
<li><a href="#resources"><span class="toc-section-number">13.1</span> Resources</a></li>
<li><a href="#automated-generation-of-multiple-pdf-files"><span class="toc-section-number">13.2</span> Automated generation of multiple PDF files</a></li>
<li><a href="#useful-tricks-and-tips"><span class="toc-section-number">13.3</span> Useful tricks and tips</a>
<ul>
<li><a href="#in-rstudio-editor"><span class="toc-section-number">13.3.1</span> In RStudio editor</a></li>
<li><a href="#spliting-rmd-in-chunks"><span class="toc-section-number">13.3.2</span> Spliting Rmd in chunks</a></li>
<li><a href="#making-good-use-of-configuration-yaml-header-in-index.rmd-file"><span class="toc-section-number">13.3.3</span> Making good use of configuration yaml header in index.Rmd file</a></li>
<li><a href="#conditional-execution-of-chunks"><span class="toc-section-number">13.3.4</span> Conditional execution of chunks</a></li>
</ul></li>
</ul></li>
<li><a href="#welcome-to-supervised-machine-learning-for-text-analysis-in-r">Welcome to Supervised Machine Learning for Text Analysis in R</a>
<ul>
<li><a href="#automated-compilation-of-rmd-files-in-github-using-github-actions"><span class="toc-section-number">13.3.5</span> Automated compilation of Rmd files in GitHub using GitHub Actions</a></li>
</ul></li>
<li><a href="#ggplot2-and-its-extensions-for-data-visualization"><span class="toc-section-number">14</span> ggplot2 and its extensions for data visualization</a>
<ul>
<li><a href="#resources-1"><span class="toc-section-number">14.1</span> Resources</a>
<ul>
<li><a href="#plotly-r-shiny"><span class="toc-section-number">14.1.1</span> Plotly + R Shiny</a></li>
</ul></li>
</ul></li>
<li><a href="#shiny-for-interactive-data-visualization-analysis-and-web-app-development"><span class="toc-section-number">15</span> Shiny for Interactive Data Visualization, Analysis and Web App development</a>
<ul>
<li><a href="#resources-2"><span class="toc-section-number">15.1</span> Resources</a></li>
</ul></li>
<li><a href="#interactive-outputs-in-r-plotly-datatable-reactable"><span class="toc-section-number">16</span> Interactive Outputs in R: plotly, Datatable, reactable</a>
<ul>
<li><a href="#reactable"><span class="toc-section-number">16.1</span> <code>reactable</code></a></li>
</ul></li>
<li><a href="#geospatial-coding-and-visualization-in-r"><span class="toc-section-number">17</span> Geo/Spatial coding and visualization in R</a>
<ul>
<li><a href="#resources-3"><span class="toc-section-number">17.1</span> Resources</a></li>
<li><a href="#federal-geospatial-platform"><span class="toc-section-number">17.2</span> Federal Geospatial Platform</a></li>
<li><a href="#tutorials"><span class="toc-section-number">17.3</span> Tutorials</a></li>
<li><a href="#dealing-with-memory-issues"><span class="toc-section-number">17.4</span> Dealing with memory issues</a></li>
<li><a href="#canadian-geo-data"><span class="toc-section-number">17.5</span> Canadian geo-data</a></li>
<li><a href="#code-snippets"><span class="toc-section-number">17.6</span> Code snippets</a>
<ul>
<li><a href="#using-simplemaps.com"><span class="toc-section-number">17.6.1</span> Using simplemaps.com</a></li>
<li><a href="#using-google-api"><span class="toc-section-number">17.6.2</span> Using Google API</a></li>
<li><a href="#using-tidygeocoder"><span class="toc-section-number">17.6.3</span> Using tidygeocoder</a></li>
<li><a href="#using-open-street-map"><span class="toc-section-number">17.6.4</span> Using Open Street map</a></li>
<li><a href="#using-open-database-of-addresses-educational-facilities"><span class="toc-section-number">17.6.5</span> Using Open Database of Addresses / Educational Facilities</a></li>
<li><a href="#getting-postal-codes"><span class="toc-section-number">17.6.6</span> Getting Postal codes</a></li>
</ul></li>
</ul></li>
<li><a href="#part-machine-learning-and-ai">(PART) Machine Learning and AI</a></li>
<li><a href="#data-engineering-record-linking-and-deduplication"><span class="toc-section-number">18</span> Data Engineering, Record Linking and Deduplication</a>
<ul>
<li><a href="#tldl"><span class="toc-section-number">18.1</span> TL;DL</a></li>
<li><a href="#intro-what-is-data-engineering"><span class="toc-section-number">18.2</span> Intro: What is <em>Data Engineering</em></a>
<ul>
<li><a href="#data-engineering-vs.-software-engineering"><span class="toc-section-number">18.2.1</span> <em>Data Engineering</em> vs. <em>Software Engineering</em></a></li>
</ul></li>
<li><a href="#data-engineering-vs.-etl-and-elt"><span class="toc-section-number">18.3</span> Data Engineering vs. ETL and ELT</a>
<ul>
<li><a href="#taxonomy-of-data-engineering-tasks"><span class="toc-section-number">18.3.1</span> Taxonomy of Data Engineering tasks</a></li>
</ul></li>
<li><a href="#useful-packages"><span class="toc-section-number">18.4</span> Useful packages</a>
<ul>
<li><a href="#single-variable"><span class="toc-section-number">18.4.1</span> Single variable</a></li>
</ul></li>
<li><a href="#r-base-and-data.table"><span class="toc-section-number">18.5</span> 0 &gt; R base and data.table</a>
<ul>
<li><a href="#description"><span class="toc-section-number">18.5.1</span> Description</a></li>
<li><a href="#examples"><span class="toc-section-number">18.5.2</span> Examples</a></li>
</ul></li>
<li><a href="#textclean"><span class="toc-section-number">18.6</span> 1 &gt;<code>textclean</code></a>
<ul>
<li><a href="#description-1"><span class="toc-section-number">18.6.1</span> Description</a></li>
<li><a href="#example"><span class="toc-section-number">18.6.2</span> Example</a></li>
</ul></li>
<li><a href="#package-phonics"><span class="toc-section-number">18.7</span> 2 &gt; Package <code>phonics</code></a>
<ul>
<li><a href="#description-2"><span class="toc-section-number">18.7.1</span> Description</a></li>
<li><a href="#example-1"><span class="toc-section-number">18.7.2</span> Example</a></li>
</ul></li>
<li><a href="#package-stringdist"><span class="toc-section-number">18.8</span> 3 &gt; Package <code>stringdist</code></a>
<ul>
<li><a href="#description-3"><span class="toc-section-number">18.8.1</span> Description</a></li>
<li><a href="#example-2"><span class="toc-section-number">18.8.2</span> Example</a></li>
</ul></li>
<li><a href="#multi-variable-recording-linking"><span class="toc-section-number">18.9</span> Multi-variable recording linking</a></li>
<li><a href="#libraryfastlink"><span class="toc-section-number">18.10</span> &gt;&gt; library(fastLink)</a>
<ul>
<li><a href="#description-4"><span class="toc-section-number">18.10.1</span> Description</a></li>
<li><a href="#dataset"><span class="toc-section-number">18.10.2</span> Dataset</a></li>
<li><a href="#example-3"><span class="toc-section-number">18.10.3</span> Example</a></li>
</ul></li>
<li><a href="#package-recordlinkage"><span class="toc-section-number">18.11</span> &gt;&gt; Package <code>RecordLinkage</code></a>
<ul>
<li><a href="#description-5"><span class="toc-section-number">18.11.1</span> Description</a></li>
<li><a href="#datasets-german-names-500-and-10000"><span class="toc-section-number">18.11.2</span> Datasets: German names 500 and 10,000</a></li>
</ul></li>
<li><a href="#libraryblink"><span class="toc-section-number">18.12</span> &gt; library(blink)</a>
<ul>
<li><a href="#summary"><span class="toc-section-number">18.12.1</span> Summary</a></li>
</ul></li>
<li><a href="#libraryreclin"><span class="toc-section-number">18.13</span> &gt; <code>library(reclin)</code></a>
<ul>
<li><a href="#description-6"><span class="toc-section-number">18.13.1</span> Description</a></li>
<li><a href="#included-datasets"><span class="toc-section-number">18.13.2</span> Included Datasets:</a></li>
</ul></li>
<li><a href="#libraryfuzzyjoin"><span class="toc-section-number">18.14</span> &gt;&gt; library(fuzzyjoin)</a>
<ul>
<li><a href="#description-7"><span class="toc-section-number">18.14.1</span> Description</a></li>
<li><a href="#example-1-joining-with-common-mispelling"><span class="toc-section-number">18.14.2</span> Example 1: Joining with Common Mispelling</a></li>
<li><a href="#example-2-from-datacamp"><span class="toc-section-number">18.14.3</span> Example 2: from datacamp</a></li>
<li><a href="#example-3-from-stackoverflow"><span class="toc-section-number">18.14.4</span> Example 3: from stackoverflow</a></li>
</ul></li>
<li><a href="#package-blink"><span class="toc-section-number">18.15</span> &gt; Package <code>blink</code></a>
<ul>
<li><a href="#description-8"><span class="toc-section-number">18.15.1</span> Description</a></li>
<li><a href="#datasets-german-names-500-and-10000-1"><span class="toc-section-number">18.15.2</span> Datasets: German names 500 and 10,000</a></li>
</ul></li>
<li><a href="#discusion---other-methods"><span class="toc-section-number">18.16</span> Discusion - Other methods</a></li>
</ul></li>
<li><a href="#text-analysis-in-r"><span class="toc-section-number">19</span> Text Analysis in R</a>
<ul>
<li><a href="#open-source-textbook"><span class="toc-section-number">19.1</span> Open source textbook</a></li>
<li><a href="#plagiarism-detection"><span class="toc-section-number">19.2</span> Plagiarism detection</a></li>
<li><a href="#related-work-at-international-methodology-symposium"><span class="toc-section-number">19.3</span> Related work at International Methodology Symposium</a></li>
<li><a href="#useful-code-snippets"><span class="toc-section-number">19.4</span> Useful code snippets</a>
<ul>
<li><a href="#basic-cleaning-remove-accents-benchmarking"><span class="toc-section-number">19.4.1</span> Basic cleaning : Remove accents (benchmarking)</a></li>
<li><a href="#text-cleaning"><span class="toc-section-number">19.4.2</span> Text cleaning</a></li>
<li><a href="#extracting-re-ordering-words-in-a-string"><span class="toc-section-number">19.4.3</span> Extracting, re-ordering words in a string</a></li>
<li><a href="#automatically-finding-removing-common-parts-in-strings"><span class="toc-section-number">19.4.4</span> Automatically finding / removing common parts in strings</a></li>
<li><a href="#useful-packages-1"><span class="toc-section-number">19.4.5</span> Useful packages</a></li>
<li><a href="#cleantexttext-clean-text"><span class="toc-section-number">19.4.6</span> <code>cleanText(text)</code>: clean text</a></li>
<li><a href="#convert-text-to-date-or-timestamp"><span class="toc-section-number">19.4.7</span> Convert Text to Date or Timestamp</a></li>
<li><a href="#transliteration-cleaning"><span class="toc-section-number">19.4.8</span> Transliteration &amp; cleaning</a></li>
</ul></li>
</ul></li>
<li><a href="#statistical-tests-and-mixed-effects-analysis"><span class="toc-section-number">20</span> Statistical tests and mixed-effects analysis</a></li>
<li><a href="#machine-learning-and-modeling-in-r"><span class="toc-section-number">21</span> Machine Learning and Modeling in R</a>
<ul>
<li><a href="#resources-4"><span class="toc-section-number">21.1</span> Resources</a></li>
<li><a href="#additional-references"><span class="toc-section-number">21.2</span> Additional references</a></li>
</ul></li>
<li><a href="#deep-learning-and-computer-vision"><span class="toc-section-number">22</span> Deep Learning and Computer vision</a></li>
<li><a href="#simulation-and-optimization"><span class="toc-section-number">23</span> Simulation and Optimization</a></li>
<li><a href="#part-community-tutorials">(PART) Community Tutorials</a></li>
<li><a href="#gccode-101"><span class="toc-section-number">24</span> GCCode 101</a>
<ul>
<li><a href="#tldr"><span class="toc-section-number">24.1</span> TL;DR</a></li>
<li><a href="#step-00-connecting-to-gccode-and-installing-required-soft."><span class="toc-section-number">24.2</span> Step 00: Connecting to GCCode and installing required soft.</a></li>
<li><a href="#step-0-configuring-windows-git-and-gitlab-tokens"><span class="toc-section-number">24.3</span> Step 0: Configuring Windows, Git and GitLab (tokens)</a></li>
<li><a href="#step-1-find-or-create-a-gitlab-project-you-want-to-contribute-to."><span class="toc-section-number">24.4</span> Step 1: Find (or create) a GitLab project you want to contribute to.</a>
<ul>
<li><a href="#using-command-line"><span class="toc-section-number">24.4.1</span> 1.2 Using Command Line</a></li>
<li><a href="#in-rstudio"><span class="toc-section-number">24.4.2</span> 1.2 In RStudio</a></li>
</ul></li>
<li><a href="#step-2-using-branches-optional"><span class="toc-section-number">24.5</span> Step 2: Using Branches (optional)</a></li>
<li><a href="#step-3-gccoding-from-rstudio"><span class="toc-section-number">24.6</span> Step 3: GCcoding from RStudio</a></li>
<li><a href="#related-gc-discussions-and-links"><span class="toc-section-number">24.7</span> Related GC discussions and links:</a></li>
</ul></li>
<li><a href="#packages-101"><span class="toc-section-number">25</span> Packages 101</a>
<ul>
<li><a href="#resources-5"><span class="toc-section-number">25.1</span> Resources</a>
<ul>
<li><a href="#gc-groups-and-repos"><span class="toc-section-number">25.1.1</span> GC groups and repos</a></li>
<li><a href="#related-tutorials"><span class="toc-section-number">25.1.2</span> Related tutorials</a></li>
<li><a href="#how-to-contribute-1"><span class="toc-section-number">25.1.3</span> How to contribute</a></li>
<li><a href="#r-script-to-start"><span class="toc-section-number">25.1.4</span> * R script to start:</a></li>
</ul></li>
<li><a href="#setup"><span class="toc-section-number">25.2</span> * Setup</a></li>
<li><a href="#overall-workflow"><span class="toc-section-number">25.3</span> * Overall Workflow</a>
<ul>
<li><a href="#section"><span class="toc-section-number">25.3.1</span> </a></li>
</ul></li>
<li><a href="#rbuildignore"><span class="toc-section-number">25.4</span> * .Rbuildignore</a></li>
<li><a href="#license-use_mit_license"><span class="toc-section-number">25.5</span> * License: <code>use_mit_license()</code></a></li>
<li><a href="#description-9"><span class="toc-section-number">25.6</span> * DESCRIPTION</a></li>
<li><a href="#namespace"><span class="toc-section-number">25.7</span> * NAMESPACE</a></li>
<li><a href="#examples-and-tests"><span class="toc-section-number">25.8</span> * Examples and tests</a></li>
<li><a href="#in-my_codes"><span class="toc-section-number">25.9</span> .. in MY_CODES</a></li>
<li><a href="#testthat"><span class="toc-section-number">25.10</span> * testthat</a></li>
<li><a href="#documentation"><span class="toc-section-number">25.11</span> * Documentation</a></li>
<li><a href="#vignettes"><span class="toc-section-number">25.12</span> * Vignettes</a></li>
<li><a href="#delivering-package"><span class="toc-section-number">25.13</span> Delivering package</a></li>
<li><a href="#packaging-and-publishing-w.-pkgdown"><span class="toc-section-number">25.14</span> Packaging and publishing w. <code>pkgdown</code></a></li>
<li><a href="#optional-rtools"><span class="toc-section-number">25.15</span> (optional) Rtools</a></li>
</ul></li>
<li><a href="#r101-building-covid-19-tracker-app-from-scratch"><span class="toc-section-number">26</span> R101: Building COVID-19 Tracker App from scratch</a></li>
<li><a href="#part-community-databases">(PART) Community Databases</a></li>
<li><a href="#gc-data"><span class="toc-section-number">27</span> Accessing Open Data Canada databases</a>
<ul>
<li><a href="#with-curl-fread-readxls"><span class="toc-section-number">27.1</span> With curl, fread, readxls</a></li>
<li><a href="#with-cansim-package"><span class="toc-section-number">27.2</span> With cansim package</a></li>
<li><a href="#via-api-using-libraryckanr"><span class="toc-section-number">27.3</span> Via API using <code>library(ckanr)</code></a>
<ul>
<li><a href="#via-api-using-libraryrgovcan"><span class="toc-section-number">27.3.1</span> Via API using library(“rgovcan”)</a></li>
</ul></li>
</ul></li>
<li><a href="#health-related-databases"><span class="toc-section-number">28</span> Health-related databases</a>
<ul>
<li><a href="#canadian-vitals-statistics-database"><span class="toc-section-number">28.1</span> Canadian Vitals Statistics Database</a>
<ul>
<li><a href="#vital-statistics---death-database"><span class="toc-section-number">28.1.1</span> Vital Statistics - Death Database</a></li>
<li><a href="#vital-statistics---birth-database"><span class="toc-section-number">28.1.2</span> Vital Statistics - Birth Database</a></li>
</ul></li>
<li><a href="#covid-19-infection-and-vaccination-related"><span class="toc-section-number">28.2</span> COVID-19 infection and vaccination related:</a></li>
</ul></li>
<li><a href="#open-ontario-data"><span class="toc-section-number">29</span> Open Ontario Data</a>
<ul>
<li><a href="#section-1"><span class="toc-section-number">29.0.1</span> </a></li>
</ul></li>
<li><a href="#performance-related-databases"><span class="toc-section-number">30</span> Performance-related databases</a>
<ul>
<li><a href="#pses-results-interactive-analysis-and-visualization"><span class="toc-section-number">30.1</span> PSES Results interactive analysis and visualization:</a>
<ul>
<li><a href="#other-pses-tools-and-dashboards"><span class="toc-section-number">30.1.1</span> Other PSES tools and dashboards</a></li>
</ul></li>
<li><a href="#tip-requests-dataset"><span class="toc-section-number">30.2</span> TIP requests dataset</a></li>
<li><a href="#geo-mapped-current-historical-and-predicted-border-wait-times"><span class="toc-section-number">30.3</span> Geo-mapped current, historical and predicted border wait times:</a></li>
</ul></li>
<li><a href="#part-community-codes">(PART) Community Codes</a></li>
<li><a href="#lunch-and-learn-notes"><span class="toc-section-number">31</span> Lunch and Learn notes</a>
<ul>
<li><a href="#interactive-outputs-in-r-without-shiny">Interactive Outputs in R without Shiny</a></li>
<li><a href="#geospatial-coding-and-visualization-with-r.-part-1"><span class="toc-section-number">31.1</span> Geo/Spatial coding and visualization with R. Part 1:</a></li>
<li><a href="#text-analysis-with-r.-part-1"><span class="toc-section-number">31.2</span> Text Analysis with R. Part 1:</a></li>
<li><a href="#dual-coding---python-and-r-unite"><span class="toc-section-number">31.3</span> Dual Coding - Python and R unite !</a></li>
<li><a href="#working-with-ggtables"><span class="toc-section-number">31.4</span> Working with ggtables</a></li>
<li><a href="#automate-common-look-and-feel-of-your-ggplot-graphs"><span class="toc-section-number">31.5</span> Automate common look and feel of your ggplot graphs</a></li>
<li><a href="#automated-generation-of-report-cards"><span class="toc-section-number">31.6</span> Automated generation of report cards</a></li>
<li><a href="#discussed-rstudio-webinars"><span class="toc-section-number">31.7</span> Discussed RStudio Webinars</a></li>
</ul></li>
<li><a href="#canada-related-open-source-r-codes-and-packages"><span class="toc-section-number">32</span> Canada-related Open source R codes and packages</a>
<ul>
<li><a href="#packages"><span class="toc-section-number">32.1</span> Packages</a>
<ul>
<li><a href="#packages-on-cran"><span class="toc-section-number">32.1.1</span> Packages on CRAN</a></li>
</ul></li>
<li><a href="#packages-not-on-cran"><span class="toc-section-number">32.2</span> Packages not on CRAN</a></li>
<li><a href="#codes-on-github"><span class="toc-section-number">32.3</span> Codes on GitHub</a>
<ul>
<li><a href="#expenditures-and-procurement"><span class="toc-section-number">32.3.1</span> Expenditures and procurement</a></li>
<li><a href="#health-and-environment"><span class="toc-section-number">32.3.2</span> Health and Environment</a></li>
<li><a href="#elections"><span class="toc-section-number">32.3.3</span> Elections</a></li>
<li><a href="#ottawa"><span class="toc-section-number">32.3.4</span> Ottawa</a></li>
<li><a href="#vancouver"><span class="toc-section-number">32.3.5</span> Vancouver</a></li>
<li><a href="#other-related-packages"><span class="toc-section-number">32.3.6</span> Other related packages</a></li>
</ul></li>
</ul></li>
</ul>
<!--bookdown:toc2:end-->
      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The R4GC Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<!-- We can paste many useful intro texts from https://github.com/open-canada/geocompr/blob/main/index.Rmd like this one -->
<!-- https://bookdown.org/yihui/rmarkdown-cookbook/toc-unlisted.html - Note that this feature requires at least Pandoc 2.10. -->
<div id="disclaimer" class="section level4" number="0.0.0.1">
<h4><span class="header-section-number">0.0.0.1</span> Disclaimer:</h4>
<p>The views and opinions expressed in this book are those of the book authors and contributors and do not necessarily reflect the official policy or position of any agency of the Government of Canada. {.unlisted .unnumbered}</p>
<!-- <a href="https://www.bookdown.org" target="blank">bookdown</a> -->
<!-- # (PART\*) Introductory notes{-} -->
<!-- #  Raison d'être  {-} -->
<!-- # Preface {-}  -->
<!-- # About {-} -->
</div>
<div id="index" class="section level1 unnumbered">
<h1 class="unnumbered">Raison d’être</h1>
<p><a href="https://gccollab.ca/groups/profile/7391537/r4gc-use-r-community-use-r"><img src="images/r4gc-banner.png" class="cover" style="width:100.0%" alt="GCcollab logo" /></a></p>
<!-- This is the workbook of the _R4GC (Use R!) Community_. -->
<!-- ## Book source and credits -->
<p>This book is prepared as part of the R4GC Community skill enhancing and knowledge gathering exercise.</p>
<p>It aims at consolidating the knowledge-based that is being gathered by the R4GC Community spread across various R4GC community portals and discussions.</p>
<p>It also serves to illustrate - as always with source code - one of the most powerful
features of R, which is
<!-- the capability to collaboratively develop data science codes and reports using RMarkdown. -->
the collaborative peer-reviewed development of data science codes and reports using <a href="https://rmarkdown.rstudio.com/">R Markdown</a>.</p>
<!-- ## History & portals {-} -->
<div id="r4gc-community" class="section level2 unnumbered">
<h2 class="unnumbered">R4GC Community</h2>
<p>R4GC Community (formerly called “Use R!” GCCollab community)
was created in March 2021 to bring together the R users across the Government of Canada.
Here we gather and curate the knowledgebase related to the use of R within the Government of Canada.
Everyone is welcome to join, whether you are an advanced R user, just starting learning it, or simply want to learn more about data science and how it is done.</p>
<!-- ### History -->
<p>The idea to create this group came during the <a href="https://www.csps-efpc.gc.ca/events/data-conference2021">GC Data2021 Conference</a> workshop on <a href="#gcdata2021">Data Engineering Challenges and Solutions: Demonstration of Shiny</a> [^gcdata2021]. The highest voted question during the discussion there was : <em>“How can I get more help for our members to enhance their knowledge and”spread the word” and raise more awareness regard to this tool?“</em> The creation of this community group is the answer to this question.</p>
<!-- [^gcdata2021] The full recording of this workshop  -->
<!-- was made  by conference organizers and is available on [YouTube]().  -->
<p>By November 2021, the R4GC GCCollab group has been become one of the largest active data science practitioners groups in Canada, counting over a quarter thousand of members. The weekly “Lunch and Learn Data Science with R” meetups organized by the R4GC Community have been attended by data practitioners from over twenty government departments, and generated
hundreds of questions/answers, a dozen of tutorials, multiple open to use applications, and thousands of line of open code.</p>
<!-- On October 29, 2021, the work of this group was presented at the  [2021 International Methodology Symposium](https://www.statcan.gc.ca/en/conferences/symposium2021/index). -->
<!-- This book aims at consolidating all knowledgebase gathered by the R4GC Community at its  portals and meetups -->
<div id="lunch-and-learn-data-science-with-r-meetups" class="section level3 unnumbered">
<h3 class="unnumbered">“Lunch and Learn Data Science with R” meetups</h3>
<p><em>“Building advanced Data Science skills using R, together - one meeting at a time!”</em></p>
<p>These informal meetings are organized weekly during Friday lunch time (from 12:05 to 12:55).
There data scientists wanting to upscale their knowledge of R and other Data Science related subjects get together to show and discuss their R codes and share their data coding tricks and methodologies.
Normally, each session is focused on a particular subject or project with the codes shared on GCcode.</p>
<p>No registration is required to join the meeting. However, in order to view the notes and video-recordings from these meetups, you need to join this sub-group: <a href="https://gccollab.ca/groups/about/7855030" class="uri">https://gccollab.ca/groups/about/7855030</a>.
For Agenda and Dial-in MS Teams numbers please see Group Events page at <a href="https://gccollab.ca/event_calendar/group/7391537" class="uri">https://gccollab.ca/event_calendar/group/7391537</a>.</p>
</div>
<div id="community-portals" class="section level3 unnumbered">
<h3 class="unnumbered">Community portals</h3>
<p>The R4GC community makes used of the following collaborative platforms provided by Shared Services Canada.</p>
<!-- This book aims at consolidating the knowledge spread across various R4GC community portals, described below. -->
<div id="gccode-group---r4gc" class="section level4 unnumbered">
<h4 class="unnumbered">GCcode group - r4gc</h4>
<p>URL: <a href="https://gccode.ssc-spc.gc.ca/r4gc" class="uri">https://gccode.ssc-spc.gc.ca/r4gc</a></p>
<p>GCcode is the GitLab solution that is accessible from within the GC network. As such, it allows one to view and update (pull and push) codes and documentation with a single click of button on a GC laptop from an RStudio. The tutorial on how to do it is developed. The ‘r4gc’ group has been created within GCcodes, where the codes, tutorials and other resources are gathered. It contains three main folders:</p>
<ul>
<li><p>/codes. - This is where “raw” (not-reviewed, unedited) R codes contributed by GC community are uploaded. Currently, this includes codes for analyzing and visualizing PSES (Public Service Employee Survey) results, ATIP requests, COVID-19 statistics, and various codes for ease of day to day work and maintenance. Some codes are readily available to become packages, some are short code snippets taken from various blogs, question and answer portals, such as www.stackoverflow.org and www.rseek.org, and open-source textbooks.</p></li>
<li><p>/gc-packages. - This is where the work on packages being developed from the submitted “raw” codes is happening. Currently it includes repositories for building packages to process PSES results, COVID-19 data, and the utility functions package for data engineering and efficient data processing.</p></li>
<li><p>/resources. - This where the rest of knowledge-base is gathered, including the tutorials, slides, and codes presented at the community weekly ‘Lunch and Learn’ meetups.</p></li>
</ul>
</div>
<div id="gccollab-r4gc-use-r" class="section level4 unnumbered">
<h4 class="unnumbered">GCcollab: R4GC (Use R)</h4>
<p>URL:
<a href="https://gccollab.ca/groups/profile/7391537/enuse-rfruse-r" class="uri">https://gccollab.ca/groups/profile/7391537/enuse-rfruse-r</a></p>
<p>GCcollab allows one to participate in the discussion from within and outside GC network (for registered users). This makes it convenient for gathering information from any sources, including those that my not be available from within the GC network. In order to facilitate the curation of knowledge, a number of discussion threads have been created there to address of topics of highest interest for the R4GC community.
These are reviewed and updated regularly, commonly as part of community weekly meetups.</p>
<!-- ### GCcollab Subgroup: Lunch and Learn R {-} -->
<!-- URL: https://gccollab.ca/groups/profile/7855030/enfridays-lunch-and-learn-r-meet-upsfr -->
<!-- This subgroup is created for sharing minutes, notes and video-recordings from the community weekly meetups,  -->
</div>
<div id="gcwiki-user" class="section level4 unnumbered">
<h4 class="unnumbered">GCwiki: UseR!</h4>
<p>URL: <a href="https://wiki.gccollab.ca/UseR" class="uri">https://wiki.gccollab.ca/UseR</a>!</p>
<p>This platform is used to consolidate all discussion topics in one place and link them with other data science resources in the wiki space.</p>
</div>
<div id="github-open-canada" class="section level4 unnumbered">
<h4 class="unnumbered">GitHub: open-canada</h4>
<p>URL: <a href="https://open-canada.github.io/UseR/" class="uri">https://open-canada.github.io/UseR/</a></p>
<p>Inline with the GC policies of open science and open data <span class="math inline">\(\ref{#policies}\)</span>, since most information gathered by the R4GC community is unclassified and comes from public domain, a public facing organizational account has been created on GitHub (<a href="https://github.com/open-canada" class="uri">https://github.com/open-canada</a>) for sharing and growing the R4GC community knowledgebase. This is where public-facing community outputs are gathered, including the growing collection of Web Apps and codes that were built with contributions from GC data scientists using open source tools and data, located at <a href="https://github.com/open-canada/Apps" class="uri">https://github.com/open-canada/Apps</a></p>
<!-- ### Slido (r4gc) {-} -->
<!-- URL: https://sli.do.  Code "r4gc" -->
<!-- This platform is used for wider audience forums and conferences. A number of polls have been conducted there, in a addition to opening and ranking new questions. -->
</div>
</div>
<div id="community-presentations" class="section level3 unnumbered">
<h3 class="unnumbered">Community presentations</h3>
</div>
<div id="gcIMS2021" class="section level3 unnumbered">
<h3 class="unnumbered">International Methodology Symposium (October 2021)</h3>
<p>The work of the R4GC community was presented at the
2021 International Methodology Symposium organized by Statistics Canada in October 2021.
The slides for this presentation are available here:
<a href="https://docs.google.com/presentation/d/19zu27vrNfgtGKdOjjpqsGkhFnh8a7Ca2/">in English</a> and <a href="https://docs.google.com/presentation/d/1GaY0bttRUIm67t16XludgCbJMZ_WyO8E/">en français</a>.</p>
</div>
<div id="gcdata2021" class="section level3 unnumbered">
<h3 class="unnumbered">GC Data Conference (February, 2021)</h3>
<p>The earlier work of community members was also presented at the 2021 GC Data Conference Data Literacy Fest Workshop “Data Engineering Challenges and Solutions: Demo of Shiny” in February 2021. The video-recording of this workshop was made available by conference organizers and is available on <a href="https://youtu.be/QWv6E3e7bek">YouTube</a>.</p>
<!-- # A propos {-} -->
<!-- # About this book {-} -->
</div>
</div>
<div id="book-source-code" class="section level2 unnumbered">
<h2 class="unnumbered">Book source code</h2>
<!-- ## About this book {-} -->
<p>This is book is built using the <a href="https://bookdown.org">bookdown</a> R package in RStudio.
It is hosted at Open Canada GitHub repo <a href="https://open-canada.github.io/r4gc" class="uri">https://open-canada.github.io/r4gc</a>.
The source code of it located at <a href="https://github.com/open-canada/r4gc" class="uri">https://github.com/open-canada/r4gc</a>.</p>
<!-- - similar to many great data science textbooks that have been already published and made freely available on github and bookdown.org and other online platforms -->
<p>Thus built, the book enables easy collaboration, transparency and peer-reviewing.</p>
<!-- Additionally, as with any markdown file, in addition to the compiled html file, it also allows one to gather and save  discussion comments and  draft  ideas inside the source Rmd file. -->
</div>
<div id="disclaimer-1" class="section level2 unnumbered">
<h2 class="unnumbered">Disclaimer</h2>
<p>The views and opinions expressed in this article are those of the authors and do not necessarily reflect the official policy or position of any agency of the Government of Canada.</p>
<!-- ### Other formats {-} -->
<!-- One of the beauties of the `bookdown` R package is that it allows one to generate multiple type of outputs  from the same source .Rmd files. -->
<!-- , such as pdf, epub, and various hmtl formats (single page html, multiple-page two-column and multiple-page three-column formats, with and without interactive menus). -->
<!-- The alternative formats of this R4GC book will be placed here  https://open-canada.github.io/r4gc/alt. -->
<!-- - epub:  -->
<!-- - pdf: -->
<!-- - one-page html -->
<!-- - mulpi-page three-colummn website:  -->
</div>
<div id="contributors" class="section level2 unnumbered">
<h2 class="unnumbered">Contributors</h2>
<!-- R4GC is a collaborative effort of many people who have contributed to the development of the codes and knowledgebase that is gathered in the R4GC portals and highlighted in this paper: Jonathan Dench, Joseph Stinziano, Henry Luan, Eric Littlewood, Philippe-Israel Morin, Tony Machado, Maxime Girouard, Martin Jean, Tim Roy, Dejan Pavlic, Utku Suleymanoglu. The support from wider international R community through stackoverflow.org portal and knowledge-sharing events ( conferences and webinars ) organized by the RStudio is also gratefully acknowledged. -->
<p>R4GC is a collaborative effort of many people who have contributed to the development of the knowledgebase that is gathered in this book.
They are listed below.</p>
<blockquote>
<p>Jonathan Dench, Joseph Stinziano, Henry Luan, Eric Littlewood, Philippe-Israel Morin, Tony Machado, Maxime Girouard, Martin Jean, Tim Roy, Mehrez Samaali, Sylvain Paquet, Dejan Pavlic, Utku Suleymanoglu,</p>
</blockquote>
<p>Additionally, much support has been also received from wider international R community through stackoverflow.org portal and knowledge-sharing events organized by the RStudio, as well as from several other Government of Canada employees who remained anonymous.</p>
<p>Their help is greatly appreciated.
<!-- and shows, once again, the power of open data science collaboration, where so much can be achieved when peers are help each other  --></p>
</div>
<div id="licenses" class="section level2 unnumbered">
<h2 class="unnumbered">Licenses</h2>
<p>This book is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0</a> License, and
is (and will always be) <strong>free to use</strong>.</p>
</div>
<div id="key-principles" class="section level2 unnumbered">
<h2 class="unnumbered">Key principles</h2>
<div id="open-data-open-source-open-science" class="section level3 unnumbered">
<h3 class="unnumbered">Open data, open source, open science</h3>
<!-- open government open source , open knowledge -->
<p>This book contains only the information and knowledge that was obtained from public domain, using the <a href="#open-policies">Open Government principles</a></p>
<!-- It is licensed under the [Creative Commons Attribution-NonCommercial-NoDerivs 3.0](http://creativecommons.org/licenses/by-nc-nd/3.0/us/) License, and  -->
<!-- is (and will always be) **free to use**. -->
<!-- In concordance with Open Government principles,  -->
</div>
<div id="chatham-house-rule" class="section level3 unnumbered">
<h3 class="unnumbered">Chatham House Rule</h3>
<!-- Chatham House Rule for dialogue events {-} -->
<p>This book is prepared using <a href="https://www.chathamhouse.org/about-us/chatham-house-rule">the Chatham House rule</a>.
The Chatham House Rule helps create a trusted environment to understand and resolve complex problems through dialog and timely open communication.
Its guiding spirit is: share the information you receive, but do not reveal the identity of who said it. Hence, no attributions are made and the identity of speakers
and participants is not disclosed.
It is based on the views and codes
contributed by community members as part of ongoing community events interactions. Offered as
a means to facilitate the discussion, the document does not constitute
an analytical document, nor does it represent any formal position of any
organization involved.</p>
</div>
</div>
<div id="how-to-contribute" class="section level2 unnumbered">
<h2 class="unnumbered">How to contribute</h2>
<!-- ## Need help? Have idea? Want to contribute? {-} -->
<p>Any chapter of this book can be edited by simply clicking on the “edit” button, which will lead to the corresponding source Rmd file in the book’s repo, where you can make a change in the document (in doing so, this repo will forked at your github account ) and submit ir to the book editor (by submitting the merge request).
Alternatively, you can always contact the R4GC group lead at the contact listed below and attend R4GC weekly meetups.</p>
</div>
<div id="about-authors" class="section level2 unnumbered">
<h2 class="unnumbered">About authors</h2>
<p><a href="https://www.linkedin.com/in/dmitry-gorodnichy">Dmitry Gorodnichy</a> is Research Data Scientist with the Chief Data Office at the Canadian Border Services Agency.</p>
<p><a href="https://www.linkedin.com/in/patrickjlittle/">Patrick Little</a> is Adviser on the Open Government systems team at the Treasury Board of Canada Secretariat.</p>
<!-- He is passionate about making the government data and tools open to public -->
<!-- ## Need  help? {-} -->
<!-- - Check `Use R!` GCCollab group: https://gccollab.ca/groups/profile/7391537/ -->
<!-- - Join us  for `Lunch and Learn` meet-up every Friday: https://gccollab.ca/groups/about/7855030 -->
<!-- - Contact us: dmitry.gorodnichy@cbsa-asfc.gc.ca -->
<div id="contacts" class="section level3 unnumbered">
<h3 class="unnumbered">Contacts</h3>
<p>For questions and feedback, please contact
<!-- the group  moderator  -->
Dmitry Gorodnichy: <a href="mailto:dmitry.gorodnichy@cbsa-asfc.gc.ca" class="email">dmitry.gorodnichy@cbsa-asfc.gc.ca</a>
<!-- or <dmitry@gorodnichy.ca> --></p>
</div>
</div>
</div>
<div id="français" class="section level1 unnumbered">
<h1 class="unnumbered">Français</h1>
<p>Pour l’instant, ce livre est développé seulement en anglais. Cependant, plusieurs de commentaires et trucs qu’on partage dans notre communauté proviens également dans la langue française aussi.</p>
<p>On espère qu’un moment donné
on peut
d’avoir ce livre dans le deux langues officielles: en anglais et en français.
<!-- traduire ce livre  -->
On même peux se servir des outils automatisés et intelligence artificielle - car nous sommes les scientifiques de données, n’est pas ? - pour automatiser le traduction de contexte de ce livre!</p>
<p>Si vous êtes intéressé de contribuer à nos efforts de traduire ce livre dans le langue de votre choix,
veuillez contacter <a href="index.html#contacts">modérateur de groupe</a>.</p>
</div>
<div id="preface" class="section level1 unnumbered">
<h1 class="unnumbered">Preface</h1>
<!-- # (PART) Preface {.unnumbered} -->
<!-- # (PART) Preface {-} -->
<!-- ## Introduction to First Edition {-} -->
<div id="introduction" class="section level2 unnumbered">
<h2 class="unnumbered">Introduction</h2>
<!-- Abstract -->
<p>Many Government of Canada groups are developing codes to process and visualize various kinds data, often duplicating each other’s efforts, with sub-optimal efficiency and limited level of code quality reviewing.
This book
<!-- This paper  -->
presents a pan-government initiative to address this problem. The idea is to collaboratively build a common repository of code and knowledgebase for use by anyone in the government to perform many common data science tasks, and, in doing that, help each other to master both the data science coding skills and the industry standard collaborative practices. The book explains why R language is used as the language of choice for collaborative data science code development. It summaries R advantages and addresses its limitations, establishes the taxonomy of discussion topics of highest interested to the GC data scientists working with R, provides an overview of used collaborative platforms, and presents the results obtained to date. Even though the code knowledgebase is developed mainly in R, it is meant to be valuable also for data scientists coding in Python and other development environments.</p>
<!-- #### Need for collaboration {-} -->
</div>
<div id="data-as-electricity-of-the-21st-century" class="section level2 unnumbered">
<h2 class="unnumbered">Data as ‘electricity’ of the 21st century</h2>
<p>Data is the ‘electricity’ of the 21st century. It is everywhere. Everybody is using it, and one may not need special training or certification to work with data. However, in contrast to working with electricity, working with data relies on the use of data processing tools (codes), the number and complexity of which increases daily, and which are developed by other data practitioners. In other words, data science - by its nature - is the science that is fueled by collaboration of data scientists and that heavily relies on the quality of the shared data processing codes.</p>
<p>Globally, and in the Government of Canada (GC) in particular, data practitioners come from many different backgrounds and may not have equal level of code programming training, which hinders the development of high-quality (efficient, scalable and re-usable) codes for data science problems. This gap and the need for collaboration for data scientists, specifically those coding in R language, has been raised at the 2021 GC Data Conference Workshop on Data Engineering in February 2021.
This book addresses this need.</p>
<!-- This presentation describes a pan-government collaborative approach that has started following this workshop in order to address the identified need. -->
<!-- First (in Section 2), we review one the main challenges in data science, which is data engineering and which triggered the creation of the R4GC community of practice - the community that brings together data practitioners interested in using (or learning) the R language. The reasons why R is chosen as the language of choice for building the data science collaboration are explained in Section 3. Then (in Section 4), we describe the collaboration portals that have been set in support of the R4GC community activities and knowledgebase and overview key repositories and discussion threads that have been created there. Finally (in Section 5 and Appendix), we summarize the main outputs produced by the community to date. Whereas this paper serves as an introduction to the R4GC community efforts, the complete collection of the community knowledgebase is maintained as a shareable, free to use and collaboratively edited book (The R4GC Book) hosted at https://open-canada.github.io/r4gc. Feedback and contributions to this book are welcome, noting that only unclassified public domain knowledge is archived there. -->
</div>
<div id="data-engineering-challenge" class="section level2 unnumbered">
<h2 class="unnumbered">Data Engineering challenge</h2>
<p>This effort has started from addressing the problem of data engineering, where it is understood - in analogy with the definition of software engineering by IEEE [2] - as the field of science and technology that deals with “developing scientific and technological knowledge, methods, and experience to the design, implementation, testing, and documentation” of data-driven systems and solutions; or - in analogy with the definition of software engineering at Google [3] - as the field that “encompasses not just the act of writing code [for data analysis, in our case], but all of the tools and processes an organization uses to build and maintain that code over time”.</p>
</div>
<div id="towards-open-source-and-open-science" class="section level2 unnumbered">
<h2 class="unnumbered">Towards open source and open science</h2>
<!-- Whereas -->
<p>The spectacular growth of data science tools development is overwhelmingly attributed to the collaborative open nature of the current data science code development practices. Consequently, Canadian government is also
<!-- at the early stages of  -->
adopting open source industry standards for data coding and reporting. Major shift towards enabling and promoting such practices within the government has started recently, when Government of Canada adopted a number of policies in support of Digital, Open Science, and Open Government [4], when Shared Services of Canada deployed a number of collaboration platforms that are now available to all GC organizations, and when IT Security of most GC departments approved the use of open-source data science tools such as R and R Studio.</p>
<!-- ## Uniqueness of the approach  -->
<!-- ## Presentation bias disclosure -->
<!-- ## Authors' professional biases -->
<!-- ## Authors' presentation biases -->
<!-- ## Key differences from other books {-} -->
<!-- ## What makes this book different from other books {-} -->
</div>
<div id="pedagogical-approach" class="section level2 unnumbered">
<h2 class="unnumbered">Pedagogical approach</h2>
<p>The approach to teaching (mastering) R in this book is very different from that of what most (all?) other open-source R tutorials one will find on the Web.</p>
<p>It is driven by the personal professional backgrounds and experiences of the authors (one comes from Computing Science, the other from Open Government) working with R and open data. -</p>
<p>The consistent deliberate effort throughout this book, as throughout <em>all</em> meetups and discussion of the authors in the R4GC community portal, is put into
going away from judging the quality of your R skills by how good your outputs (graphs, reports etc) are , but <em>how good the code that generated your outputs is</em>.</p>
<ul>
<li>Is it easy to understand (without having you to read comments or documentation)?</li>
<li>Is it easy to debug</li>
<li>Is it modular?</li>
<li>Is it as simple as possible?</li>
<li>Is it re-usable?</li>
<li>Is it scalable (to larger, or different data)?</li>
<li>Does it have least possible number of dependencies (packages), and those that he uses are the best (most effciient and robust, and best supported) for the purpose?</li>
</ul>
<p>We focus on
ensuring that from the <em>very first</em> lines of code, you code is written properly, i.e, it conforms to all above criteria.</p>
<p>In order to achieve that,
in contrast to all other tutorials (such as those provided by fabulous RStudio team), the first package we always introduce is ‘data.table’, and not anything else.
All other packages and codes will be added later and through the use of ‘data.table’ by default.</p>
<p>Why? - Read the section on R limitations @ref{r_limitations}.</p>
<p>Importantly, you will soon see that you code will not only runs much faster - so you can run it even no your regular 16 Gb RAM laptop, it also takes less screen space and is easier to read!</p>
<p>And … you will never compare your code to Italian pasta dish (“spaghetti”), and it will get used and possibly further extended by others, and bring more joy to your life.</p>
<!-- And it may get used by others. -->
<!-- (if you use data.table instead of dplyr functions), -->
<!-- It will become easier, not harder, if you do it. -->
<!-- breaking the stereotypical approach to teaching R, -->
</div>
<div id="book-outline" class="section level2 unnumbered">
<h2 class="unnumbered">Book outline</h2>
<p>The book is organized in several parts, according to
the topics of interest discussed in the GCcollab R4GC group.
Discussions around these topics are reviewed and updated regularly, commonly as part of weekly community meetups.</p>
<!-- ### Discussion topics {-} -->
<!-- Some contain more content, some less -->
<p>Part I is dedicated to <em>General discussions</em>, which includes the following:</p>
<ol style="list-style-type: decimal">
<li>Why R?</li>
<li>Learn R: <em>R</em>ight way!</li>
<li>Great open-source textbooks</li>
<li>Events and forums for R users</li>
<li>Using R with GC data infrastructure</li>
<li>Open source policies and guidelines
<!-- (gcdocs, AWS, etc) --></li>
</ol>
<p>Part II is dedicated to the <em>Best Practices and Efficient Coding in R</em> and includes the following:</p>
<ol start="7" style="list-style-type: decimal">
<li><p>Use R efficiently with data.table!</p></li>
<li><p>R and Python, Unite!</p></li>
<li><p>From Excel to R</p></li>
<li><p>Reading various kinds of data in R</p></li>
<li><p>Other tips and rules for coding well in R
<!-- 9. Object oriented programming in R -->
Part III is dedicated to <em>Visualization and Reporting </em>and includes the following:</p></li>
<li><p>Literate programming and automated reports with ‘rmarkdown’</p></li>
<li><p>Data visualization with ‘ggplot2’ and its extensions</p></li>
<li><p>Interactive interfaces, applications and dashboards with ‘shiny’</p></li>
<li><p>Interactive html with ‘plotly’, ‘Datatable’, ‘reactable’</p></li>
<li><p>Geo/Spatial coding and visualization in R</p></li>
</ol>
<p>Part IV is dedicated <em>Advanced use of Data Science, Machine Learning, and AI</em> and includes:</p>
<ol start="15" style="list-style-type: decimal">
<li>Entity resolution and record linking in R</li>
<li>Text Analysis in R</li>
<li>Machine Learning and Modeling in R</li>
<li>Computer vision and Deep learning in R</li>
<li>Simulation and Optimization in R</li>
<li>Operationalizing in-house built tools and models (could go in Part I)</li>
</ol>
<p>Part V contains the <em>Tutorials</em> developed by and for the community. These are:</p>
<ol start="19" style="list-style-type: decimal">
<li><p>GCCode 101</p></li>
<li><p>Packages 101</p></li>
<li><p>R101: Building COVID-19 Tracker App from scratch</p></li>
<li><p>Geo/Spatial coding and visualization with R. Part 1:</p></li>
<li><p>Text Analysis with R. Part 1:</p></li>
</ol>
<p>and a number of short “How To: tutorials such as:</p>
<ol start="22" style="list-style-type: decimal">
<li>Dual Coding - Python and R unite !</li>
<li>Working with ggtables</li>
<li>Automate common look and feel of your ggplot graphs
and others</li>
</ol>
<p>Part VI provides information about
<!-- the outputs of the community development.  This includes a variety of -->
Shiny Web Apps
<!-- and other codes and libraries -->
developed by the community members.
<!-- All codes are made data-agnostic and do not contain any internal information --></p>
<p>Finally, <em>Appendix</em> includes agendas, notes, and codes from the R4GC community “Lunch and Learn” meetups.</p>
<!-- Future Plans and Release Notes will be posted there soon -->
<!-- , plans and  invitation for collaboration, in particular to make this knowledgebase bilingual - in support of bilingualism in Canada and as an another opportunity for applying data science skills for public good. -->
</div>
</div>
<div id="part-general-discussions" class="section level1 unnumbered">
<h1 class="unnumbered">(PART) General discussions</h1>
<!-- # (PART) GCcollab discussions {.unnumbered} -->
</div>
<div id="why-r" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Why R?</h1>
<!-- This is the question many ask. - Why should I use/learn R?  -->
<p>R is one of the fastest growing programming languages and environment for data science, visualization and processing.
R integrates well with Python and other free and commercial Data Science tools. It can also do something that other tools cannot and is very well supported by growing international community.</p>
<p>It also comes with RStudio - a free Integrated Development Environment (IDE) that is now supported by most GC Agencies and Departments, and that is becoming one of the main tools for data related problems worldwide. For Microsoft data users, anything you do with Excel, Access, Power BI, you can also do with R and RStudio.</p>
<div id="top-10-r-advantages-for-data-science" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Top 10 R advantages for Data Science</h2>
<p>A quick review of the presentations made at the 2021 International Methodology Symposium showed that about one third of projects presented at the symposium were done using R and RStudio. If counting the percentage of projects dealing with data visualization, including geo/spatial mapping, then this number becomes close to two thirds of all presented projects. Clearly, even though Python remains the most frequently used language for machine learning and complex data analysis tasks, R has become de-facto the language of choice in many government departments when it comes to developing interactive reports, web applications and complex visualizations, thanks to such its popular packages as “rmarkdown”, “ggplot” and “shiny”.</p>
<p>Other advantages of R highlighted at the Symposium include: common tidy data approach shared across all R packages; peer-reviewing and curation of packages by CRAN (Comprehensive R Archive Network), which is facilitated through the “devtool” R package that is specifically designed for this purpose; and RStudio-led movement for R education and deployment. All of these are in contrast to the ‘wild-west’ development of Python packages (which is a popular expression even among Python users), and are very important for enabling collaborative development of data science codes and knowledgebase.</p>
<p>To summarize,
<!-- Table 1 presents the Top 10, most quoted by the R4GC community,  reasons to use R for data science. -->
<!-- There was much discussion around this topic, and  -->
below are our own Top 10 reasons to use R for Data Science - filtered and refined by the members of this community.</p>
<ol style="list-style-type: decimal">
<li>Advanced graphics with ggplot2 and its extensions</li>
<li>Automated report/tutorials/textbooks generation with RMarkdown</li>
<li>Streamlined package development with devtools</li>
<li>Streamlined Interactive interfaces and dashboards development and deployment with Shiny</li>
<li>“Best for geocomputation”*</li>
<li>Common tidy design shared across packages</li>
<li>Curated peer-tested repo of packages at CRAN</li>
<li>RStudio IDE (Integrated Development Environment) on desktop and cloud (rstudio.cloud)</li>
<li>Full support and inter-operability with Python from the same IDE</li>
<li>Global RStudio**-led movement for R education and advancement (rstudio.com)</li>
</ol>
<ul>
<li><p><a href="https://geocompr.robinlovelace.net/intro.html#why-use-r-for-geocomputation" class="uri">https://geocompr.robinlovelace.net/intro.html#why-use-r-for-geocomputation</a> (also <a href="https://geocompr.robinlovelace.net/preface.html#why-r" class="uri">https://geocompr.robinlovelace.net/preface.html#why-r</a>)</p></li>
<li><p>RStudio is a free suit of tools and education resources to program in R developed by a Public Benefit Corporation, which also provides free on-cloud IDE for coding data science projects in R and other languages</p></li>
</ul>
<!-- R advantages: -->
<!-- Thousands of free curated peer-tested ready to use packages - including several for Natural Language Processing, record linking, Web Crawling, geocoding used in this App - from CRAN: https://cran.r-project.org -->
<!-- Global RStudio-led movement for R education and advancement - in contrast to “Wild West” development of Python. Latest rstudio::global(2021) counted over 10,000 attendees and lists over 50 free tutorials and presentations accessible from https://rstudio.com/conference/ -->
<!-- Free on-cloud IDE (Integrated Development Environment) to start learning and coding in R in no time: https://rstudio.cloud -->
<!-- Fast in-place processing of data tables: -->
<!-- Full Python - R support and f inter-operabilityvfrom the same RStudio IDE -->
<!-- Common tidy design shared across packages, -->
<!-- Advanced declarative graphics, -->
<!-- Streamlined package development, -->
<!-- Pipelining and other code optimizations, -->
<!-- Interactive interfaces for reports and dashboards, -->
<!-- Self-learning tools and free text books on all R subjects: from https://education.rstudio.com/ and https://bookdown.org/ -->
<!-- Professional publication suit that incorporates LaTeX and HTML, -->
<!-- Easy web-publishing of data reports and deployment of web-applications -->
</div>
<div id="r_limitations" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Tackling the limitations of R</h2>
<p>The main deficiency of R (in particular, when compared to Python) is that many R functions and packages are not developed to be memory- or processing time- efficient, and “by default”, i.e., unless special care is taken in developing the code, most codes written in R are very slow and consume prohibitively large amount of memory, making it often impossible to run data processing codes on ordinarily laptops (with not more than 16 GB of RAM) such as those used by majority of GC employees. This is because all variables in R, including data array and data frame variables (which are naturally very large) are passed to a function by copying the entire variable content from one memory location to another , and then copying it back after the function completes its operation. In other programming languages, such as Python, C++, or Java, such operations normally are not done by passing the entire object to a function, but rather by pasing only a pointer to (or memory address of) an object that needs to be processed by the function, which is much faster and does not consume a lot of memory. This deficiency however can be practically entirely eliminated, should the R code be developed using the “efficiency-by-design” methodology that is offered by the ‘data.table’ R package. This is why much emphasis in the R4GC community discussions is put on encouraging the community members to use ‘data.table’ class by default (or always) instead of base ‘data.frame’ class.</p>
<p>Another deficiency of R is that object-oriented programming (OOP) is not native in R. There are a number of ways to implement an object in R - using S3, S4 and R6 classes, however each of them has its own limitations. This deficiency however is not critical, because fast and memory-efficient codes can still be developed with and without OOP, and, if needed, a portion of the OOP code can be also built in Python (or C++) and then used from within R using ‘Rcpp’ and ‘reticulate’ packages.</p>
</div>
<div id="r-vs.-python" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> R vs. Python</h2>
<p>Main references:</p>
<ul>
<li><a href="https://docs.rstudio.com/tutorials/user/using-python-with-rstudio-and-reticulate/" class="uri">https://docs.rstudio.com/tutorials/user/using-python-with-rstudio-and-reticulate/</a></li>
<li><a href="https://www.datacamp.com/community/tutorials/using-both-python-r" class="uri">https://www.datacamp.com/community/tutorials/using-both-python-r</a></li>
</ul>
<p>The latter has also a nice summary of PROs vs. CONs for both languages, subjectively summarized by myself below:</p>
<p>Python’s PROs:</p>
<ul>
<li>Object-oriented language (this is a big one for me)<br />
</li>
<li>General Purpose , i.e. you can use elsewhere (e.g. with raspberry pi - www.raspberrypi.org, as I did for one of my daughters’ projects)<br />
</li>
<li>Simple and easy to understand and learn (this could be subjective, but I would generally agree that R is not taught they way I personally would teach it, i.e. based on computer science principles, rather than on memorizing a collection of various heuristic tools and functions.)<br />
</li>
<li>Efficient (fast) packages for advanced machine learning activities, e.g. tensorflow or keras (which you can use from R too, but it could be less efficient), also a large collection of audio manipulation / recognition (some of whicg I played with for one of my biometrics projects)</li>
</ul>
<p>Python CONs:</p>
<ul>
<li>Not really designed for advanced manipulation or visualization of data</li>
</ul>
<p>R’s PRO’s:</p>
<ul>
<li>It is designed specifically for data tasks</li>
<li>CRAN provides &gt;10K peer-tested (!) packages for any data task you may think of . (I would also add - It also provides much great tools to get you OWN work be tested and featured one day in CRAN - which is what we are doing now at our Learn R Meet-ups!)</li>
<li>ggplot2 graphics is unbeatable</li>
<li>Capable of standalone analyses with built-in packages. (Anyone knows what it means??)</li>
</ul>
<p>R’s CON’s:</p>
<ul>
<li>Not the fastest or memory efficient (Hey- That’s without <code>data.table</code> package! I don’t think so,if you use <code>data.table</code>,properly)</li>
<li>Object-oriented programming is not native or as easy in R, compared to Python. - Actually, I added this one. To me, this is one of main motivations to see how to use both Python and R, instead of R by itself. But for someone else, this could be not tie-breaker though</li>
</ul>
</div>
</div>
<div id="learn-r-right-way" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Learn R: <em>R</em>ight way!</h1>
<div id="intro" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Intro</h2>
<p>The number of resources and ways to learn R is overwhelming.
Some of us have tried many of them until we found
<!-- the ones that we believe are  -->
the best and the right ones. These are shared here.</p>
<p>It is suggested to start learning R the “<em>R</em>ight way”, as discussed below.</p>
</div>
<div id="in-which-sense-right" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> In which sense ‘Right’?</h2>
<p>Ok, perhaps the word “Right” is not right here… - What is right for someone, may not be right for someone else who learnt R another way.
So, Let’s call it “Diffe<em>R</em>ent” or “Non-t<em>R</em>aditional” way. It is indeed the best and right for us. And we hope hope that, even if it is not the right “right” for you, it is still “right” for you to help you further improve your R codings kills</p>
</div>
<div id="r101-from-r4gc-lunch-and-learn" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> R101 from “R4GC Lunch and Learn”</h2>
<p>Recommendations for R101 home-work: <a href="https://open-canada.github.io/UseR/resources.html" class="uri">https://open-canada.github.io/UseR/resources.html</a></p>
<p>The starters (for students coming from non computer science backgrounds): <a href="https://gorodnichy.github.io/r101/" class="uri">https://gorodnichy.github.io/r101/</a></p>
</div>
<div id="additional-resources" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Additional resources</h2>
<div id="ways-to-continue-growing-your-r-skills" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Ways to continue growing your R skills</h3>
<div id="knowledge-in" class="section level4" number="2.4.1.1">
<h4><span class="header-section-number">2.4.1.1</span> Knowledge in</h4>
<p>Apart from reading and contributing to this R4GC Book and participating in our R4GC community meetups (which is naturally the best way :), you can :</p>
<ul>
<li><p>Ask questions (or seek for already many answers) at <a href="https://stackoverflow.com/" class="uri">https://stackoverflow.com/</a>.
In fact, what a great option for you to save all the knowledgebase you acquire –
Helping yourself, you also help others, and contribute to further improvement of many R packages !</p></li>
<li><p>browse and play with many open-source books (See next section)</p></li>
<li><p>browse and play with many R blogs</p></li>
<li><p>attend free RStudio monthly organized webinars: <a href="https://github.com/rstudio/webinars" class="uri">https://github.com/rstudio/webinars</a></p></li>
<li><p>RStudio-Enterprise-Community-Meetup:
<a href="https://www.meetup.com/RStudio-Enterprise-Community-Meetup" class="uri">https://www.meetup.com/RStudio-Enterprise-Community-Meetup</a> -</p></li>
</ul>
<p>(NB: you may have to access it from your personal device)</p>
<ul>
<li>attend free annual RStudio organized conferences rstudio::conf</li>
</ul>
<p><a href="https://resources.rstudio.com/rstudio-conf-2019" class="uri">https://resources.rstudio.com/rstudio-conf-2019</a> , 2020, 2021 etc</p>
</div>
</div>
<div id="selected-presentations" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Selected presentations</h3>
<ul>
<li><a href="https://github.com/jennybc/debugging" class="uri">https://github.com/jennybc/debugging</a></li>
</ul>
<div id="knowledge-out" class="section level4" number="2.4.2.1">
<h4><span class="header-section-number">2.4.2.1</span> Knowledge out</h4>
<p>See next chapter for options wher you can submit or present your work, get it reviewed and published</p>
</div>
</div>
</div>
</div>
<div id="great-open-source-textbooks" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Great Open Source Textbooks</h1>
<p>The R4GC book is inspired by many great open-source textbooks built using bookdown R package. These are listed below. Some of these are forked into <a href="https://github.com/open-canada/" class="uri">https://github.com/open-canada/</a> to allow further testing and editing of the codes there</p>
<p>For textbooks specific to each discussion topic in The R4GC book, please see the corresponding discussion topic chapters.</p>
<p>For a much larger collection of bookdown books see:</p>
<ul>
<li><p><a href="https://www.bigbookofr.com/" class="uri">https://www.bigbookofr.com/</a>. Source: <a href="https://github.com/open-canada/BigBookofR" class="uri">https://github.com/open-canada/BigBookofR</a></p></li>
<li><p><a href="https://bookdown.org/" class="uri">https://bookdown.org/</a></p></li>
</ul>
<div id="by-presentation" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> By presentation</h2>
<div id="in-two-column-format" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> In two-column format</h3>
<ul>
<li><p><a href="https://bookdown.org/yihui/bookdown/" class="uri">https://bookdown.org/yihui/bookdown/</a> (<a href="https://bookdown.org/yihui/rmarkdown/bookdown-output.html#bookdown-output" class="uri">https://bookdown.org/yihui/rmarkdown/bookdown-output.html#bookdown-output</a>)</p></li>
<li><p><a href="https://bookdown.org/yihui/rmarkdown-cookbook/" class="uri">https://bookdown.org/yihui/rmarkdown-cookbook/</a></p></li>
<li><p><a href="https://rstudio4edu.github.io/rstudio4edu-book/" class="uri">https://rstudio4edu.github.io/rstudio4edu-book/</a>. Source: <a href="https://github.com/open-canada/rstudio4edu-book" class="uri">https://github.com/open-canada/rstudio4edu-book</a></p></li>
<li><p><a href="https://clauswilke.com/dataviz" class="uri">https://clauswilke.com/dataviz</a>. Source: <a href="https://github.com/open-canada/dataviz" class="uri">https://github.com/open-canada/dataviz</a></p></li>
<li><p><a href="https://csgillespie.github.io/efficientR/" class="uri">https://csgillespie.github.io/efficientR/</a></p></li>
<li><p><a href="https://www.datascienceatthecommandline.com/1e/" class="uri">https://www.datascienceatthecommandline.com/1e/</a></p></li>
<li><p><a href="https://moderndive.com/" class="uri">https://moderndive.com/</a> - <a href="https://github.com/moderndive/ModernDive_book" class="uri">https://github.com/moderndive/ModernDive_book</a></p></li>
<li><p><a href="https://smltar.com/" class="uri">https://smltar.com/</a> Supervised Machine Learning for Text Analysis in R EMIL HVITFELDT AND JULIA SILGE 2021-10-17</p></li>
<li><p><a href="https://bookdown.org/ejvanholm/Textbook/" class="uri">https://bookdown.org/ejvanholm/Textbook/</a></p></li>
<li><p><a href="https://bookdown.org/igisc/EnvDataSci/" class="uri">https://bookdown.org/igisc/EnvDataSci/</a> Introduction to Environmental Data Science</p></li>
<li><p><a href="https://bookdown.org/sunboklee/intror_ewha/" class="uri">https://bookdown.org/sunboklee/intror_ewha/</a> R for Solving Social Problems</p></li>
</ul>
<!-- Ewha Womans University, 2021-2) 2021-09-03 -->
<p><a href="https://bookdown.org/aclark/chess/" class="uri">https://bookdown.org/aclark/chess/</a></p>
<!-- https://bookdown.org/jerome_m_levesque/branchingAppUserGuide/ -->
<!-- A policy tool for COVID-19 workplace mitigation strategies -->
<!-- Jerome Levesque and David Maybury -->
<ul>
<li><a href="https://bookdown.org/selesnow/build_telegram_bot_using_r/" class="uri">https://bookdown.org/selesnow/build_telegram_bot_using_r/</a></li>
</ul>
<p>Разработка telegram ботов на языке R /
Development of Bots in R (In Russian)</p>
<!-- Алексей Селезнёв -->
<!-- 2021-08-26 -->
<!-- https://bookdown.org/f_pianzola/Korean_literature/ -->
</div>
<div id="in-three-column-format" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> In three-column format</h3>
<p>On Shiny:</p>
<ul>
<li><a href="https://mastering-shiny.org/preface.html" class="uri">https://mastering-shiny.org/preface.html</a></li>
<li><a href="https://engineering-shiny.org/" class="uri">https://engineering-shiny.org/</a></li>
<li><a href="https://unleash-shiny.rinterface.com/" class="uri">https://unleash-shiny.rinterface.com/</a></li>
</ul>
<p>From Hadley:</p>
<ul>
<li><a href="https://r4ds.had.co.nz/" class="uri">https://r4ds.had.co.nz/</a></li>
<li><a href="https://adv-r.hadley.nz/" class="uri">https://adv-r.hadley.nz/</a></li>
<li><a href="https://r-pkgs.org/" class="uri">https://r-pkgs.org/</a></li>
<li><a href="https://geocompr.robinlovelace.net/" class="uri">https://geocompr.robinlovelace.net/</a></li>
</ul>
</div>
</div>
<div id="by-topic" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> By Topic</h2>
<div id="introductory-and-general" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Introductory and General</h3>
<p>TBA</p>
</div>
<div id="specialized" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Specialized</h3>
<p>TBA</p>
</div>
</div>
</div>
<div id="great-open-source-tutorials" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Great Open Source Tutorials</h1>
<div id="from-rstudio" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> From RStudio</h2>
<ul>
<li><p><a href="https://github.com/rstudio/webinars" class="uri">https://github.com/rstudio/webinars</a></p></li>
<li><p>“Data Science Course in a Box” course:
<a href="https://github.com/rstudio-education/datascience-box" class="uri">https://github.com/rstudio-education/datascience-box</a></p></li>
<li><p>Data-sets: <a href="https://github.com/rstudio-education/dsbox" class="uri">https://github.com/rstudio-education/dsbox</a>)</p></li>
<li><p>R for Data Science Instructor’s Guide
<a href="https://github.com/rstudio-education/r4ds-instructors" class="uri">https://github.com/rstudio-education/r4ds-instructors</a></p></li>
<li><p>A guide to some of the most useful R Packages that we know about, organized by their role in data science. - <a href="https://github.com/rstudio/RStartHere" class="uri">https://github.com/rstudio/RStartHere</a></p></li>
<li><p><a href="https://github.com/rstudio/cheatsheets" class="uri">https://github.com/rstudio/cheatsheets</a></p></li>
</ul>
</div>
<div id="from-data-carpentry" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> From Data Carpentry</h2>
<p>Many free open source Lessons and Workshops are developed by<br />
<a href="https://datacarpentry.org/lessons">Data Carpentry</a>. The sources for many of them can be found at
<a href="https://github.com/search?q=topic%3Ar+org%3Adatacarpentry" class="uri">https://github.com/search?q=topic%3Ar+org%3Adatacarpentry</a> .
Some are listed below.</p>
<p>datacarpentry/R-ecology-lesson
Data Analysis and Visualization in R for Ecologists</p>
<p>datacarpentry/r-raster-vector-geospatial
Introduction to Geospatial Raster and Vector Data with R</p>
<p>datacarpentry/r-socialsci
R for Social Scientists</p>
<p>datacarpentry/semester-biology
data-science r sql biology spatial-data teaching-materials data-carpentry</p>
<p>datacarpentry/rr-organization1
The Organization lesson for the Reproducible Science Curriculum</p>
<p>r english on-hold lesson reproducibility data-carpentry carpentries project-organisation</p>
<p>datacarpentry/r-intro-geospatial
Introduction to R for Geospatial Data</p>
<p>datacarpentry/rr-automation
Resources for automation tutorials</p>
<p>datacarpentry/genomics-r-intro
Intro to R and RStudio for Genomics</p>
<p>datacarpentry/rr-intro
Introduction materials for Reproducible Research Curriculum</p>
<p>datacarpentry/rr-literate-programming
Repository for lesson materials on Literate Programming</p>
</div>
<div id="more-from-github" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> More from GitHub</h2>
</div>
</div>
<div id="events-and-forums-for-r-users" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Events and forums for R users</h1>
<div id="from-rstudio-1" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> From RStudio</h2>
<div id="httpsresources.rstudio.com." class="section level3" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> <a href="https://resources.rstudio.com" class="uri">https://resources.rstudio.com</a>.</h3>
<p>Webinars</p>
</div>
<div id="rstudio-community-meetup" class="section level3" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> RStudio Community Meetup</h3>
<p>Another great meetup opportunity:</p>
<p><a href="https://www.meetup.com/RStudio-Enterprise-Community-Meetup" class="uri">https://www.meetup.com/RStudio-Enterprise-Community-Meetup</a></p>
<p>NB: you may be able to access it from GC network.</p>
<p>Each meetup is dedicated to a specific topic, following which they post many Q&amp;A at <a href="https://community.rstudio.com/" class="uri">https://community.rstudio.com/</a></p>
</div>
</div>
<div id="r-blogs" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> R blogs</h2>
<ul>
<li><a href="https://rpubs.com" class="uri">https://rpubs.com</a></li>
</ul>
</div>
<div id="r-conferences" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> R conferences</h2>
<p>(from <a href="https://rviews.rstudio.com/2021/03/03/2021-r-conferences" class="uri">https://rviews.rstudio.com/2021/03/03/2021-r-conferences</a>)</p>
<ul>
<li><p>Cascadia RConf 2021 (June 4 - 5), a jewel of a regional R conference for its first three years, was canceled in 2020. It is back this year as a virtual event. The Call for Presentations is open.</p></li>
<li><p>useR! 2021 (July 5 - 9) has an outstanding lineup of keynote speakers. The program is very likely to make US based attendees night-owls</p></li>
<li><p>EARL Conference 2021 (September 6 - 10), the premier R in industry event, will be online this year. The call for abstracts is already open.</p></li>
</ul>
</div>
<div id="related-journals" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Related journals:</h2>
<p>This is where you can submit or present your data science work.</p>
<ul>
<li><p><a href="https://peerj.com/articles/?q=data" class="uri">https://peerj.com/articles/?q=data</a></p></li>
<li><p><a href="https://earlconf.com/#about" class="uri">https://earlconf.com/#about</a>: The Enterprise Applications of the R Language Conference (EARL)</p></li>
<li><p><a href="https://odsc.com/boston/" class="uri">https://odsc.com/boston/</a>: Data Science Conference &amp; Expo</p></li>
<li><p><a href="https://journals.plos.org/plosone/search?filterJournals=PLoSONE&amp;q=data+science" class="uri">https://journals.plos.org/plosone/search?filterJournals=PLoSONE&amp;q=data+science</a> (research by the US Department of Homeland Security is published there)</p></li>
</ul>
<p>See also (from <a href="http://charteredabs.org/academic-journal-guide-2015-view/" class="uri">http://charteredabs.org/academic-journal-guide-2015-view/</a> (Rank 4-3))</p>
<ul>
<li><p>Management Science</p></li>
<li><p>IEEE Transactions on Systems, Man, and Cybernetics: Systems (formerly “IEEE Transactions on Systems, Man and Cybernetics - Part A: Systems and Humans”)</p></li>
<li><p>Annals of Operations Research</p></li>
<li><p>IEEE Transactions on Cybernetics (formerly “IEEE Transactions on Systems Man and Cybernetics Part C (Applications and Reviews)”)</p></li>
<li><p>INFORMS Journal on Computing OR Spectrum</p></li>
<li><p>Transportation Science</p></li>
</ul>
<p>Computational Statistics &amp; Data Analysis</p>
<div id="academic-journals" class="section level3" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Academic Journals:</h3>
<ul>
<li>Operations Research (Informs): <a href="https://pubsonline.informs.org/journal/opre" class="uri">https://pubsonline.informs.org/journal/opre</a> <a href="https://www.scirp.org/journal/jdaip/" class="uri">https://www.scirp.org/journal/jdaip/</a> - Journal of Data Analysis and Information Processing</li>
</ul>
</div>
</div>
<div id="related-conferences" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> RElated conferences</h2>
<div id="non-academic" class="section level3" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> Non-academic</h3>
</div>
<div id="academic-conferences" class="section level3" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> Academic Conferences:</h3>
<ul>
<li><p>Canadian AI Conference - <a href="https://www.caiac.ca/en/conferences" class="uri">https://www.caiac.ca/en/conferences</a></p></li>
<li><p>Otheer AI conferences</p></li>
</ul>
</div>
<div id="ieee-conferences" class="section level3" number="5.5.3">
<h3><span class="header-section-number">5.5.3</span> IEEE Conferences</h3>
<ul>
<li>IEEE BigData</li>
<li>IEEE International Conference on Technologies for Homeland Security HST</li>
</ul>
</div>
</div>
<div id="related-communities-in-gc" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> Related communities in GC</h2>
<p>Roughly sorted by the level of group activity</p>
<div id="gcconnex-gc-only" class="section level3" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> GCConnex (GC only):</h3>
<ul>
<li><a href="https://gcconnex.gc.ca/groups/profile/5394852/data-science-goc" class="uri">https://gcconnex.gc.ca/groups/profile/5394852/data-science-goc</a></li>
<li><a href="https://gcconnex.gc.ca/groups/profile/56632124/statcan-data-science-communities-of-practice-hub" class="uri">https://gcconnex.gc.ca/groups/profile/56632124/statcan-data-science-communities-of-practice-hub</a></li>
<li><a href="https://gcconnex.gc.ca/groups/profile/53857931/applied-machine-learning-ml-for-text-analysis-community-of-practice-cop" class="uri">https://gcconnex.gc.ca/groups/profile/53857931/applied-machine-learning-ml-for-text-analysis-community-of-practice-cop</a></li>
<li><a href="https://gcconnex.gc.ca/groups/profile/22346843/big-data-community" class="uri">https://gcconnex.gc.ca/groups/profile/22346843/big-data-community</a></li>
<li><a href="https://gcconnex.gc.ca/groups/profile/39621554/data-visualization-resources" class="uri">https://gcconnex.gc.ca/groups/profile/39621554/data-visualization-resources</a></li>
<li><a href="https://gcconnex.gc.ca/groups/profile/24345174/data-visualization" class="uri">https://gcconnex.gc.ca/groups/profile/24345174/data-visualization</a></li>
<li><a href="https://gcconnex.gc.ca/groups/profile/47035648/machine-learning-in-remote-sensing-cop" class="uri">https://gcconnex.gc.ca/groups/profile/47035648/machine-learning-in-remote-sensing-cop</a></li>
<li><a href="https://gcconnex.gc.ca/groups/profile/24825105/data-analytics-coalition" class="uri">https://gcconnex.gc.ca/groups/profile/24825105/data-analytics-coalition</a></li>
<li><a href="https://gcconnex.gc.ca/groups/profile/47035648/machine-learning-in-remote-sensing-cop" class="uri">https://gcconnex.gc.ca/groups/profile/47035648/machine-learning-in-remote-sensing-cop</a></li>
<li><a href="https://gcconnex.gc.ca/groups/profile/19758048/analytics-mining-and-hypothesis-testing" class="uri">https://gcconnex.gc.ca/groups/profile/19758048/analytics-mining-and-hypothesis-testing</a></li>
<li><a href="https://gcconnex.gc.ca/groups/profile/62219803/artificial-intelligence-and-data-science-group" class="uri">https://gcconnex.gc.ca/groups/profile/62219803/artificial-intelligence-and-data-science-group</a></li>
<li><a href="https://gcconnex.gc.ca/groups/profile/30787891/digital-academy" class="uri">https://gcconnex.gc.ca/groups/profile/30787891/digital-academy</a></li>
<li><a href="https://gcconnex.gc.ca/groups/profile/36236376/candev-data-challenge-" class="uri">https://gcconnex.gc.ca/groups/profile/36236376/candev-data-challenge-</a></li>
<li><a href="https://gcconnex.gc.ca/groups/profile/4474153/data-analytics-working-group-dawg" class="uri">https://gcconnex.gc.ca/groups/profile/4474153/data-analytics-working-group-dawg</a></li>
<li><a href="https://gcconnex.gc.ca/groups/profile/34024870/welcome-to-r-canadian-government" class="uri">https://gcconnex.gc.ca/groups/profile/34024870/welcome-to-r-canadian-government</a> (not active)</li>
</ul>
</div>
<div id="gccode-gc-only" class="section level3" number="5.6.2">
<h3><span class="header-section-number">5.6.2</span> GCcode (GC only):</h3>
<ul>
<li><a href="https://gccode.ssc-spc.gc.ca/r4gc" class="uri">https://gccode.ssc-spc.gc.ca/r4gc</a></li>
<li><a href="https://gccode.ssc-spc.gc.ca/DSCV" class="uri">https://gccode.ssc-spc.gc.ca/DSCV</a></li>
</ul>
</div>
<div id="gccollab-public-with-login" class="section level3" number="5.6.3">
<h3><span class="header-section-number">5.6.3</span> GCcollab (public with login):</h3>
<ul>
<li><a href="https://gccollab.ca/groups/profile/778815/eneccc-network-of-experts-and-researchers-in-data-science-nerdsfrlabo-de-donnu00e9es" class="uri">https://gccollab.ca/groups/profile/778815/eneccc-network-of-experts-and-researchers-in-data-science-nerdsfrlabo-de-donnu00e9es</a></li>
<li><a href="https://gccollab.ca/groups/profile/3465987/enswam-support-for-wildlife-analysis-and-monitoringfr" class="uri">https://gccollab.ca/groups/profile/3465987/enswam-support-for-wildlife-analysis-and-monitoringfr</a></li>
<li><a href="https://gccollab.ca/groups/profile/18873/enopen-governmentfrgouvernement-ouvert" class="uri">https://gccollab.ca/groups/profile/18873/enopen-governmentfrgouvernement-ouvert</a></li>
<li><a href="https://gccollab.ca/groups/profile/7071541/endata-engineering-challenges-and-solutions" class="uri">https://gccollab.ca/groups/profile/7071541/endata-engineering-challenges-and-solutions</a> (#GCData2021 conference workshop)</li>
</ul>
<p>More GCcollab groups are listed at <a href="https://wiki.gccollab.ca/The_Square/GCcollab_Groups" class="uri">https://wiki.gccollab.ca/The_Square/GCcollab_Groups</a></p>
</div>
<div id="gcwiki-public" class="section level3" number="5.6.4">
<h3><span class="header-section-number">5.6.4</span> GCwiki (public):</h3>
<ul>
<li><a href="https://wiki.gccollab.ca/The_Square/Data_Science" class="uri">https://wiki.gccollab.ca/The_Square/Data_Science</a></li>
</ul>
</div>
<div id="github-public" class="section level3" number="5.6.5">
<h3><span class="header-section-number">5.6.5</span> GitHub (public):</h3>
<ul>
<li><a href="https://github.com/open-data" class="uri">https://github.com/open-data</a></li>
<li><a href="https://github.com/canada-ca" class="uri">https://github.com/canada-ca</a></li>
<li><a href="https://github.com/PatLittle" class="uri">https://github.com/PatLittle</a></li>
</ul>
</div>
<div id="other-canada-groups" class="section level3" number="5.6.6">
<h3><span class="header-section-number">5.6.6</span> Other Canada groups</h3>
<ul>
<li><a href="https://code.open.canada.ca/en/open-source-softwares.html" class="uri">https://code.open.canada.ca/en/open-source-softwares.html</a></li>
</ul>
<!-- # Open R codes for GC: on GCcode and GitHub -->
</div>
</div>
</div>
<div id="open-policies" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Open government policies</h1>
<div id="open-source" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Open Source</h2>
<ul>
<li><p>“Directive on Service and Digital” – Appendix A: <a href="https://www.tbs-sct.gc.ca/pol/doc-eng.aspx?id=32602" class="uri">https://www.tbs-sct.gc.ca/pol/doc-eng.aspx?id=32602</a>.</p></li>
<li><p>Open Sourcing GC Code <a href="https://canada-ca.github.io/ofd-joep/assets/pdf/Open%20Source%20Code%20Calvin%20Rodo.pdf" class="uri">https://canada-ca.github.io/ofd-joep/assets/pdf/Open%20Source%20Code%20Calvin%20Rodo.pdf</a></p></li>
<li><p><a href="https://github.com/canada-ca/Open_First_Whitepaper/blob/master/en/4_Open_Source_Software_Contribution.md#releasing-open-source-software-code" class="uri">https://github.com/canada-ca/Open_First_Whitepaper/blob/master/en/4_Open_Source_Software_Contribution.md#releasing-open-source-software-code</a></p></li>
<li><p><a href="https://code.open.canada.ca/open-source-code.html" class="uri">https://code.open.canada.ca/open-source-code.html</a> &lt;– broken link</p></li>
<li><p>Government of Canada Strategic Plan for Information Management and Information Technology 2017 to 2021 <a href="https://www.canada.ca/en/treasury-board-secretariat/services/information-technology/strategic-plan-2017-2021.html#toc6-2" class="uri">https://www.canada.ca/en/treasury-board-secretariat/services/information-technology/strategic-plan-2017-2021.html#toc6-2</a></p></li>
<li><p>Guidance: When code should be open or closed <a href="https://www.gov.uk/government/publications/open-source-guidance/when-code-should-be-open-or-closed" class="uri">https://www.gov.uk/government/publications/open-source-guidance/when-code-should-be-open-or-closed</a></p></li>
</ul>
<div id="open-government" class="section level3" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Open government</h3>
<ul>
<li><p>A Framework for Implementing Open-by-Default with Federal Government Science January 4, 2021 <a href="https://www.ic.gc.ca/eic/site/063.nsf/eng/h_98201.html" class="uri">https://www.ic.gc.ca/eic/site/063.nsf/eng/h_98201.html</a></p></li>
<li><p>Directive on Open Government <a href="https://www.tbs-sct.gc.ca/pol/doc-eng.aspx?id=28108" class="uri">https://www.tbs-sct.gc.ca/pol/doc-eng.aspx?id=28108</a></p></li>
</ul>
</div>
</div>
<div id="open-science" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Open Science</h2>
<ul>
<li>Roadmap for Open Science <a href="https://www.ic.gc.ca/eic/site/063.nsf/eng/h_97992.html" class="uri">https://www.ic.gc.ca/eic/site/063.nsf/eng/h_97992.html</a></li>
</ul>
<div id="scientific-integrity" class="section level3" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Scientific Integrity</h3>
<ul>
<li>Model Policy on Scientific Integrity <a href="https://www.ic.gc.ca/eic/site/063.nsf/eng/h_97643.html" class="uri">https://www.ic.gc.ca/eic/site/063.nsf/eng/h_97643.html</a></li>
</ul>
<!-- # (PART) Efficient R coding {-} -->
</div>
</div>
</div>
<div id="part-art-of-r-programming" class="section level1 unnumbered">
<h1 class="unnumbered">(PART) Art of R programming</h1>
</div>
<div id="use-r-efficiently-with-data.table" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Use R efficiently with data.table!</h1>
<!-- for very fast and user friendly data processing -->
<p>## TL;DR</p>
<ol style="list-style-type: decimal">
<li>For any code you do (ie, by default) your first lines of code should be:</li>
</ol>
<p>The <code>data.table</code> package developed by Matt Dowle is a game changer for many data scientists</p>
<p>Learn about it… and use it always,
by default:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>dtIris <span class="ot">&lt;-</span> <span class="fu">data.table</span>(iris) <span class="co"># or</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> iris; dtIris <span class="ot">&lt;-</span> <span class="fu">setDT</span>(df)</span></code></pre></div>
<p>Where to learn:</p>
<ul>
<li><p><a href="https://github.com/Rdatatable/data.table" class="uri">https://github.com/Rdatatable/data.table</a></p></li>
<li><p><a href="https://github.com/chuvanan/rdatatable-cookbook" class="uri">https://github.com/chuvanan/rdatatable-cookbook</a></p></li>
<li><p><a href="http://r-datatable.com" class="uri">http://r-datatable.com</a> (<a href="https://rdatatable.gitlab.io/data.table/" class="uri">https://rdatatable.gitlab.io/data.table/</a>)</p></li>
<li><p><a href="https://www.datacamp.com/courses/time-series-with-datatable-in-r" class="uri">https://www.datacamp.com/courses/time-series-with-datatable-in-r</a></p></li>
<li><p><a href="https://www.datacamp.com/courses/data-manipulation-in-r-with-datatable" class="uri">https://www.datacamp.com/courses/data-manipulation-in-r-with-datatable</a></p></li>
<li><p><a href="https://github.com/Rdatatable/data.table/wiki/Articles" class="uri">https://github.com/Rdatatable/data.table/wiki/Articles</a></p></li>
<li><p><a href="https://rpubs.com/josemz/SDbf" class="uri">https://rpubs.com/josemz/SDbf</a> - Making .SD your best friend</p></li>
</ul>
<div id="data.table-vs.-dplyr" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> data.table vs. dplyr</h2>
<p>data.table (Computer language) way vs. dplyr (“English language”) way</p>
<ol style="list-style-type: upper-alpha">
<li>The best: No wasted computations .No new memory allocations.
dtLocations %&gt;% .[WLOC == 4313, WLOC:=4312]</li>
<li>No new memory allocations, but computations are done with ALL rows.
dtLocations %&gt;% .[, WLOC:=ifelse(WLOC==4313, 4312, WLOC)]</li>
<li>The worst: Computations are done with ALL rows. Furthermore, the entire data is copied from one memory location to another. (Imagine if your data as in 1 million of cells, of which only 10 needs to be changed !)
dtLocations &lt;- dtLocations %&gt;% mutate(WLOC=ifelse(WLOC==4313, 4312, WLOC))
NB: dtLocations %&gt;% . [] is the same as dtLocations[]. so you can use it in pipes.</li>
</ol>
<!-- Conclusion: Use data.table for speed and efficient coding instead of dplyr (i.e.tibbles)! -->
<!-- Comment  -->
<!-- je côtoie de nombreux scientifiques en environnement qui sont nouveaux dans le monde de la programmation et qui n'ont pas un gros volume de données. Pour eux, dplyr est plus « accessible » que data.table. -->
<!-- Un jour, ils y viendront peut-être, mais en attendant, je vais continuer à enseigner les rudiments de R en proposant dplyr et en leur parlant brièvement du package data.table. -->
</div>
<div id="extensions-of-data.table" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Extensions of data.table</h2>
<p>There’s considerable effort to marry data.table package with dplyr package. Here are notable ones:</p>
<ul>
<li><a href="https://github.com/tidyverse/dtplyr" class="uri">https://github.com/tidyverse/dtplyr</a> (Version: 1.1.0, Published: 2021-02-20, From Hadley himself - I found it quite cumbersome still though…)</li>
<li><a href="https://github.com/asardaes/table.express" class="uri">https://github.com/asardaes/table.express</a> (Version: 0.3.1 Published: 2019-09-07 - somewhat easier?)</li>
<li><a href="https://github.com/markfairbanks/tidytable" class="uri">https://github.com/markfairbanks/tidytable</a> (Version: 0.6.2 Published: 2021-05-18 - seems to be the best supported of the three?)</li>
</ul>
</div>
</div>
<div id="python-and-r-unite" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Python and R unite!</h1>
<p>Check out our latest Lunch and Learn Meetup :
‘Lunch and Learn’ Meetup: Dual Coding - Python and R unite! : GCcollab</p>
<p>It shows how to Execute R from Python and Vice Versa, inspired by this blog: this <a href="https://www.kdnuggets.com/2015/10/integrating-python-r-executing-part2.html" class="uri">https://www.kdnuggets.com/2015/10/integrating-python-r-executing-part2.html</a></p>
<p>The used code is available from GCCode: <a href="https://gccode.ssc-spc.gc.ca/r4gc/resources/howto" class="uri">https://gccode.ssc-spc.gc.ca/r4gc/resources/howto</a></p>
</div>
<div id="from-excel-to-r" class="section level1" number="9">
<h1><span class="header-section-number">9</span> From Excel to R</h1>
<p>There was a keen interest expressed at last Friday meetup on transitioning from Excel to R. Incidentally, there was an RStudio Community Meet-up focused exactly on this topic: Meetup: Making the Shift from Excel to R: Perspectives from the back-office</p>
<!-- ## 1 -->
<p>Many Q&amp;A from this meetup are posted here:</p>
<p><a href="https://community.rstudio.com/t/meetup-making-the-shift-from-excel-to-r-perspectives-from-the-back-office/100467" class="uri">https://community.rstudio.com/t/meetup-making-the-shift-from-excel-to-r-perspectives-from-the-back-office/100467</a></p>
<p>Below are listed some. There’s also a link to a video-recording of it! (at link above)</p>
<pre><code>What was the most common problem when moving from Excel to R? [Excel -&gt; R Meetup Q&amp;A]
R Markdown vs R Scripts in Enterprise Workflows [Excel -&gt; R Meetup Q&amp;A]
What sort of packages did you use for reconciliation? [Excel -&gt; R Meetup Q&amp;A]
What is the best way to share the results of an analysis that you’ve made in R? [Excel -&gt; R Meetup Q&amp;A]
How do you get buy-in transitioning from Excel to R? [Excel -&gt; R Meetup Q&amp;A]
How do you get buy-in from the IT team around R package security concerns? [Excel -&gt; R Meetup Q&amp;A]
How do you move data from tricky worksheets into R? [Excel -&gt; R Meetup Q&amp;A]
With so many ways of doing the same things, how do you find the best way to do something? [Excel -&gt; R Meetup Q&amp;A]</code></pre>
<!-- ## 2 -->
<p>This dictionary of Excel/R equivalent was very useful is finding a starting point for common functions:<br />
<a href="https://paulvanderlaken.com/2018/07/31/transitioning-from-excel-to-r-dictionary-of-common-functions/" class="uri">https://paulvanderlaken.com/2018/07/31/transitioning-from-excel-to-r-dictionary-of-common-functions/</a></p>
<p>For people who are looking for something more comprehensive, this website is very useful:<br />
<a href="https://rstudio-conf-2020.github.io/r-for-excel/" class="uri">https://rstudio-conf-2020.github.io/r-for-excel/</a></p>
<!-- ## 3 -->
<p>Pour ma part, j’adhère à l’approche proposée par The <a href="https://datacarpentry.org/spreadsheet-ecology-lesson/00-intro/index.html">Carpentries</a>, soit l’utilisation d’Excel pour la saisie de données et une partie du contrôle de la qualité. Par la suite, les données sont exportées en csv pour être importées dans R.</p>
</div>
<div id="reading-various-kinds-of-data-in-r" class="section level1" number="10">
<h1><span class="header-section-number">10</span> Reading various kinds of data in R</h1>
<p>There are many kinds of data you want to read - and you want to them efficiently (i.e. , automatically and fast):</p>
<ul>
<li><p>badly formatted data,</p></li>
<li><p>sparse data,</p></li>
<li><p>distributed “big” data</p></li>
<li><p>just very large and very very large</p></li>
<li><p>MS excel, MS Words</p></li>
<li><p>from clouds: AWS, MS Azure etc</p></li>
<li><p>pdf, html</p></li>
<li><p>zip files</p></li>
<li><p>google docs, google sheets</p></li>
<li><p>GCdocs and from other GC platforms (that was one of the questions at our Friday’s R meetup), and,</p></li>
<li><p>from web pre-formated</p></li>
<li><p>other IoT and web-crawling</p></li>
</ul>
<div id="fread" class="section level4" number="10.0.0.1">
<h4><span class="header-section-number">10.0.0.1</span> fread</h4>
<p>Our favourite methods for reading / writing “regular” .csv files has been ‘data.table::fread() and fwrite()’ - the fastest and automated in many ways.</p>
</div>
<div id="vroom" class="section level4" number="10.0.0.2">
<h4><span class="header-section-number">10.0.0.2</span> vroom</h4>
<p>Now there’s another one - with package ‘vroom’ - <a href="https://cran.r-project.org/web/packages/vroom/vignettes/benchmarks.html" class="uri">https://cran.r-project.org/web/packages/vroom/vignettes/benchmarks.html</a></p>
</div>
<div id="rio" class="section level3" number="10.0.1">
<h3><span class="header-section-number">10.0.1</span> rio</h3>
<pre><code>library(rio)
install_formats()</code></pre>
<p>See: <a href="https://www.computerworld.com/article/2497164/business-intelligence-beginner-s-guide-to-r-get-your-data-into-r.html" class="uri">https://www.computerworld.com/article/2497164/business-intelligence-beginner-s-guide-to-r-get-your-data-into-r.html</a></p>
</div>
<div id="readxl-and-xlsx" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> readxl and xlsx</h2>
<p>For reading Excel files, you can use readxl.
You would like to be able to import a set of columns formed by non-contiguous columns of a sheet (something possible to select in the newer versions of Excel using data queries).</p>
<p>For writing Excel files, you can use xlsx, espcially, if you need to be able to write multiple sheets in a file.</p>
</div>
<div id="discussion" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> Discussion</h2>
<p>The analyst should, actually, never stick to one solution but rather adapt to the needs of the project. For every format that is good and efficient with big data, you gain either 1) get manipulation overhead that does not make sense when manipulating small datasets, and they can end up slower than even dataframes in that case on small data but hundreds of times faster in big data (e.g. feather), or 2) need to wait forever and lose storage space for nothing (parquet) if the data is not big enough. Yet, if you found the right solution for every size and need, it will make a world of difference.</p>
<p>…</p>
<p>The example below does a comparison of some popular formats when used with Pandas (Python). You will get similar results in R</p>
<p><a href="https://towardsdatascience.com/the-best-format-to-save-pandas-data-414dca023e0d" class="uri">https://towardsdatascience.com/the-best-format-to-save-pandas-data-414dca023e0d</a></p>
<p>…</p>
<p>One of the options, if your are only playing locally and not in the cloud, is using the ‘feather’ format with ‘sql.’</p>
<p>If you need to extract data from a database and do more advanced data engineering without loading data in your RAM, you need SQL to prepare the extraction and do basic to advanced manipulation (SQL is Turing-complete, eh).</p>
<p>For more advanced and permanent transformations to the data, you need stored procedures (SQL again).</p>
<p></p>
<p>And if you play in the cloud, this is even more essential. For example, in AWS, you can create user-defined functions in Redshift using Python and Postgres SQL, but not R. All manipulation needs to be done in SQL, and Python can be used for other purposes such as calculations and fuzzy matching.</p>
<p>You can still use R in the rebranded Jupyter notebooks (Sagemaker in AWS, Azure Notebooks in Azure), but R is not as widely compatible in other cloud applications as SQL and Python. - [ PD: But you can absolutely use R in AWS for ETL. In fact you could even set up API endpoints via plumbr, there’s a whole AWS tutorial that deals with this issue]</p>
<p>References:</p>
<p><a href="https://github.com/pingles/redshift-r/" class="uri">https://github.com/pingles/redshift-r/</a>
Provides a few functions to make it easier to access Amazon’s Redshift service from R.</p>
<p><a href="http://www.rforge.net/RJDBC/index.html" class="uri">http://www.rforge.net/RJDBC/index.html</a>
install.packages(“RJDBC”,dep=TRUE) 
RJDBC is a package implementing DBI in R on the basis of JDBC. This allows the use of any DBMS in R through the JDBC interface. The only requirement is working Java and a JDBC driver for the database engine to be accessed.
feather (for larger than gigb):
<a href="https://blog.rstudio.com/2016/03/29/feather/" class="uri">https://blog.rstudio.com/2016/03/29/feather/</a></p>
<p>parquet ( for verrrrry large files)
<a href="https://campus.datacamp.com/courses/introduction-to-spark-with-sparklyr-in-r/case-study-learning-to-be-a-machine-running-machine-learning-models-on-spark?ex=4" class="uri">https://campus.datacamp.com/courses/introduction-to-spark-with-sparklyr-in-r/case-study-learning-to-be-a-machine-running-machine-learning-models-on-spark?ex=4</a></p>
<p>Conclusions: As a side note on size, speed, and performance : it all depends on what you do, the delays, and the cost.</p>
<p>For example, if you use the cloud:</p>
<ul>
<li><pre><code>   If your data is going to be queried very often, so you have large volumes of data that would be scanned, move your processing to a runtime-billed tool (e.g. Redshift in AWS) rather than a data-billed tool (e.g. Athena in AWS). Otherwise, your cost may increase exponentially if users can survey data freely from, say, Tableau dashboards without caring for the actual amount of data that is queried. So if the data is queried 24/24h, your cost is stable and won’t increase with volume.</code></pre></li>
<li><pre><code>   If you may scan large volumes once or twice a day, then you would have to compare the costing options.</code></pre></li>
<li><pre><code>   If the costing model is incremental by runtime and you have very large amounts of data that you need to query quickly, then it would be best to use columnar formatted tables such as parquet. There is a cost and delay involved for the conversion, and you need much more storage because of the flattened structure, so storage will be more expensive (especially considering that you clone your original data and use at least twice the space then). However, queries will fly, and the cost of computation will be much smaller thereafter.</code></pre></li>
<li><pre><code>   For occasional queries, a data-billed tool would likely be the best option.</code></pre></li>
</ul>
<p>If you want to prototype with small datasets, do not lose time with parquet… CSV is the worst format after Excel files (which need to be unpacked and repacked), in any scenario, but the time investment in time to convert data is not worth it at all. Data.table and DT will be your best friends in R.</p>
<p>As for using SQL vs packages such as DPLYR, I mentioned a gain in performance, but be careful. If you use raw SQL, then you will see a big gain in performance. However, there are packages out there that translate SQL to R or Python interpretable code, and those will possibly be slower due to the interpretation layer. DPLYR, on the other hand, is quite efficient and well optimized. As usual, it depends on the packages. In R, the sqldf package should be good, if you want to try it out.</p>
</div>
</div>
<div id="other-tips-for-efficient-coding-in-r" class="section level1" number="11">
<h1><span class="header-section-number">11</span> Other tips for Efficient coding in R</h1>
<!-- (coding style, memory-efficient coding, collaboration-ready codes, source control) -->
<!-- TBA -->
<!-- ## Debugging tricks -->
<!-- TBA -->
<div id="variable-names" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> Variable names !</h2>
<p>Variable names need to help you every time you see them!</p>
<p>Examples:</p>
<div id="code-formating" class="section level3" number="11.1.1">
<h3><span class="header-section-number">11.1.1</span> Code formating</h3>
<p>Install ‘slyler’ package to have RStudio addin to automate formatting your code</p>
</div>
</div>
<div id="code-starter-tricks" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> Code starter tricks</h2>
<div id="most-important-useful-libraries" class="section level3" number="11.2.1">
<h3><span class="header-section-number">11.2.1</span> Most important / useful libraries</h3>
<p>These are libraries / codes that one could use by default when starting a new code.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. General libraries and functions ----</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># options(digits = 3); # 7</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># options(max.print = 100) # 1000</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># options(scipen=999); #remove scientific notation</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># library(readxl)</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co"># library(readr)</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co"># library(stringr)</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="do">## library(tidyverse) # includes:  readr ggplot2 stringr (which we use), dplyr tidyr tibble forcats purrr (may use later) and others - https://www.tidyverse.org/packages/</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co"># library(dplyr) # or</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co">#library(dtplyr)</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co"># library(ggplot2) </span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="co"># library(lubridate,  quietly=T) # to work work times and dates</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co"># options(lubridate.week.start =  1)</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table) <span class="co"># needs to be AFTER lubridate</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">datatable.print.class=</span><span class="cn">TRUE</span>)</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="co"># library(dygraphs)</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="co"># library(plotly)</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="co"># library(DT)</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">%ni%</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">Negate</span>(<span class="st">`</span><span class="at">%in%</span><span class="st">`</span>)</span></code></pre></div>
</div>
</div>
<div id="efficient-workflows" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> Efficient workflows</h2>
<!-- Commonly, there are two possible  -->
<div id="workflow-data-first-approach" class="section level3" number="11.3.1">
<h3><span class="header-section-number">11.3.1</span> Workflow: Data-first approach</h3>
<!-- ### Starting with new Data set -->
<p>So, you found a new
<!-- previously not seen  -->
Open Data
dataset. Great - now you can do something with it! This is how you start .</p>
</div>
<div id="workflow-taskneedsalgorithm-first-approach" class="section level3" number="11.3.2">
<h3><span class="header-section-number">11.3.2</span> Workflow: Task/needs/algorithm-first approach</h3>
<p>TBA</p>
</div>
</div>
<div id="object-oriented-programming-in-r" class="section level2" number="11.4">
<h2><span class="header-section-number">11.4</span> Object oriented programming in R</h2>
<p><a href="https://techvidvan.com/tutorials/r-object-oriented-programming/" class="uri">https://techvidvan.com/tutorials/r-object-oriented-programming/</a></p>
<div id="s3" class="section level3" number="11.4.1">
<h3><span class="header-section-number">11.4.1</span> S3</h3>
</div>
<div id="r6" class="section level3" number="11.4.2">
<h3><span class="header-section-number">11.4.2</span> R6</h3>
</div>
</div>
<div id="rstudio-tricks" class="section level2" number="11.5">
<h2><span class="header-section-number">11.5</span> RStudio tricks</h2>
<div id="coding-online" class="section level3" number="11.5.1">
<h3><span class="header-section-number">11.5.1</span> Coding online</h3>
<p>Platforms for coding R online<br />
<!-- a) https://rextester.com/l/r_online_compiler -->
<!-- b) https://repl.it/languages/rlang (no login required) -->
<a href="https://rstudio.cloud/" class="uri">https://rstudio.cloud/</a> (login required) - All in One place for learning and coding</p>
<div id="running-multiple-rstudio-versions" class="section level4" number="11.5.1.1">
<h4><span class="header-section-number">11.5.1.1</span> Running multiple RStudio versions</h4>
<p>You want to be able to run multiple versions of RStudio in Windows? You can do with the following executable .bat script.</p>
<pre><code># Run-RStudio-1.4.bat

@echo off
title Starting RStudio!
echo Hello Dear,
echo Starting RStudio 1.4 (from C:\Users\gxd006\Downloads\RStudio-1.4.1106\bin\) for you...

C:\Users\abc123\Downloads\RStudio-1.4.1106\bin\rstudio.exe

Set WshShell = CreateObject(&quot;WScript.Shell&quot;)
WshShell.Run chr(34) &amp; &quot;C:\Users\gxd006\Downloads&quot; &amp; chr(34), 0
Set WshShell = Nothing
</code></pre>
</div>
</div>
</div>
</div>
<div id="using-r-with-gc-data-infastructure-gcdocs-aws-etc" class="section level1" number="12">
<h1><span class="header-section-number">12</span> Using R with GC data infastructure (gcdocs, AWS, etc)</h1>
<div id="gcdocs" class="section level2" number="12.1">
<h2><span class="header-section-number">12.1</span> gcdocs</h2>
<p>Q:</p>
<p>I’m wondering if anyone has had any success accessing data from GCDocs in your respective departments ? I believe that GCDocs is implemented across most (if not all) departments so wondering if there are any existing solutions to read/write data from it.</p>
<p>Also wondering about whether any of you have had any luck accessing Microsoft 365 via R as well? I’ve had success with Microsoft365R package (<a href="https://github.com/Azure/Microsoft365R" class="uri">https://github.com/Azure/Microsoft365R</a>) from a personal point of view but it doesn’t play well with business accounts.</p>
<!-- A: -->
<!--   I tried using the Microsoft365R package to access my departmental (ECCC) email without success. When I tried to access it, a window popped up allowing me to request access authorization so I clicked the "Submit" (or whatever) button. That was weeks ago. Never heard anything more about it. -->
<!-- After trying many ways and weeks, I found this is NOT possible. -  It runs internal code on gcdoc end  that validates that you have right to access it and then, if you do, it also logs your action within the document's "Audit" attribute.  -->
<!-- So we still have to always make a local copy of the data (manually!), and only then we can process it from R. -->
</div>
</div>
<div id="part-visualization-and-reporting" class="section level1 unnumbered">
<h1 class="unnumbered">(PART) Visualization and Reporting</h1>
</div>
<div id="r-markdown-for-literate-programming-and-automated-reports" class="section level1" number="13">
<h1><span class="header-section-number">13</span> R Markdown for literate programming and automated reports</h1>
<p>This discussion thread is for gathering knowledgebase related to R Markdown: <a href="https://rmarkdown.rstudio.com/" class="uri">https://rmarkdown.rstudio.com/</a></p>
<p>It can be used to generate reports, slides, websites, dashboards, shiny app, books, emails.
It is the tools allows you to do <a href="https://en.wikipedia.org/wiki/Literate_programming">literate programming</a>, which – as defined by Donald Knuth - is the type of programming where human language is combined with computer language, making the code much easier understood by your colleagues and yourself and coding much more fun.</p>
<div id="resources" class="section level2" number="13.1">
<h2><span class="header-section-number">13.1</span> Resources</h2>
<p>Main reference: <a href="https://bookdown.org/yihui/rmarkdown/" class="uri">https://bookdown.org/yihui/rmarkdown/</a></p>
<p>A couple of great webinars from RStudio folks on advanced use of R Markdown - with lots of source codes:</p>
<ul>
<li><a href="https://www.rstudio.com/resources/webinars/rethink-reporting-with-automation/" class="uri">https://www.rstudio.com/resources/webinars/rethink-reporting-with-automation/</a></li>
<li><a href="https://www.rstudio.com/resources/webinars/sharing-on-short-notice-how-to-get-your-materials-online-with-r-markdown/" class="uri">https://www.rstudio.com/resources/webinars/sharing-on-short-notice-how-to-get-your-materials-online-with-r-markdown/</a></li>
</ul>
<p>Business Reports with R Markdown:
<a href="https://github.com/cderv/meetup-2021-rmd-business-report" class="uri">https://github.com/cderv/meetup-2021-rmd-business-report</a></p>
<p>R Markdown Taxonomy:
<a href="https://github.com/jthomasmock/penguin-project" class="uri">https://github.com/jthomasmock/penguin-project</a></p>
</div>
<div id="automated-generation-of-multiple-pdf-files" class="section level2" number="13.2">
<h2><span class="header-section-number">13.2</span> Automated generation of multiple PDF files</h2>
<p>Question:
“Can we automatically generate multiple PDF files using R RMarkdown? E.g. 20 report cards in PDF format, each showing results for 50 different parameters of the analysis?”</p>
<p>Answer: “Absolutely!” - This is what RMarkdown is developed for.</p>
<p>Here’s a tiny R script example showing how to do it.</p>
<pre><code># report_generator.R

mvndr_nm &lt;- c(&#39;name1&#39;, &#39;name2&#39;, &#39;name3&#39;, &#39;name4&#39;, &#39;name5&#39;, &#39;name6&#39;)
mvndr_nbr&lt;- c(&#39;60031167&#39;, &#39;60688509&#39;, &#39;60074051&#39;, &#39;60148060&#39;, &#39;60086898&#39;, &#39;60080204&#39;)

for (i in seq_along(mvndr_nm)) {
  rmarkdown::render(&quot;C:/Users/santi/Documents/R Scripts/Export_Data_CSV.Rmd&quot;,
                    output_file = sprintf(&quot;MVNDR_%s.html&quot;, mvndr_nbr[i]),
                    params = list(MVNDR_NBR = mvndr_nbr[i], MVNDR_NM = mvndr_nm[i]))
}

# Export_Data_CSV.Rmd
# (remove # and REMOVETHIS_ and replace \&#39; with \` below)


# - - -
# REMOVETHIS_title: &quot;&#39;r REMOVETHIS_params$MVNDR_NBR&#39;&quot;
# output:  html_document:
# REMOVETHIS_params:
#   MVNDR_NBR: NA
#   MVNDR_NM: NA
# - - -

This document  provides a summary of &quot;&#39; r REMOVETHIS_params$MVNDR_NM&#39;&quot; performance within in QC</code></pre>
<p>Source:
- <a href="https://stackoverflow.com/questions/67739377/passing-multiple-parameters-in-rmarkdown-document" class="uri">https://stackoverflow.com/questions/67739377/passing-multiple-parameters-in-rmarkdown-document</a>
- <a href="https://stackoverflow.com/questions/60203785/using-multiple-params-in-rmarkdown-yaml-fields" class="uri">https://stackoverflow.com/questions/60203785/using-multiple-params-in-rmarkdown-yaml-fields</a></p>
</div>
<div id="useful-tricks-and-tips" class="section level2" number="13.3">
<h2><span class="header-section-number">13.3</span> Useful tricks and tips</h2>
<div id="in-rstudio-editor" class="section level3" number="13.3.1">
<h3><span class="header-section-number">13.3.1</span> In RStudio editor</h3>
<p>In Tools -&gt; Global Options… -&gt; R Markdown</p>
<ul>
<li>Choose “Show in Document outline: BOTH Sections and Chunks.</li>
<li>Uncheck “Show output inline”, so you can see it Console as you normally do when running from .R file</li>
</ul>
<p>In Tools -&gt;Global Options… -&gt; Pane Layout and Appearance,
- you can add additional Pan (starting from RStudio 1.2)
- We like it having Console window on left (to see more!)
- Some also like dark theme (eg. “Vibrant ink” diplays comments well, others do not)</p>
</div>
<div id="spliting-rmd-in-chunks" class="section level3" number="13.3.2">
<h3><span class="header-section-number">13.3.2</span> Spliting Rmd in chunks</h3>
<ul>
<li>Split your long Rmd into small ones!</li>
<li>Give them names - sorted / tagged by order and keywords</li>
<li>For debugging or simplify your work use <code>knitr::knit_exit()</code> r code.</li>
<li>Use (PART) and {-} when you need to split in part and not to index the page</li>
</ul>
<p>See index.Rmd of this book. Below is excerpt from them</p>
<pre><code>  # (PART) Community Codes {-}
  ` ` `{r 21_gc_datasets, child = &#39;21_gc_datasets.Rmd&#39;}
  ` ` `
  ...

  # (APPENDIX) Appendices {-}
  ` ` `{r 40_ca_packages, child = &#39;40_ca_packages.Rmd&#39;}
  ` ` `
  ...

  ` ` `{r include=FALSE}
  knitr::knit_exit() # Stop compiling here
  ` ` `
  ...
  
  ` ` `{r 99_some_notready_parts, child = &#39;99_some_notready_parts.Rmd&#39;}
  ` ` `
  ...</code></pre>
</div>
<div id="making-good-use-of-configuration-yaml-header-in-index.rmd-file" class="section level3" number="13.3.3">
<h3><span class="header-section-number">13.3.3</span> Making good use of configuration yaml header in index.Rmd file</h3>
<p>See index.Rmd of this book and the other (forked) books in <a href="https://github.com/open-canada/" class="uri">https://github.com/open-canada/</a></p>
</div>
<div id="conditional-execution-of-chunks" class="section level3" number="13.3.4">
<h3><span class="header-section-number">13.3.4</span> Conditional execution of chunks</h3>
<div id="from-smltar-book" class="section level4" number="13.3.4.1">
<h4><span class="header-section-number">13.3.4.1</span> From smltar book</h4>
<p>Excerpt from <a href="https://github.com/open-canada/smltar/blob/master/index.Rmd" class="uri">https://github.com/open-canada/smltar/blob/master/index.Rmd</a></p>
</div>
</div>
</div>
</div>
<div id="welcome-to-supervised-machine-learning-for-text-analysis-in-r" class="section level1 unnumbered">
<h1 class="unnumbered">Welcome to Supervised Machine Learning for Text Analysis in R</h1>
<p>This is the <a href="https://smltar.com/">website</a> for <em>Supervised Machine Learning for Text Analysis in R</em>! Visit the <a href="https://github.com/EmilHvitfeldt/smltar">GitHub repository for this site</a>, or buy a physical copy from <a href="https://doi.org/10.1201/9781003093459">CRC Press</a>, <a href="https://bookshop.org/books/supervised-machine-learning-for-text-analysis-in-r-9780367554194/9780367554194">Bookshop.org</a>, or <a href="https://amzn.to/3DaHzjF">Amazon</a>.
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />This online work by <a href="https://www.hvitfeldt.me/">Emil Hvitfeldt</a> and <a href="http://juliasilge.com/">Julia Silge</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</p>
<div id="from-geocompr" class="section level4" number="13.3.4.2">
<h4><span class="header-section-number">13.3.4.2</span> From geocompr</h4>
<p>From <a href="https://github.com/open-canada/geocompr/blob/main/index.Rmd" class="uri">https://github.com/open-canada/geocompr/blob/main/index.Rmd</a>.</p>
<p>First you do this:</p>
<pre><code>
``{r index-1, echo=FALSE}
is_html = knitr::is_html_output()
``</code></pre>
<p>Then this:</p>
<pre><code>``{asis index-2, echo=is_html}
This is the online version of The R4GC Book.
``</code></pre>
</div>
<div id="with-shiny-in-flexdashboard" class="section level4" number="13.3.4.3">
<h4><span class="header-section-number">13.3.4.3</span> With Shiny in flexdashboard</h4>
<p>You can also use it when you (don’t) want to run a Shiny code. See Chapter on [Shiny]</p>
</div>
<div id="automated-compilation-of-rmd-files-in-github-using-github-actions" class="section level3" number="13.3.5">
<h3><span class="header-section-number">13.3.5</span> Automated compilation of Rmd files in GitHub using GitHub Actions</h3>
<p>See how this is done here: <a href="https://github.com/open-canada/geocompr/tree/main/.github/workflows" class="uri">https://github.com/open-canada/geocompr/tree/main/.github/workflows</a></p>
<p>The <code>main.yaml</code> script compiles the source (located in <a href="https://github.com/open-canada/geocompr" class="uri">https://github.com/open-canada/geocompr</a>) into a bookdown book (located in
<a href="https://github.com/open-canada/geocompr/tree/gh-pages" class="uri">https://github.com/open-canada/geocompr/tree/gh-pages</a> and viewable at <a href="https://open-canada.github.io/geocompr/" class="uri">https://open-canada.github.io/geocompr/</a>)</p>
<!-- # (PART) Specialized topics {.unnumbered} -->
<!-- (and other languages/tools) -->
</div>
</div>
<div id="ggplot2-and-its-extensions-for-data-visualization" class="section level1" number="14">
<h1><span class="header-section-number">14</span> ggplot2 and its extensions for data visualization</h1>
<p>Many come to R (from Python and other languages/ systems) mainly because of the advanced data visualization capabilities it offers. There are many of those, as are the resources. Share your recommendations and examples here.</p>
<div id="resources-1" class="section level2" number="14.1">
<h2><span class="header-section-number">14.1</span> Resources</h2>
<p>See: <a href="https://github.com/IVI-M/R-Ottawa/blob/master/resources.md" class="uri">https://github.com/IVI-M/R-Ottawa/blob/master/resources.md</a></p>
<p>Introduction to ggplot2</p>
<p>How to customize ggplot2</p>
<p>Top 50 ggplot2 visualizations</p>
<p>ggplot2 quick reference sheet</p>
<p>ggplot2 quick reference for colour names</p>
<p>Modifying components of theme() in ggplot2</p>
<p>Colours in ggplot2, including colour-blind friendly palette</p>
<p>Package for colour manipulation, including visualizing the effects of colour-blindness on colour palettes. <a href="https://cran.r-project.org/package=prismatic" class="uri">https://cran.r-project.org/package=prismatic</a></p>
<p>Dmitry Gorodnichy’s avatar
By Dmitry Gorodnichy 2021-04-08 22:15Edit the discussion reply by Dmitry GorodnichyDelete the discussion reply by Dmitry GorodnichyLike the discussion reply by Dmitry Gorodnichy
bookdown.org books on advanced visualization with ggplot and its extensions</p>
<p><a href="https://serialmentor.com/dataviz/" class="uri">https://serialmentor.com/dataviz/</a> - <a href="https://github.com/clauswilke/dataviz" class="uri">https://github.com/clauswilke/dataviz</a>.
Fundamentals of Data Visualization. Claus O. Wilke
<a href="https://github.com/jjallaire/dataviz-r" class="uri">https://github.com/jjallaire/dataviz-r</a></p>
<p>OpenSDP Dataviz Tutorial (R)</p>
<div id="plotly-r-shiny" class="section level3" number="14.1.1">
<h3><span class="header-section-number">14.1.1</span> Plotly + R Shiny</h3>
<p><a href="https://socviz.co/" class="uri">https://socviz.co/</a> -
Data Visualization. A practical introduction
<a href="https://r-graphics.org/" class="uri">https://r-graphics.org/</a>
R Graphics Cookbook, 2nd edition. Winston Chang. 2019-12-19
with Plotly in R</p>
<p>Intro to Animations | R | Plotly - <a href="https://plotly.com/r/animations/" class="uri">https://plotly.com/r/animations/</a>
<a href="https://plotly-r.com/index.html" class="uri">https://plotly-r.com/index.html</a>
<a href="https://plot.ly/r/animations/" class="uri">https://plot.ly/r/animations/</a></p>
</div>
</div>
</div>
<div id="shiny-for-interactive-data-visualization-analysis-and-web-app-development" class="section level1" number="15">
<h1><span class="header-section-number">15</span> Shiny for Interactive Data Visualization, Analysis and Web App development</h1>
<p>This discussion thread is dedicated to Shiny package - a RStudio-curated tool for developing and deploying Interactive Data Visualization and Analysis tools and applications.</p>
<div id="resources-2" class="section level2" number="15.1">
<h2><span class="header-section-number">15.1</span> Resources</h2>
<p>Kick start to Shiny - <a href="https://www.datacamp.com/courses/building-web-applications-in-r-with-shiny" class="uri">https://www.datacamp.com/courses/building-web-applications-in-r-with-shiny</a></p>
<p>See also:</p>
<p>Shiny - Gallery (rstudio.com) - <a href="https://shiny.rstudio.com/gallery/" class="uri">https://shiny.rstudio.com/gallery/</a>
<a href="https://engineering-shiny.org/" class="uri">https://engineering-shiny.org/</a></p>
</div>
</div>
<div id="interactive-outputs-in-r-plotly-datatable-reactable" class="section level1" number="16">
<h1><span class="header-section-number">16</span> Interactive Outputs in R: plotly, Datatable, reactable</h1>
<p>This discussion is dedicated to tools to generate interactive graphs, tables, and other content without Shiny (which, as you know, requires a server to host your Shiny application and which for this reason cannot be easily shared with your clients, e.g. by email)</p>
<p>Here are the most popular ones:</p>
<p><a href="https://rstudio.github.io/DT/" class="uri">https://rstudio.github.io/DT/</a><br />
<a href="https://plotly.com/r/" class="uri">https://plotly.com/r/</a> and<br />
<a href="https://glin.github.io/reactable" class="uri">https://glin.github.io/reactable</a></p>
<div id="reactable" class="section level2" number="16.1">
<h2><span class="header-section-number">16.1</span> <code>reactable</code></h2>
<!-- Your clients will love it -  -->
<p>Check what kind of interactive coloured tables you can make with it:
<!-- - it's like a coloured table inside your R generated report): -->
<a href="https://glin.github.io/reactable/articles/womens-world-cup/womens-world-cup.html" class="uri">https://glin.github.io/reactable/articles/womens-world-cup/womens-world-cup.html</a></p>
</div>
</div>
<div id="geospatial-coding-and-visualization-in-r" class="section level1" number="17">
<h1><span class="header-section-number">17</span> Geo/Spatial coding and visualization in R</h1>
<div id="resources-3" class="section level2" number="17.1">
<h2><span class="header-section-number">17.1</span> Resources</h2>
<p>There’s much effort across many GC departments to analyze and visualize geo-data. This discussion is the place to share your results, ideas or problems related to the problem.</p>
<p>Below is a great resource to start, which also provides a nice explanation on why R is believed to be the best language to do this kind of work.</p>
<p>Geocomputation with R, a book on geographic data analysis, visualization and modeling.</p>
<p>The online version of the book is hosted at <a href="https://geocompr.robinlovelace.net" class="uri">https://geocompr.robinlovelace.net</a> and kept up-to-date by GitHub Actions</p>
</div>
<div id="federal-geospatial-platform" class="section level2" number="17.2">
<h2><span class="header-section-number">17.2</span> Federal Geospatial Platform</h2>
<p>From <a href="https://gcconnex.gc.ca/discussion/view/84695812/data-federation-federation-des-donnees" class="uri">https://gcconnex.gc.ca/discussion/view/84695812/data-federation-federation-des-donnees</a></p>
<p>Yukon’s open geospatial data is now searchable on the Federal Geospatial Platform (FGP) (<a href="https://gcgeo.gc.ca/" class="uri">https://gcgeo.gc.ca/</a>) and on Government of Canada Open Maps Portal. Check it out !</p>
<p>With the addition of Yukon’s resources, the FGP now offers over 5,000 datasets available to discover and download, for public servants and Canadians, all in one location.</p>
<p>Wondering how to create a map with your data? We can help you do so, from A to Z, at no cost. Contact us at <a href="mailto:nrcan.geoinfo.rncan@canada.ca" class="email">nrcan.geoinfo.rncan@canada.ca</a></p>
</div>
<div id="tutorials" class="section level2" number="17.3">
<h2><span class="header-section-number">17.3</span> Tutorials</h2>
<p>Check codes and notes for the two Tutorials that we had on this subject this summer:</p>
<p><a href="https://gccode.ssc-spc.gc.ca/r4gc/resources/introSpatialAnalysis" class="uri">https://gccode.ssc-spc.gc.ca/r4gc/resources/introSpatialAnalysis</a></p>
</div>
<div id="dealing-with-memory-issues" class="section level2" number="17.4">
<h2><span class="header-section-number">17.4</span> Dealing with memory issues</h2>
<p>A blog post that illustrates a few ways to avoid overloading R’s memory when working with large spatial objects (here’s looking at you, 30-m land cover map of North America!).</p>
<p><a href="https://www.ecologi.st/post/big-spatial-data/" class="uri">https://www.ecologi.st/post/big-spatial-data/</a></p>
<p>The two other posts on that blog also have some really nice tips for general R coding.</p>
</div>
<div id="canadian-geo-data" class="section level2" number="17.5">
<h2><span class="header-section-number">17.5</span> Canadian geo-data</h2>
<p>Useful code and R packages from public domain to work with Canadian geo-data.</p>
<p>From <a href="https://mountainmath.ca" class="uri">https://mountainmath.ca</a>
- <a href="https://github.com/mountainMath/mountainmathHelpers" class="uri">https://github.com/mountainMath/mountainmathHelpers</a>
- tongfen: Convenience functions for making data on different geometries, especially Canadian census geometries, comparable.
- cancensus : R wrapper for calling CensusMapper APIs
- cansim: Wrapper to access CANSIM data
- CanCovidData: Collection of data import and processing functions focused on Canadian data</p>
</div>
<div id="code-snippets" class="section level2" number="17.6">
<h2><span class="header-section-number">17.6</span> Code snippets</h2>
<div id="using-simplemaps.com" class="section level3" number="17.6.1">
<h3><span class="header-section-number">17.6.1</span> Using simplemaps.com</h3>
<pre><code># 1.a  https://simplemaps.com/data/us-cities ----

load(&quot;datasets/geoCa/uszips.rda&quot;)

dtUS &lt;- as.data.table(uszips) %&gt;% 
  mutate(across(where(is.character), as.factor)) %&gt;% 
  mutate(across(where(is.logical), as.factor));  dtUS %&gt;% print(2); dtUS %&gt;% summary
saveRDS(dtUS, &quot;citiesUS_simplemaps.Rds&quot;)


# 1.b  https://simplemaps.com/data/canada-cities ----

dtCaCitiesGeoPop &lt;- readRDS(&quot;citiesCa-simplemaps.Rds&quot;) %&gt;% setDT

# dtCa2&lt;- read_excel(&quot;geoCa/canadacities.xlsx&quot;, sheet=1) %&gt;% data.table() #%T&gt;% print()
dtCaSimplemaps &lt;- fread(&quot;geoCa/canadacities.csv&quot;)</code></pre>
</div>
<div id="using-google-api" class="section level3" number="17.6.2">
<h3><span class="header-section-number">17.6.2</span> Using Google API</h3>
<div id="extraction-of-latitude" class="section level4" number="17.6.2.1">
<h4><span class="header-section-number">17.6.2.1</span> extraction-of-latitude</h4>
<p>See : <a href="https://stackoverflow.com/questions/65945015/automating-extraction-of-latitude-longitude-and-other-information-about-places" class="uri">https://stackoverflow.com/questions/65945015/automating-extraction-of-latitude-longitude-and-other-information-about-places</a></p>
</div>
<div id="using-googleway" class="section level4" number="17.6.2.2">
<h4><span class="header-section-number">17.6.2.2</span> Using googleway</h4>
<pre><code>require(googleway)
set_key(&quot;your_google_key_of_39_characters&quot;)
x= google_geocode(address = &quot;Southern Saskatchewan&quot;, simplify = TRUE)
x$results$geometry</code></pre>
</div>
</div>
<div id="using-tidygeocoder" class="section level3" number="17.6.3">
<h3><span class="header-section-number">17.6.3</span> Using tidygeocoder</h3>
<pre><code>tidygeocoder::geo_osm(&#39;Southern Saskatchewan&#39;)</code></pre>
</div>
<div id="using-open-street-map" class="section level3" number="17.6.4">
<h3><span class="header-section-number">17.6.4</span> Using Open Street map</h3>
<p><a href="https://machinelearnings.co/statistical-nlp-on-openstreetmap-b9d573e6cc86" class="uri">https://machinelearnings.co/statistical-nlp-on-openstreetmap-b9d573e6cc86</a></p>
</div>
<div id="using-open-database-of-addresses-educational-facilities" class="section level3" number="17.6.5">
<h3><span class="header-section-number">17.6.5</span> Using Open Database of Addresses / Educational Facilities</h3>
<p><a href="https://www.statcan.gc.ca/eng/lode/databases/oda" class="uri">https://www.statcan.gc.ca/eng/lode/databases/oda</a>
<a href="https://www.statcan.gc.ca/eng/lode/databases/odef" class="uri">https://www.statcan.gc.ca/eng/lode/databases/odef</a></p>
<p><a href="http://www150.statcan.gc.ca/n1/pub/46-26-0001/2021001/" class="uri">http://www150.statcan.gc.ca/n1/pub/46-26-0001/2021001/</a>”</p>
<pre><code>urlAddresses =  c(
  Alberta = &quot;ODA_AB_v1.zip&quot;,
  BritishColumbia = &quot;ODA_BC_v1.zip&quot;,
  Manitoba = &quot;ODA_MB_v1.zip&quot;,
  NewBrunswick = &quot;ODA_NB_v1.zip&quot;,
  NorthwestTerritories = &quot;ODA_NT_v1.zip&quot;,
  NovaScotia = &quot;ODA_NS_v1.zip&quot;,
  Ontario = &quot;ODA_ON_v1.zip&quot;,
  PrinceEdwardIsland = &quot;ODA_PE_v1.zip&quot;,
  Quebec = &quot;ODA_QC_v1.zip&quot;,
  Saskatchewan = &quot;ODA_SK_v1.zip&quot;
)

dtUrlAddresses &lt;- data.table(province=names(urlAddresses),url=urlAddresses) %&gt;% setkey(province)

dtUrlAddresses$url &lt;- str_c(strHome, dtUrlAddresses$url) 
dtUrlAddresses[, url:=str_c(strHome, url) ]
dtAddress &lt;- fread (urlAddresses[&quot;Alberta&quot;])</code></pre>
</div>
<div id="getting-postal-codes" class="section level3" number="17.6.6">
<h3><span class="header-section-number">17.6.6</span> Getting Postal codes</h3>
<p>NOT AVAILABLE TO PUBLIC, ONLY VIA UNIVERSITY</p>
<p><a href="https://www.statcan.gc.ca/eng/mgeo/postalcode" class="uri">https://www.statcan.gc.ca/eng/mgeo/postalcode</a></p>
<ul>
<li><p>Home Maps and geography Geographic products Postal code products:</p></li>
<li><p>Postal code products</p></li>
<li><p>Postal Code OM Conversion File</p></li>
<li><p><a href="https://www150.statcan.gc.ca/n1/en/catalogue/92-154-X" class="uri">https://www150.statcan.gc.ca/n1/en/catalogue/92-154-X</a> - Postal Code OM Conversion File, June 2017</p></li>
<li><p><a href="https://www150.statcan.gc.ca/n1/en/catalogue/92-178-X" class="uri">https://www150.statcan.gc.ca/n1/en/catalogue/92-178-X</a> - Postal Codes OM by Federal Ridings File (PCFRF)</p></li>
<li><p><a href="https://www150.statcan.gc.ca/n1/en/catalogue/82F0086X" class="uri">https://www150.statcan.gc.ca/n1/en/catalogue/82F0086X</a> - Postal Code OM Conversion File Plus (PCCF+), August 2015 - Update</p></li>
</ul>
<p><a href="https://www.statcan.gc.ca/eng/dli/dli" class="uri">https://www.statcan.gc.ca/eng/dli/dli</a></p>
<p>The Data Liberation Initiative (DLI) is a partnership between post-secondary institutions and Statistics Canada for improving access to Canadian data resources.</p>
<p>Please consult the list of participating institutions and their contacts. If your institution is already a member, please contact the person listed to gain access to products available through the DLI.</p>
<pre><code>  University of Ottawa
  Chantal Ripp
  Data Research Librarian
  613-562-5800 ext.3881
  chantal.ripp@uottawa.ca</code></pre>
</div>
</div>
</div>
<div id="part-machine-learning-and-ai" class="section level1 unnumbered">
<h1 class="unnumbered">(PART) Machine Learning and AI</h1>
</div>
<div id="data-engineering-record-linking-and-deduplication" class="section level1" number="18">
<h1><span class="header-section-number">18</span> Data Engineering, Record Linking and Deduplication</h1>
<div id="tldl" class="section level2" number="18.1">
<h2><span class="header-section-number">18.1</span> TL;DL</h2>
<ul>
<li>Demo Tool: See <a href="http://rcanada.shinyapps.io/demo" class="uri">http://rcanada.shinyapps.io/demo</a> and the #GCData2021 Data Engineering workshop presentation <span class="math inline">\(\ref{#gc-refs}\)</span>
for the backgrounder and the demonstration of various Data Engineering tasks and solutions. The source is in <a href="">GCCode</a>.</li>
</ul>
</div>
<div id="intro-what-is-data-engineering" class="section level2" number="18.2">
<h2><span class="header-section-number">18.2</span> Intro: What is <em>Data Engineering</em></h2>
<p><em>Data Engineering</em> refers to all tasks related to automation of data processing
within the “insight-from-data” pipeline.
<!-- It can be thought of as software engineering for data science.  --></p>
<div id="data-engineering-vs.-software-engineering" class="section level3" number="18.2.1">
<h3><span class="header-section-number">18.2.1</span> <em>Data Engineering</em> vs. <em>Software Engineering</em></h3>
<p>In analogy to <em>Software Engineering</em> (a field of Computer Science focused on developing
<a href="">“scientific and technological knowledge, methods, and experience to the design, implementation, testing, and documentation of software”[IEEE Vocabulary]</a>,
developing knowledge, methods robust scalable tools for computer programs),<br />
<em>Data Engineering</em> may be treated as a field of Data Science that is focused on developing
“scientific and technological knowledge, methods, and experience to the design, implementation, testing, and documentation of <em>data-driven solutions</em>”]</p>
<!-- 
*Software Engineering*: 

- "the systematic application of scientific and technological knowledge, methods, and experience to the design, implementation, testing, and documentation of software" [IEEE Systems and software engineering – Vocabulary]
- "The application of a systematic, disciplined, quantifiable approach to the development, operation, and maintenance of software" [IEEE Standard Glossary of Software Engineering Terminology]

- ""software engineering" encompasses not just the act of writing code, but all of the tools and processes an organization uses to build and maintain that code over time. [...] Software engineering can be thought of as “programming integrated over time.”" [Software Engineering at Google]

-->
</div>
</div>
<div id="data-engineering-vs.-etl-and-elt" class="section level2" number="18.3">
<h2><span class="header-section-number">18.3</span> Data Engineering vs. ETL and ELT</h2>
<!-- https://searchdatamanagement.techtarget.com/definition/Extract-Load-Transform-ELT -->
<!-- With ETL, the raw data is not available in the data warehouse because it is transformed before it is loaded. With ELT, the raw data is loaded into the data warehouse (or data lake) and transformations occur on the stored data. -->
<!-- ELT is most useful for processing the large data sets required for business intelligence (BI) and big data analytics.  -->
<p>DE Data Engineering with ETL (Extract - Transform - Load ) but is more than that.</p>
<p>We’ve also observed a general shift away from drag-and-drop ETL (Extract Transform and Load) tools towards a more programmatic approach [ (i.e. Software engineering,Cmputer science approaches) so that be scalable to big data]
To a modern data engineer, traditional ETL tools are largely obsolete because logic cannot be expressed using code.</p>
<!-- 
## Data Engineering vs. Big Data


## Contribution to DE to bias and public trust in AI

-->
<div id="taxonomy-of-data-engineering-tasks" class="section level3" number="18.3.1">
<h3><span class="header-section-number">18.3.1</span> Taxonomy of Data Engineering tasks</h3>
<ul>
<li>Single variable</li>
<li>Multiple variable, no semantic relationship</li>
<li>Multiple variable, with semantic relationship</li>
</ul>
</div>
</div>
<div id="useful-packages" class="section level2" number="18.4">
<h2><span class="header-section-number">18.4</span> Useful packages</h2>
<div id="single-variable" class="section level3" number="18.4.1">
<h3><span class="header-section-number">18.4.1</span> Single variable</h3>
<!-- work in three column bookdown only ```{r results='asis'} -->
<!-- DIV_START("Show / Hide Summary") -->
<!-- ``` -->
<!-- ```{r results='asis'} -->
<!-- DIV_END() -->
<!-- ``` -->
</div>
</div>
<div id="r-base-and-data.table" class="section level2" number="18.5">
<h2><span class="header-section-number">18.5</span> 0 &gt; R base and data.table</h2>
<div id="description" class="section level3" number="18.5.1">
<h3><span class="header-section-number">18.5.1</span> Description</h3>
<p>agrep {base}<br />
adist {utils}</p>
<pre><code>agrep(pattern, x, max.distance = 0.1, costs = NULL,
ignore.case = FALSE, value = FALSE, fixed = TRUE,
useBytes = FALSE)</code></pre>
</div>
<div id="examples" class="section level3" number="18.5.2">
<h3><span class="header-section-number">18.5.2</span> Examples</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Cf. the examples for agrep:</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">adist</span>(<span class="st">&quot;lasy&quot;</span>, <span class="st">&quot;1 lazy 2&quot;</span>)</span></code></pre></div>
<pre><code>##      [,1]
## [1,]    5</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="do">## For a &quot;partial approximate match&quot; (as used for agrep):</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">adist</span>(<span class="st">&quot;lasy&quot;</span>, <span class="st">&quot;1 lazy 2&quot;</span>, <span class="at">partial =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##      [,1]
## [1,]    1</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1 lazy&quot;</span>, <span class="st">&quot;1&quot;</span>, <span class="st">&quot;1 LAZY&quot;</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">aregexec</span>(<span class="st">&quot;laysy&quot;</span>, x, <span class="at">max.distance =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 3
## attr(,&quot;match.length&quot;)
## [1] 4
## 
## [[2]]
## [1] -1
## attr(,&quot;match.length&quot;)
## [1] -1
## 
## [[3]]
## [1] -1
## attr(,&quot;match.length&quot;)
## [1] -1</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aregexec</span>(<span class="st">&quot;(lay)(sy)&quot;</span>, x, <span class="at">max.distance =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 3 3 5
## attr(,&quot;match.length&quot;)
## [1] 4 2 2
## 
## [[2]]
## [1] -1
## attr(,&quot;match.length&quot;)
## [1] -1
## 
## [[3]]
## [1] -1
## attr(,&quot;match.length&quot;)
## [1] -1</code></pre>
<pre><code>
   # https://www12.statcan.gc.ca/census-recensement/2016/dp-pd/prof/details/download-telecharger/comp/page_dl-tc.cfm?Lang=E

  dtStatcan &lt;-  fread(&quot;datasets\\geoCa\\census-data/98-401-X2016044_English_CSV_data.csv&quot;) # 14 Mb file !
   
  numcols &lt;- dtStatcan[, which(sapply(.SD, is.character))]
  dtStatcan[, (numcols):=lapply(.SD, as.factor), .SDcols=numcols]
  summary(dtStatcan)


  dtStatcan[str_detect(GEO_CODE, &quot;(?i)^3506008&quot;)]
  dtStatcan[GEO_CODE %ilike% &quot;^3506008&quot;]
  dtStatcan[GEO_CODE %ilike% &quot;(?i)^350600&quot;]
  dtStatcan[GEO_CODE %ilike% &quot;(?i)^3506&quot; &amp; GEO_LEVEL&lt;4][order(GEO_LEVEL)]
  dtStatcan[GEO_CODE %ilike% &quot;(?i)^350&quot; &amp; GEO_LEVEL&lt;4][order(GEO_LEVEL)]</code></pre>
</div>
</div>
<div id="textclean" class="section level2 tabset" number="18.6">
<h2 class="tabset"><span class="header-section-number">18.6</span> 1 &gt;<code>textclean</code></h2>
<div id="description-1" class="section level3" number="18.6.1">
<h3><span class="header-section-number">18.6.1</span> Description</h3>
<p>textclean: Text Cleaning Tools</p>
<p>Tools to clean and process text. Tools are geared at checking for substrings that are not optimal for analysis and replacing or removing them (normalizing) with more analysis friendly substrings or extracting them into new variables.</p>
<p>Imports: data.table, english (≥ 1.0-2), glue (≥ 1.3.0), lexicon (≥ 1.0.0), mgsub (≥ 1.5.0), qdapRegex, stringi, textshape (≥ 1.0.1)</p>
<p><a href="https://www.sciencedirect.com/science/article/abs/pii/S088523080190169X?via%3Dihub" class="uri">https://www.sciencedirect.com/science/article/abs/pii/S088523080190169X?via%3Dihub</a>
<a href="https://github.com/trinker/textclean" class="uri">https://github.com/trinker/textclean</a></p>
</div>
<div id="example" class="section level3" number="18.6.2">
<h3><span class="header-section-number">18.6.2</span> Example</h3>
</div>
</div>
<div id="package-phonics" class="section level2 tabset" number="18.7">
<h2 class="tabset"><span class="header-section-number">18.7</span> 2 &gt; Package <code>phonics</code></h2>
<div id="description-2" class="section level3" number="18.7.1">
<h3><span class="header-section-number">18.7.1</span> Description</h3>
<p><a href="https://cran.r-project.org/web/packages/phonics/index.html" class="uri">https://cran.r-project.org/web/packages/phonics/index.html</a><br />
<a href="https://github.com/k3jph/phonics-in-r" class="uri">https://github.com/k3jph/phonics-in-r</a> ; <a href="https://jameshoward.us/phonics-in-r/articles/phonics.html" class="uri">https://jameshoward.us/phonics-in-r/articles/phonics.html</a></p>
<p>Provides a collection of phonetic algorithms including Soundex, Metaphone, NYSIIS, Caverphone, and others.</p>
<p>Phonetic Spelling Algorithm Implementations for R
James P. Howard, II, Journal of Statistical Software, October 2020, Volume 95, Issue 8. <a href="https://www.jstatsoft.org/article/view/v095i08" class="uri">https://www.jstatsoft.org/article/view/v095i08</a></p>
<p>All functions</p>
<p>caverphone() Caverphone</p>
<p>cologne() Cologne Phonetic Name Coding</p>
<p>lein() Lein Name Coding</p>
<p>metaphone() Generate phonetic versions of strings with Metaphone</p>
<p>mra_encode() mra_compare()Match Rating Approach Encoder</p>
<p>nysiis() New York State Identification and Intelligence System</p>
<p>onca() Oxford Name Compression Algorithm</p>
<p>phonex() Phonex Name Coding</p>
<p>phonics()</p>
<p>Phonetic Spelling Algorithms</p>
<p>rogerroot()</p>
<p>Roger Root Name Coding Procedure</p>
<p>soundex() refinedSoundex()</p>
<p>Soundex</p>
<p>statcan()</p>
<p>Statistics Canada Name Coding</p>
</div>
<div id="example-1" class="section level3" number="18.7.2">
<h3><span class="header-section-number">18.7.2</span> Example</h3>
</div>
</div>
<div id="package-stringdist" class="section level2 tabset" number="18.8">
<h2 class="tabset"><span class="header-section-number">18.8</span> 3 &gt; Package <code>stringdist</code></h2>
<div id="description-3" class="section level3" number="18.8.1">
<h3><span class="header-section-number">18.8.1</span> Description</h3>
<p>CRAN: <a href="https://cran.r-project.org/web/packages/stringdist/stringdist.pdf" class="uri">https://cran.r-project.org/web/packages/stringdist/stringdist.pdf</a> (Date/Publication 2020-10-09 10:30:03 UTC)<br />
URL: <a href="https://github.com/markvanderloo/stringdist" class="uri">https://github.com/markvanderloo/stringdist</a><br />
Paper: <a href="https://journal.r-project.org/archive/2014-1/loo.pdf" class="uri">https://journal.r-project.org/archive/2014-1/loo.pdf</a>,</p>
<p>Implements an approximate string matching version of R’s native ‘match’ function. Also offers fuzzy text search based on various string distance measures. Can calculate various string distances based on edits (Damerau-Levenshtein, Hamming, Levenshtein, optimal sting alignment), qgrams (qgram, cosine, jaccard distance) or heuristic metrics (Jaro, Jaro-Winkler). An implementation of soundex is provided as well. Distances can be computed between character vectors while taking proper care of encoding or between integer vectors representing generic sequences.</p>
</div>
<div id="example-2" class="section level3" number="18.8.2">
<h3><span class="header-section-number">18.8.2</span> Example</h3>
</div>
</div>
<div id="multi-variable-recording-linking" class="section level2" number="18.9">
<h2><span class="header-section-number">18.9</span> Multi-variable recording linking</h2>
<p>Packages below are listed in the order of the speed and quality</p>
</div>
<div id="libraryfastlink" class="section level2" number="18.10">
<h2><span class="header-section-number">18.10</span> &gt;&gt; library(fastLink)</h2>
<div id="description-4" class="section level3" number="18.10.1">
<h3><span class="header-section-number">18.10.1</span> Description</h3>
<p>Published: 2020-04-29</p>
<p>Implements a Fellegi-Sunter probabilistic record linkage model that allows for missing data and the inclusion of auxiliary information. This includes functionalities to conduct a merge of two datasets under the Fellegi-Sunter model using the Expectation-Maximization algorithm. In addition, tools for preparing, adjusting, and summarizing data merges are included. The package implements methods described in Enamorado, Fifield, and Imai (2019) ”Using a Probabilistic Model to Assist Merging of Large-scale Administrative Records”, American Political Science Review and is available at <a href="http://imai.fas.harvard.edu/research/linkage.html" class="uri">http://imai.fas.harvard.edu/research/linkage.html</a>.</p>
<p><a href="https://github.com/kosukeimai/fastLink" class="uri">https://github.com/kosukeimai/fastLink</a></p>
<p><a href="https://imai.fas.harvard.edu/research/files/linkage.pdf" class="uri">https://imai.fas.harvard.edu/research/files/linkage.pdf</a></p>
<p>Imports: parallel, <a href="https://cran.r-project.org/web/packages/foreach/index.html">foreach</a>, doParallel, gtools, [data.table], [stringdist], stringr, stringi, Rcpp</p>
</div>
<div id="dataset" class="section level3" number="18.10.2">
<h3><span class="header-section-number">18.10.2</span> Dataset</h3>
</div>
<div id="example-3" class="section level3" number="18.10.3">
<h3><span class="header-section-number">18.10.3</span> Example</h3>
</div>
</div>
<div id="package-recordlinkage" class="section level2 tabset" number="18.11">
<h2 class="tabset"><span class="header-section-number">18.11</span> &gt;&gt; Package <code>RecordLinkage</code></h2>
<div id="description-5" class="section level3" number="18.11.1">
<h3><span class="header-section-number">18.11.1</span> Description</h3>
<p>RecordLinkage: Record Linkage Functions for Linking and Deduplicating Data Sets</p>
<p>Provides functions for linking and deduplicating data sets. Methods based on a stochastic approach are implemented as well as classification algorithms from the machine learning domain. For details, see our paper “The RecordLinkage Package: Detecting Errors in Data” Sariyar M / Borg A (2010) <a href="doi:10.32614/RJ-2010-017" class="uri">doi:10.32614/RJ-2010-017</a>.</p>
<p>Published: 2020-08-25<br />
Depends: R (≥ 3.5.0), DBI, RSQLite (≥ 1.0.0), ff<br />
Imports: Machine learning - e1071, rpart, ada, ipred, stats, evd, methods, nnet. Efficiency - data.table (≥ 1.7.8),</p>
<p>Reverse enhances: SoundexBR</p>
</div>
<div id="datasets-german-names-500-and-10000" class="section level3" number="18.11.2">
<h3><span class="header-section-number">18.11.2</span> Datasets: German names 500 and 10,000</h3>
<p>The RLdata500 data consists of 500 records with 10 percent duplication.</p>
</div>
</div>
<div id="libraryblink" class="section level2 tabset" number="18.12">
<h2 class="tabset"><span class="header-section-number">18.12</span> &gt; library(blink)</h2>
<div id="summary" class="section level3" number="18.12.1">
<h3><span class="header-section-number">18.12.1</span> Summary</h3>
<p>2020-09-30
“Entity Resolution with Emprically Motivated Priors”, Bayesian Analysis, (10),4:849-975.
We will be using the RecordLinkage package in R and the RLdata500 data set.
<a href="https://cran.r-project.org/web/packages/blink/vignettes/introEBLink.html">link</a></p>
</div>
</div>
<div id="libraryreclin" class="section level2 tabset" number="18.13">
<h2 class="tabset"><span class="header-section-number">18.13</span> &gt; <code>library(reclin)</code></h2>
<div id="description-6" class="section level3" number="18.13.1">
<h3><span class="header-section-number">18.13.1</span> Description</h3>
<p>Title: Record Linkage Toolkit</p>
<p>Date: 2018-08-09</p>
<p>Description: Functions to assist in performing probabilistic record linkage and
deduplication: generating pairs, comparing records, em-algorithm for
estimating m- and u-probabilities, forcing one-to-one matching. Can also be
used for pre- and post-processing for machine learning methods for record
linkage.</p>
<p>Depends: lvec, ldat, R (≥ 3.4.0)
Imports: stringdist, lpSolve, Rcpp</p>
<p>Comments: Used in DataCamp training</p>
<p><a href="https://cran.r-project.org/web/packages/reclin/reclin.pdf" class="uri">https://cran.r-project.org/web/packages/reclin/reclin.pdf</a>
<a href="https://github.com/djvanderlaan/reclin" class="uri">https://github.com/djvanderlaan/reclin</a>
<a href="https://cran.r-project.org/web/packages/reclin/vignettes/introduction_to_reclin.html" class="uri">https://cran.r-project.org/web/packages/reclin/vignettes/introduction_to_reclin.html</a> (with Two small artificial datasets: first and last names with address, sex, postcode)
<a href="https://cran.r-project.org/web/packages/reclin/vignettes/deduplication.html" class="uri">https://cran.r-project.org/web/packages/reclin/vignettes/deduplication.html</a></p>
</div>
<div id="included-datasets" class="section level3" number="18.13.2">
<h3><span class="header-section-number">18.13.2</span> Included Datasets:</h3>
<p>Two small (6 and 5 record) artificial names data</p>
<div id="deduplication-example" class="section level4" number="18.13.2.1">
<h4><span class="header-section-number">18.13.2.1</span> Deduplication example</h4>
</div>
</div>
</div>
<div id="libraryfuzzyjoin" class="section level2" number="18.14">
<h2><span class="header-section-number">18.14</span> &gt;&gt; library(fuzzyjoin)</h2>
<div id="description-7" class="section level3" number="18.14.1">
<h3><span class="header-section-number">18.14.1</span> Description</h3>
<p>fuzzyjoin: Join Tables Together on Inexact Matching<br />
Join tables together based not on whether columns match exactly, but whether they are similar by some comparison. Implementations include string distance and regular expression matching.</p>
<p>Published: 2020-05-15</p>
<p>Imports: stringdist</p>
<p><a href="https://cran.r-project.org/web/packages/fuzzyjoin/vignettes/stringdist_join.html" class="uri">https://cran.r-project.org/web/packages/fuzzyjoin/vignettes/stringdist_join.html</a></p>
<!-- Comments: Used in DataCamptraining ?-->
</div>
<div id="example-1-joining-with-common-mispelling" class="section level3" number="18.14.2">
<h3><span class="header-section-number">18.14.2</span> Example 1: Joining with Common Mispelling</h3>
</div>
<div id="example-2-from-datacamp" class="section level3" number="18.14.3">
<h3><span class="header-section-number">18.14.3</span> Example 2: from datacamp</h3>
</div>
<div id="example-3-from-stackoverflow" class="section level3" number="18.14.4">
<h3><span class="header-section-number">18.14.4</span> Example 3: from stackoverflow</h3>
<pre><code># https://stackoverflow.com/questions/52402768/r-fuzzy-merge-using-agrep-and-data-table
library(&quot;data.table&quot;)
dt1 = data.table(Name = c(&quot;ASML HOLDING&quot;,&quot;ABN AMRO GROUP&quot;), A = c(1,2))
dt2 = data.table(Name = c(&quot;ASML HOLDING NV&quot;, &quot;ABN AMRO GROUP&quot;), B = c(&quot;p&quot;, &quot;q&quot;))

dt1 = data.frame(Name = c(&quot;ASML HOLDING&quot;,&quot;ABN AMRO GROUP&quot;), A = c(1,2),Date=c(1,2))
dt2 = data.frame(Name = c(&quot;ASML HOLDING NV&quot;, &quot;ABN AMRO GROUP&quot;, &quot;ABN AMRO GROUP&quot;), B = c(&quot;p&quot;, &quot;q&quot;,&quot;r&quot;),Date=c(1,2,3))

dt1 %&gt;% fuzzy_inner_join(dt2, by=c(&quot;Date&quot;,&quot;Name&quot;), match_fun=f) %&gt;% filter(Date.x==Date.y)

library(fuzzyjoin)
f &lt;- Vectorize(function(x,y) agrepl(x, y,
                                    ignore.case=TRUE,
                                    max.distance = 0.05, useBytes = TRUE))
dt1 %&gt;% fuzzy_inner_join(dt2, by=&quot;Name&quot;, match_fun=f)



</code></pre>
</div>
</div>
<div id="package-blink" class="section level2 tabset" number="18.15">
<h2 class="tabset"><span class="header-section-number">18.15</span> &gt; Package <code>blink</code></h2>
<div id="description-8" class="section level3" number="18.15.1">
<h3><span class="header-section-number">18.15.1</span> Description</h3>
<p>blink: Record Linkage for Empirically Motivated Priors</p>
<p>An implementation of the model in Steorts (2015) <a href="doi:10.1214/15-BA965SI" class="uri">doi:10.1214/15-BA965SI</a>, which performs Bayesian entity resolution for categorical and text data, for any distance function defined by the user. In addition, the precision and recall are in the package to allow one to compare to any other comparable method such as logistic regression, Bayesian additive regression trees (BART), or random forests. The experiments are reproducible and illustrated using a simple vignette. LICENSE: GPL-3 + file license.</p>
<p>Depends: stringdist</p>
<p>Published: 2020-10-06</p>
<p><a href="https://projecteuclid.org/euclid.ba/1441790411" class="uri">https://projecteuclid.org/euclid.ba/1441790411</a>
<a href="https://cran.r-project.org/web/packages/blink/vignettes/introEBLink.html" class="uri">https://cran.r-project.org/web/packages/blink/vignettes/introEBLink.html</a></p>
</div>
<div id="datasets-german-names-500-and-10000-1" class="section level3" number="18.15.2">
<h3><span class="header-section-number">18.15.2</span> Datasets: German names 500 and 10,000</h3>
</div>
</div>
<div id="discusion---other-methods" class="section level2" number="18.16">
<h2><span class="header-section-number">18.16</span> Discusion - Other methods</h2>
<p>LSTMs - Have you tried using LSTMs for record linkage for entity linkage? We were quiet sucessful in doing it compared to probalistic linkage.</p>
<!-- [11:29 AM] Ritter, Christian - DSCD/DSCD (Guest) -->
<!-- Gorodnichy, Dmitry  Have you tried using LSTMs for record linkage for entity linkage? We were quiet sucessful in doing it compared to probalistic linkage. -->
</div>
</div>
<div id="text-analysis-in-r" class="section level1" number="19">
<h1><span class="header-section-number">19</span> Text Analysis in R</h1>
<p><a href="https://gccollab.ca/discussion/view/7404441/text-analysis-in-r" class="uri">https://gccollab.ca/discussion/view/7404441/text-analysis-in-r</a></p>
<div id="open-source-textbook" class="section level2" number="19.1">
<h2><span class="header-section-number">19.1</span> Open source textbook</h2>
<p><a href="https://smltar.com/" class="uri">https://smltar.com/</a>
<a href="https://www.tidytextmining.com/" class="uri">https://www.tidytextmining.com/</a>
<a href="https://slcladal.github.io/topicmodels.html" class="uri">https://slcladal.github.io/topicmodels.html</a>, <a href="https://slcladal.github.io/textanalysis.html" class="uri">https://slcladal.github.io/textanalysis.html</a></p>
<p>Also, a list of related resources and codes for text mining (including Web Scraping) are collected here: <a href="https://github.com/gorodnichy/LA-R-text" class="uri">https://github.com/gorodnichy/LA-R-text</a></p>
</div>
<div id="plagiarism-detection" class="section level2" number="19.2">
<h2><span class="header-section-number">19.2</span> Plagiarism detection</h2>
<p>Q: Any ideas/packages/resources (in R) for plagiarism detection?</p>
<p>A:
A good place to start is the “stylo” package (<a href="https://github.com/computationalstylistics/stylo" class="uri">https://github.com/computationalstylistics/stylo</a> - R package for stylometric analyses) which implements a wide variety of recent research in computational stylistics. Plagiarism detection is fraught (insert all of the usual ethical and computational caveats…), but stylo can help you identify passages that are stylistically unusual compared to the rest of the text. Unusualness definitely isn’t a proxy for plagiarism, but it’s a good place to start.</p>
<p>Q:
Is this focused on English language text? Are there lexicons or libraries for comparison within other languages (e.g., French)?</p>
<p>A: Stylo works well with quite a few non-English languages. French, for example, is supported, as are a number of languages with non-Latin alphabets like Arabic and Korean.</p>
</div>
<div id="related-work-at-international-methodology-symposium" class="section level2" number="19.3">
<h2><span class="header-section-number">19.3</span> Related work at International Methodology Symposium</h2>
<p>Two presentations at <a href="https://www.statcan.gc.ca/en/conferences/symposium2021/program">International Methodology Symposium</a> were about Text Analysis with R, with great ideas from both:</p>
<ul>
<li><p>11B-4 by Andrew Stelmach from StatCan: used <code>library(fastText)</code> - a very powerful package from facebook AI team for efficient learning of word representations and sentence classification.</p></li>
<li><p>11B-2 by Dave Campbell from Carleton U: used the approach that we discussed at L&amp;L on October 9 (based on bag of words cosine distance / correlation) for matching beer products description - <a href="https://gccode.ssc-spc.gc.ca/r4gc/resources/text/" class="uri">https://gccode.ssc-spc.gc.ca/r4gc/resources/text/</a>), but addtionally applied SVD (singular value decomposition) to reduce comparison to the most imporant words, thus reducing significantly the dimension and speed.</p></li>
</ul>
<p>You can find their decks here: <a href="https://drive.google.com/drive/folders/1TfuNmG3V8IEKDNNTcMZz7_YCKgqVVBju" class="uri">https://drive.google.com/drive/folders/1TfuNmG3V8IEKDNNTcMZz7_YCKgqVVBju</a></p>
</div>
<div id="useful-code-snippets" class="section level2" number="19.4">
<h2><span class="header-section-number">19.4</span> Useful code snippets</h2>
<div id="basic-cleaning-remove-accents-benchmarking" class="section level3" number="19.4.1">
<h3><span class="header-section-number">19.4.1</span> Basic cleaning : Remove accents (benchmarking)</h3>
<pre><code>
dtCases &lt;- fread(&quot;https://github.com/ishaberry/Covid19Canada/raw/master/cases.csv&quot;, stringsAsFactors = F )
dtCases %&gt;% dim
system.time(dtCases [, city0 := health_region])
system.time(dtCases [, city1 := base::iconv (health_region, from=&quot;UTF-8&quot;, to=&quot;ASCII//TRANSLIT&quot;)])
system.time(dtCases [, city2 := textclean::replace_non_ascii (health_region)])
system.time(dtCases [, city3 := stringi::stri_trans_general (health_region,id = &quot;Latin-ASCII&quot;)])
dtCases[city0!=city1, city0:city3] %&gt;% unique


microbenchmark::microbenchmark(  
  dtCases [, city0 := iconv (health_region, to=&quot;ASCII//TRANSLIT&quot;)],
  dtCases [, city1 := iconv (health_region, to=&quot;ASCII//TRANSLIT&quot;)],
  dtCases [, city2 := textclean::replace_non_ascii (health_region)],
  dtCases [, city3 := stringi::stri_trans_general (health_region,id = &quot;Latin-ASCII&quot;)],
  times=10)

# Unit: milliseconds
# expr       min        lq
# dtCases[, `:=`(city0, iconv(health_region, to = &quot;ASCII//TRANSLIT&quot;))]  166.8094  168.8169
# dtCases[, `:=`(city1, iconv(health_region, to = &quot;ASCII//TRANSLIT&quot;))]  165.9741  168.5937
# dtCases[, `:=`(city2, textclean::replace_non_ascii(health_region))] 8757.1358 8867.7838
# dtCases[, `:=`(city3, stringi::stri_trans_general(health_region,      id = &quot;Latin-ASCII&quot;))] 4204.2102 4230.9790
# mean    median        uq       max neval
# 172.8043  172.4714  174.7670  181.1422    10
# 173.8419  171.0345  172.6113  204.4243    10
# 9088.6954 9049.1962 9273.6495 9545.8301    10
# 4301.7987 4293.4896 4339.4618 4430.2948    10</code></pre>
</div>
<div id="text-cleaning" class="section level3" number="19.4.2">
<h3><span class="header-section-number">19.4.2</span> Text cleaning</h3>
<pre><code>library(textclean)
# library(textshape) #with(DATA, split_portion(state, n.words = 10))
# https://github.com/trinker/textclean

if(F) {
  mgsub(textclean::DATA$state, c(&quot;i&quot;, &quot;it&quot;), c(&quot;&lt;&lt;I&gt;&gt;&quot;, &quot;[[IT]]&quot;))
  mgsub(DATA$state, &quot;[[:punct:]]&quot;, &quot;&lt;&lt;PUNCT&gt;&gt;&quot;, fixed = FALSE)
  x &lt;- c(
    &quot;&lt;bold&gt;Random&lt;/bold&gt; text with symbols: &amp;nbsp; &amp;lt; &amp;gt; &amp;amp; &amp;quot; &amp;apos;&quot;,
    &quot;&lt;p&gt;More text&lt;/p&gt; &amp;cent; &amp;pound; &amp;yen; &amp;euro; &amp;copy; &amp;reg;&quot;,
    &quot;Welcome to A I: the best W O R L D!&quot;,
    &quot;6 Ekstr\xf8m&quot;, &quot;J\xf6reskog&quot;, &quot;bi\xdfchen Z\xfcrcher&quot;,
    &quot;I&#39;m liiiike whyyyyy me?&quot;, &quot;Wwwhhatttt!&quot;
  )
  
  replace_html(x)
  replace_kern(x)
  x;  Encoding(x) &lt;- &quot;latin1&quot;; x
  replace_non_ascii(x)
  
  # Tokens
  ## Set Up the Tokens to Replace
  
  lexicon::grady_augmented # 122806 #English words
  
  lexicon::common_names # 5493 #Names
  nms &lt;- gsub(&quot;(^.)(.*)&quot;, &quot;\\U\\1\\L\\2&quot;, lexicon::common_names, perl = TRUE)
  head(nms)
  
  fuzzyjoin::misspellings %&gt;% nrow() #4505
  
  replace_white(x)
  replace_word_elongation(x)
  
  
}

cleanWords &lt;- function(phrase)  {
  # cleanWords &lt;- function(phrase, changecase = c(&quot;no&quot;, &quot;upper&quot;, &quot;lower&quot;, &quot;title&quot;))  {
  phrase %&gt;% 
    # gsub(&quot;[^[:alnum:]]&quot;, &quot;&quot;, .) %&gt;%
    gsub(&quot;[^[A-Za-z0-9 -]]&quot;, &quot;&quot;, .) %&gt;%
    gsub(&quot; {2,}&quot;, &quot; &quot;, .) 
  # %&gt;%
  # iconv(to=&quot;ASCII//TRANSLIT&quot;)     
  # replace_non_ascii
  # str_to_lower()
  # ifelse(changecase == &quot;upper&quot;, str_to_upper(),
  #        ifelse (changecase == &quot;lower&quot;, str_to_lower(),
  #                ifelse(changecase == &quot;title&quot;, str_to_title(),
  #                       .)
  #        )
  # )
}

arrayTranslitFromCyrilic &lt;- function (slovo=&quot;Дмитрий Городничий&quot;) {
  c(
    slovo %&gt;% stri_trans_general(&quot;ukrainian-Latin/bgn&quot;)%&gt;% cleanWords,
    slovo %&gt;% stri_trans_general(&quot;Russian-Latin/bgn&quot;)%&gt;% cleanWords,
    slovo %&gt;% stri_trans_general(&quot;Bulgarian-Latin/bgn&quot;)%&gt;% cleanWords,
    slovo %&gt;% stri_trans_general(&quot;Belarusian-Latin/bgn&quot;)%&gt;% cleanWords,
    slovo %&gt;% stri_trans_general(&quot;Serbian-Latin/bgn&quot;)%&gt;% cleanWords,
    slovo %&gt;% stri_trans_general(&quot;cyrillic-latin&quot;)%&gt;% cleanWords
  )
}

if (F) {
  # library(stringi)
  dt &lt;- stri_trans_list() %&gt;% data.table () %&gt;% setnames(&quot;coding&quot;)#
  dt[coding %ilike% &quot;Latin&quot;][]
  dt[coding %ilike% &quot;cyr&quot;]
  dt[coding %ilike% &quot;ascii&quot;]
  dt1 &lt;- iconvlist() %&gt;% data.table () %&gt;% setnames(&quot;coding&quot;)#
  dt1[coding %ilike% &quot;ascii&quot;]
  dt1[coding %ilike% &quot;ASCII&quot;]
  dt1[coding %ilike% &quot;TRANSLIT&quot;]
  
  &quot;Montréal&quot; %&gt;% iconv(to=&quot;ASCII//TRANSLIT&quot;)
  
  c(&quot;шерсть&quot;,&quot;женщина&quot;, &quot;челюсть&quot;, &quot;Володимир Зеленський&quot;, &quot;Дмитрий Городничий&quot;) %&gt;% 
    sapply( translitFromCyrilic )
  
}</code></pre>
</div>
<div id="extracting-re-ordering-words-in-a-string" class="section level3" number="19.4.3">
<h3><span class="header-section-number">19.4.3</span> Extracting, re-ordering words in a string</h3>
<p><a href="https://stackoverflow.com/questions/55244680/extract-words-in-between-two-commas-in-r" class="uri">https://stackoverflow.com/questions/55244680/extract-words-in-between-two-commas-in-r</a></p>
<pre><code>
word &lt;- &#39;Fu Tien Mansion, Taikoo Shing, Hong Kong&#39;
# and I want to extract the word in between the two commas and concatenate it with the first word, what regex to use?
# to get this: &#39;Taikoo Shing Fu Tien Mansion&#39; 

# 1: sub  ----
sub(&quot;^([^,]+),\\s*([^,]+),.*&quot;, &quot;\\2 \\1&quot;, word)
#[1] &quot;Taikoo Shing Fu Tien Mansion&quot;

# 2: -----

x &lt;- base::strsplit(word, &quot;,&quot;)[[1]]
paste(x[2], x[1])

# 3 -----
paste(
    trimws( # Remove Leading/Trailing Whitespace
        sapply(strsplit(word,&quot;,&quot;), `[`, 2)
        ), 
    trimws(sapply(strsplit(word,&quot;,&quot;), `[`, 1))
    )</code></pre>
</div>
<div id="automatically-finding-removing-common-parts-in-strings" class="section level3" number="19.4.4">
<h3><span class="header-section-number">19.4.4</span> Automatically finding / removing common parts in strings</h3>
<p><a href="https://stackoverflow.com/questions/48701107/find-length-of-overlap-in-strings" class="uri">https://stackoverflow.com/questions/48701107/find-length-of-overlap-in-strings</a></p>
<pre><code>findStrOverlap &lt;- function(str1, str2, ignore.case = FALSE) { # , verbose = FALSE

  if(ignore.case) {
    str1 &lt;- tolower(str1);    str2 &lt;- tolower(str2)
  }
  if(nchar(str1) &lt; nchar(str2)) {
    x &lt;- str2;    str2 &lt;- str1;    str1 &lt;- x
  }
    
  x &lt;- strsplit(str2, &quot;&quot;)[[1L]]
  n &lt;- length(x)
  s &lt;- sequence(seq_len(n))
  s &lt;- split(s, cumsum(s == 1L))
  s &lt;- rep(list(s), n)

  for(i in seq_along(s)) {
    s[[i]] &lt;- lapply(s[[i]], function(x) {
      x &lt;- x + (i-1L)
      x[x &lt;= n]
    })
    s[[i]] &lt;- unique(s[[i]])
  }

  s &lt;- unlist(s, recursive = FALSE)
  s &lt;- unique(s[order(-lengths(s))])

  i &lt;- 1L
  len_s &lt;- length(s)
  while(i &lt; len_s) {
    lcs &lt;- paste(x[s[[i]]], collapse = &quot;&quot;)
    # if(verbose) cat(&quot;now checking:&quot;, lcs, &quot;\n&quot;)
    check &lt;- grepl(lcs, str1, fixed = TRUE)
    if(check) {
        # if(verbose) cat(paste0(&quot;Found: &#39;&quot;,lcs,&quot;&#39; (length =&quot;, nchar(lcs), &quot;) \n&quot;)) 
        break
    } else {
      i &lt;- i + 1L 
    }
  }
  return (lcs)
}

library(data.table)
dt &lt;- cansim::get_cansim(&quot;13-10-0810-01&quot;) %&gt;% setDT(dt) 
dt &lt;- data.table::data.table(
    GEO=c( # From CANSIM Table
        &quot;Newfoundland and Labrador, place of occurrence&quot;,
        &quot;Prince Edward Island, place of occurrence&quot;,     
        &quot;Nova Scotia, place of occurrence&quot;
))

aStr &lt;- dt$GEO
removeCommonStrPart &lt;- function(aStr) {
    str0 &lt;- findStrOverlap( aStr[1],  aStr[2]); str0
    str_replace(aStr, str0, &quot;&quot;)
}

dt[, GEO:=removeCommonStrPart(GEO)][]
#                         GEO
#                      &lt;char&gt;
#1: Newfoundland and Labrador
#2:      Prince Edward Island
#3:               Nova Scotia</code></pre>
</div>
<div id="useful-packages-1" class="section level3" number="19.4.5">
<h3><span class="header-section-number">19.4.5</span> Useful packages</h3>
<p><code>stringdist</code></p>
<pre><code>stringdist::stringdist(aStr[1],  aStr[2], method=&quot;lcs&quot;) # 29
stringdist::stringdistmatrix(dt$GEO, dt$GEO, method=&quot;lcs&quot;) %&gt;% as.data.table 
stringdist::stringdist(aStr[1],  aStr[2], method=&#39;qgram&#39;,q=2) # 37</code></pre>
<div id="not-as-useful-." class="section level4" number="19.4.5.1">
<h4><span class="header-section-number">19.4.5.1</span> Not as useful ….</h4>
<p><code>tidystringdist</code> - converts stringdist results into tibble. not optimized, very slow<br />
Better to use write code yourself to do that using data.table !</p>
</div>
<div id="language-detection-and-converting" class="section level4" number="19.4.5.2">
<h4><span class="header-section-number">19.4.5.2</span> Language Detection and converting</h4>
<p><a href="https://stackoverflow.com/questions/8078604/detect-text-language-in-r" class="uri">https://stackoverflow.com/questions/8078604/detect-text-language-in-r</a></p>
<pre><code># 2.1 ----
library(textcat)
# The textcat Package for n-Gram Based Text Categorization in R. Journal of Statistical Software, http://www.jstatsoft.org/v52/i06/

# 2.2 cld2 - best + archived cran ----

library(cld2) # the fastest of all
# library(cld3) #

if( F) {
  url &lt;- &quot;http://cran.us.r-project.org/src/contrib/Archive/cldr/cldr_1.1.0.tar.gz&quot;
  pkgFile&lt;-&quot;cldr_1.1.0.tar.gz&quot;
  download.file(url = url, destfile = pkgFile)
  install.packages(pkgs=pkgFile, type=&quot;source&quot;, repos=NULL)
  unlink(pkgFile)
  # or devtools::install_version(&quot;cldr&quot;,version=&quot;1.1.0&quot;)
  
  #usage
  library(cldr)
  demo(cldr)
}

# The cldr package in a previous answer is not any more available on CRAN and may be difficult to install. However, Google&#39;s (Chromium&#39;s) cld libraries are now available in R through other dedicated packages, cld2 and cld3. 

# 2.3 ----
# An approach in R would be to keep a text file of English words. I have several of these including one from http://www.sil.org/linguistics/wordlists/english/. After sourcing the .txt file you can use this file to match against each tweet. Something like:

lapply(tweets, function(x) EnglishWordComparisonList %in% x)


# 2.9 benchmarking - data! ----

data(reuters, package = &quot;kernlab&quot;) # a corpus of articles in english
reuters
length(reuters)
# [1] 40
sapply(reuters ,nchar)
# [1] 1311  800  511 2350  343  388 3705  604  254  239  632  607  867  240
# [15]  234  172  538  887 2500 1030  538 2681  338  402  563 2825 2800  947
# [29] 2156 2103 2283  604  632  602  642  892 1187  472 1829  367
text &lt;- unlist(reuters)

microbenchmark::microbenchmark(
  textcat = textcat::textcat(text),
  cld2 = cld2::detect_language(text),
  cld3 = cld3::detect_language(text),
  detect_from_sw = detect_from_sw(text,c(&quot;english&quot;,&quot;french&quot;,&quot;german&quot;)),
  times=10)


# Text analysis ----

# . reading / shaping text ----

# ???
library(textshape)
# https://github.com/trinker/textshape
# textshape is small suite of text reshaping and restructuring functions. Many of these functions are descended from tools in the qdapTools package. This brings reshaping tools under one roof with specific functionality of the package limited to text reshaping.
# This package is meant to be used jointly with the textclean package, which provides cleaning and text normalization functionality. Additionally, the textreadr package is designed to import various common text data sources into R for reshaping and cleaning.

library(textreadr)
# pdf_doc &lt;- system.file(&quot;docs/rl10075oralhistoryst002.pdf&quot;, package = &quot;textreadr&quot;)
# html_doc &lt;- system.file(&#39;docs/textreadr_creed.html&#39;, package = &quot;textreadr&quot;)
# 
#Some other implementations of text readers in R:
# tm
# readtext

&#39;https://github.com/trinker/textreadr/raw/master/inst/docs/pres.deb1.docx&#39; %&gt;%
  download() %&gt;%
  read_docx() %&gt;%
  head(3)
# &gt; Plagiarism detection ----  



# https://cran.r-project.org/web/packages/RNewsflow/vignettes/RNewsflow.html

library(RNewsflow)



#it also installs
library(fastmatch)
library(quanteda)
rnewsflow_dfm 

# https://cran.r-project.org/web/packages/corpustools/vignettes/corpustools.html

library(corpustools)
# corpustools: Managing, Querying and Analyzing Tokenized Text
# Provides text analysis in R, focusing on the use of a tokenized text format. 



# syuzhet: Extracts Sentiment and Sentiment-Derived Plot Arcs from Text
library(syuzhet)


# 5 &gt; Web crawling ----


# fuzzyjoin::misspellings ------
## Not run: 
library(rvest)
library(readr)
library(dplyr)
library(stringr)
library(tidyr)

u &lt;- &quot;https://en.wikipedia.org/wiki/Wikipedia:Lists_of_common_misspellings/For_machines&quot;
h &lt;- read_html(u)

misspellings &lt;- h %&gt;%
  html_nodes(&quot;pre&quot;) %&gt;%
  html_text() %&gt;%
  readr::read_delim(col_names = c(&quot;misspelling&quot;, &quot;correct&quot;), delim = &quot;&gt;&quot;,
                    skip = 1) %&gt;%
  mutate(misspelling = str_sub(misspelling, 1, -2)) %&gt;%
  unnest(correct = str_split(correct, &quot;, &quot;)) %&gt;%
  filter(Encoding(correct) != &quot;UTF-8&quot;)

## End(Not run)


## selectr

# https://cran.r-project.org/web/packages/selectr/
#   https://sjp.co.nz/projects/selectr
# 
#   selectr: Translate CSS Selectors to XPath Expressions
# Translates a CSS3 selector into an equivalent XPath expression. This allows us to use CSS selectors when working with the XML package as it can only evaluate XPath expressions. Also provided are convenience functions useful for using CSS selectors on XML nodes. This package is a port of the Python package &#39;cssselect&#39; (&lt;https://cssselect.readthedocs.io/&gt;).
# 
# Suggests: testthat, XML, xml2
# Reverse imports:  cliapp, ganalytics, Rcrawler, rvest, wikilake


##  Rcrawler

# Rcrawler: Web Crawler and Scraper
# Performs parallel web crawling and web scraping. It is designed to crawl, parse and store web pages to produce data that can be directly used for analysis application.
# https://cran.r-project.org/web/packages/Rcrawler
# https://github.com/salimk/Rcrawler/
#   RCrawler: An R package for parallel web crawling and scraping,  https://www.sciencedirect.com/science/article/pii/S2352711017300110?via%3Dihub
# 
# Version:  0.1.9-1
# Imports:  httr, xml2, data.table, foreach, doParallel, parallel, selectr, webdriver, callr, jsonlite
# Published:    2018-11-11
# 
# https://cran.r-project.org/web/packages/xml2/index.html</code></pre>
</div>
</div>
<div id="cleantexttext-clean-text" class="section level3" number="19.4.6">
<h3><span class="header-section-number">19.4.6</span> <code>cleanText(text)</code>: clean text</h3>
<div id="data-cleaning-tasks" class="section level4" number="19.4.6.1">
<h4><span class="header-section-number">19.4.6.1</span> Data cleaning Tasks:</h4>
<!-- https://github.com/trinker/textclean#dates -->
<ul>
<li>Stripping non relevant symbols, including spaces</li>
<li>Contractions and Incomplete words</li>
<li>abbreviations and slang</li>
<li>Kerning (“B O M B!”)</li>
<li>Elongations (looong)</li>
<li>converting from Non-ASCII, removing accents</li>
<li>cleaning Numbers: 99,999; 99.999; 99.99%; 99,99%; 2nd</li>
<li>normalizing words to a common form (eg Title)</li>
<li>fixing common typos</li>
</ul>
<!-- ```{r} -->
<!-- textInput("typedFreeText", "Type anything you want",  -->
<!--           # value=as.character(x),  -->
<!--           width="100%") -->
<!-- ``` -->
<!-- Example:  -->
</div>
<div id="example-1-1" class="section level4" number="19.4.6.2">
<h4><span class="header-section-number">19.4.6.2</span> Example 1:</h4>
<pre><code>
x &lt;- c(&quot;i like&quot;, &quot;&lt;p&gt;i want. &lt;/p&gt;. thet them ther .&quot;, &quot;I am ! that|&quot;, &quot;&quot;, NA, 
       &quot;&amp;quot;they&amp;quot; they,were there&quot;, &quot;.&quot;, &quot;   &quot;, &quot;?&quot;, &quot;3;&quot;, &quot;I like goud eggs!&quot;, 
       &quot;bi\xdfchen Z\xfcrcher&quot;, &quot;i 4like...&quot;, &quot;\\tgreat&quot;,  &quot;She said \&quot;yes\&quot;&quot;)
Encoding(x) &lt;- &quot;latin1&quot;
x &lt;- as.factor(x)


renderPrint(x)


### Problem diagnosis

check_text(x)
</code></pre>
<!-- # check_text(x) %>% print() %>% data.table() %>% xtable::xtable() -->
<!-- # strip(textclean::DATA$state, apostrophe.remove = TRUE) -->
</div>
</div>
<div id="convert-text-to-date-or-timestamp" class="section level3" number="19.4.7">
<h3><span class="header-section-number">19.4.7</span> Convert Text to Date or Timestamp</h3>
<pre><code>  
text2date &lt;- function(a) {
  
  a &lt;- a %&gt;% str_replace(&quot;XII&quot;, &quot;12&quot;) %&gt;%
    str_replace(&quot;XI&quot;, &quot;11&quot;)%&gt;%
    str_replace(&quot;IX&quot;, &quot;9&quot;)%&gt;%
    str_replace(&quot;X&quot;, &quot;10&quot;)%&gt;%
    str_replace(&quot;VIII&quot;, &quot;8&quot;)%&gt;%
    str_replace(&quot;VII&quot;, &quot;7&quot;)%&gt;%
    str_replace(&quot;VI&quot;, &quot;6&quot;)%&gt;%
    str_replace(&quot;IV&quot;, &quot;4&quot;)%&gt;%
    str_replace(&quot;V&quot;, &quot;5&quot;)%&gt;%
    str_replace(&quot;III&quot;, &quot;3&quot;)%&gt;%
    str_replace(&quot;II&quot;, &quot;2&quot;)%&gt;%
    str_replace(&quot;I&quot;, &quot;1&quot;)
  
  x &lt;-  dmy(a);
  if (is.na(x)) x &lt;-  dym(a)
  if (is.na(x)) x &lt;-  ymd(a)
  if (is.na(x)) x &lt;-  ydm(a)
  if (is.na(x)) x &lt;-  mdy(a)
  if (is.na(x)) x &lt;-  myd(a)
  if (is.na(x)) x &lt;-  ymd_hms(a)
  
  if (year(x)&gt;3000) x &lt;- x - years(100)
  return (x)
}

# text2dtDate
text2dtYYMMDD &lt;- function(a, text=F, date=F, timestamp=F) {
  x &lt;- text2date(a)
  dt &lt;- data.table(YY=year(x) %&gt;% as.integer(), MM=month(x)%&gt;% as.integer(), DD=day(x)%&gt;% as.integer() )
  # cols &lt;- 1:ncol(dt)
  # dt[, (cols):=lapply(.SD, as.integer), .SDcols=cols]
  if (text)  dt %&lt;&gt;% cbind(data.table(text=a))
  if (date)  dt %&lt;&gt;% cbind(data.table(date=x))
  if (timestamp)  dt %&lt;&gt;% cbind(data.table(timestamp=now(&quot;EST&quot;)))
  return(dt)
}


text2timestamp &lt;- function (a) {
  x &lt;-  ymd_hms (a);
  if (is.na(x)) x &lt;- ymd_hm (a)
  if (is.na(x)) x &lt;- ymd_h (a)
  if (is.na(x)) x &lt;- dmy_hms (a)
  if (is.na(x)) x &lt;- dmy_hm (a)
  if (is.na(x)) x &lt;- dmy_h (a)
  if (is.na(x)) x &lt;- mdy_hms (a)
  if (is.na(x)) x &lt;- mdy_hm (a)
  if (is.na(x)) x &lt;- mdy_h (a)
  if (is.na(x)) x &lt;- ydm_hms (a)
  if (is.na(x)) x &lt;- ydm_hm (a)
  if (is.na(x)) x &lt;- ydm_h (a) 
  if (is.na(x)) x &lt;- text2date (a)
  return(x)
}</code></pre>
</div>
<div id="transliteration-cleaning" class="section level3" number="19.4.8">
<h3><span class="header-section-number">19.4.8</span> Transliteration &amp; cleaning</h3>
<pre><code>  cleanPhrase &lt;- function(phrase)  {
  
  phrase %&gt;% 
    gsub(&quot;[^[:alnum:]]&quot;, &quot;&quot;, .) %&gt;%
    gsub(&quot;[^[A-Za-z0-9 -]]&quot;, &quot;&quot;, .) %&gt;%
    gsub(&quot; {2,}&quot;, &quot; &quot;, .)   %&gt;%
    iconv(to=&quot;ASCII//TRANSLIT&quot;)    %&gt;%
    textclean::replace_non_ascii  %&gt;%
    stringr::str_to_lower()
}

cleanWords &lt;- function(phrase)  {
  # cleanWords &lt;- function(phrase, changecase = c(&quot;no&quot;, &quot;upper&quot;, &quot;lower&quot;, &quot;title&quot;))  {
  phrase %&gt;% 
    # gsub(&quot;[^[:alnum:]]&quot;, &quot;&quot;, .) %&gt;%
    gsub(&quot;[^[A-Za-z0-9 -]]&quot;, &quot;&quot;, .) %&gt;%
    gsub(&quot; {2,}&quot;, &quot; &quot;, .) 
  # %&gt;%
  # iconv(to=&quot;ASCII//TRANSLIT&quot;)     
  # replace_non_ascii
  # str_to_lower()
  # ifelse(changecase == &quot;upper&quot;, str_to_upper(),
  #        ifelse (changecase == &quot;lower&quot;, str_to_lower(),
  #                ifelse(changecase == &quot;title&quot;, str_to_title(),
  #                       .)
  #        )
  # )
}

arrayTranslitFromCyrilic &lt;- function (slovo=&quot;Дмитрий Городничий&quot;) {
  c(
    slovo %&gt;% stri_trans_general(&quot;ukrainian-Latin/bgn&quot;)%&gt;% cleanWords,
    slovo %&gt;% stri_trans_general(&quot;Russian-Latin/bgn&quot;)%&gt;% cleanWords,
    slovo %&gt;% stri_trans_general(&quot;Bulgarian-Latin/bgn&quot;)%&gt;% cleanWords,
    slovo %&gt;% stri_trans_general(&quot;Belarusian-Latin/bgn&quot;)%&gt;% cleanWords,
    slovo %&gt;% stri_trans_general(&quot;Serbian-Latin/bgn&quot;)%&gt;% cleanWords,
    slovo %&gt;% stri_trans_general(&quot;cyrillic-latin&quot;)%&gt;% cleanWords
  )
}</code></pre>
</div>
</div>
</div>
<div id="statistical-tests-and-mixed-effects-analysis" class="section level1" number="20">
<h1><span class="header-section-number">20</span> Statistical tests and mixed-effects analysis</h1>
<p>TBA</p>
<!------------------------------------------------>
</div>
<div id="machine-learning-and-modeling-in-r" class="section level1" number="21">
<h1><span class="header-section-number">21</span> Machine Learning and Modeling in R</h1>
<div id="resources-4" class="section level2" number="21.1">
<h2><span class="header-section-number">21.1</span> Resources</h2>
<p>Below are most popular textbooks for Machine Learning and Modeling in R.<br />
Also see Discussion on Text Mining (<a href="https://smltar.com/" class="uri">https://smltar.com/</a> and <a href="https://www.tidytextmining.com/" class="uri">https://www.tidytextmining.com/</a>)</p>
<p>This one is used in many University Machine Learning courses (e.g. in University of Arizona and many others in USA):</p>
<p>An Introduction to Statistical Learning with Applications in R</p>
<p><a href="https://www.statlearning.com/" class="uri">https://www.statlearning.com/</a> ( <a href="https://web.stanford.edu/~hastie/ISLR2/ISLRv2_website.pdf" class="uri">https://web.stanford.edu/~hastie/ISLR2/ISLRv2_website.pdf</a> )</p>
<p>These are on Tidy models (most come with source codes): <a href="https://www.tidymodels.org/books/" class="uri">https://www.tidymodels.org/books/</a></p>
<p><a href="https://www.tmwr.org/" class="uri">https://www.tmwr.org/</a> - TIDY MODELS WITH R</p>
<p><a href="https://bookdown.org/max/FES" class="uri">https://bookdown.org/max/FES</a> - Feature Engineering &amp; Selection</p>
<p><a href="https://moderndive.com/" class="uri">https://moderndive.com/</a>. Statistical Inference via Data Science</p>
</div>
<div id="additional-references" class="section level2" number="21.2">
<h2><span class="header-section-number">21.2</span> Additional references</h2>
<p>References</p>
<ul>
<li><a href="https://www.cs.huji.ac.il/~shais/UnderstandingMachineLearning/understanding-machine-learning-theory-algorithms.pdf" class="uri">https://www.cs.huji.ac.il/~shais/UnderstandingMachineLearning/understanding-machine-learning-theory-algorithms.pdf</a></li>
</ul>
<p>-<a href="http://www2.math.uu.se/~thulin/mm/breiman.pdf" class="uri">http://www2.math.uu.se/~thulin/mm/breiman.pdf</a></p>
</div>
</div>
<div id="deep-learning-and-computer-vision" class="section level1" number="22">
<h1><span class="header-section-number">22</span> Deep Learning and Computer vision</h1>
<!-- with Tensorflow and Keras -->
<p>This discussion thread on Deep Learning with Tensorflow and Keras inR (<a href="https://tensorflow.rstudio.com/" class="uri">https://tensorflow.rstudio.com/</a>)</p>
<!-- A collection of tested codes and tutorials is here: -->
<p>Learn and Apply Artificial Neural Networks (aka Deep Learning) with Keras/Tensorflow in R/RStudio,
Using complete prewritten codes, your own data, and data.table package:</p>
<p><a href="https://github.com/gorodnichy/LA-R-KerasNN" class="uri">https://github.com/gorodnichy/LA-R-KerasNN</a></p>
<div id="deep-learning-using-the-h2o-package-in-r" class="section level4" number="22.0.0.1">
<h4><span class="header-section-number">22.0.0.1</span> Deep Learning using the h2o package in R</h4>
<p><a href="https://github.com/h2oai/Deep-Learning-with-h2o-in-R" class="uri">https://github.com/h2oai/Deep-Learning-with-h2o-in-R</a></p>
</div>
</div>
<div id="simulation-and-optimization" class="section level1" number="23">
<h1><span class="header-section-number">23</span> Simulation and Optimization</h1>
<p>There are a number of R packages developed for complex processes simulations and optimization problems, including simulation of queueing processes and resource or performance optimization problems</p>
<p>They were used in the research on predicting and optimizing Border Wait Time at Canadian border.
The codes for it and the research article are available at GCcode (search “border”) or by contacting <a href="index.html#contact">Dmitry Gorodnichy</a>.</p>
</div>
<div id="part-community-tutorials" class="section level1 unnumbered">
<h1 class="unnumbered">(PART) Community Tutorials</h1>
<p>R4GC community “Lunch and Learn Data Science with R” weekly meetups : (NB: you need to join the “Lunch and Learn Data Science with R” meetups group to access recordings of these sessions)</p>
</div>
<div id="gccode-101" class="section level1" number="24">
<h1><span class="header-section-number">24</span> GCCode 101</h1>
<p>title: “gccode101: working with GCCode”<br />
subtitle: (With focus on how to do it using RStudio)<br />
date: September 2020</p>
<blockquote>
<p>The information presented here includes only open public domain knowledge and does not include specific details related to operation of each GC department. Full tutorial and relatred Q&amp;A are available at <a href="https://gccode.ssc-spc.gc.ca/r4gc/resources/gccode101" class="uri">https://gccode.ssc-spc.gc.ca/r4gc/resources/gccode101</a></p>
</blockquote>
<div id="tldr" class="section level2" number="24.1">
<h2><span class="header-section-number">24.1</span> TL;DR</h2>
<ol style="list-style-type: decimal">
<li><p>[One time action per life time] Make sure you have RStudio and git installed on your local machine: eg from Anaconda - Ask your IT to help you.</p></li>
<li><p>[One time action per project] Go to GCCollab and create a new repo there (it can be left empty or just add README.md there) or select the existing one where you want to work on: eg <a href="https://gccode.ssc-spc.gc.ca/r4gc/gc-packages/packages101" class="uri">https://gccode.ssc-spc.gc.ca/r4gc/gc-packages/packages101</a></p></li>
<li><p>Generate Access Token (from Setting in left panel) or request one for a repo of which you are not the owner. It will look something like this: LNwVUF5YGnF-6x5fsnJ-</p></li>
<li><p>Open Windows PowerShell (or cmd), go to directory where you want to clone your repo (eg. cd C:_CODES_packages) and run this command: <code>git clone --progress https://oauth2:LNwVUF5YGnF-6x5fsnJ-@gccode.ssc-spc.gc.ca/r4gc/gc-packages/packages101 gc-packages101</code>. Close it - you wont need it again! You can check - your new directory contains .git/ folder ! (This is where your credentials for GCCollab are stored )</p></li>
<li><p>Open RStudio and create New project there. You have two options. In both cases, You’ll see the GIT button on top, once you finish and reload your project with RStudio, which means you are all set now and can start modifying / building your code!</p></li>
</ol>
<ul>
<li><p>Option A (To build a new R package): Choose New project -&gt; New Directory -&gt; New Project (with Name of your package, eg caPSES). Leave “Create a git directory box UNCHECKED. Once it is created, MOVE the entire content of this new package folder to the directory that you cloned in previous step (which contains .git/ folder), or vise versa just move .git/ folder from the cloned directory to your new package directory)</p></li>
<li><p>Option B (for any other project): Choose New project -&gt; Existing directory -&gt; point to your new cloned directory. That’s it.</p></li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>[Every time you make changes in project]</li>
<li>We recommend to always <code>pull</code> first (to avoid conflicts later)- from Git menu button</li>
<li>Make changes, open commit window, describe them, commit them, push them back to repo</li>
<li>Enjoy the rest of your day !</li>
</ol>
<p>More details from our fRiday’s Lunch and Learn discussions follow below.</p>
<!-- ## Connecting to GCCode  -->
<!-- *NB: The following instructions were derived for folks working on CBSA network, which allows access to CRAN, and had Anaconda installed.  -->
<!-- In OGD, installation process for these could be different. Please check with your IT.* -->
</div>
<div id="step-00-connecting-to-gccode-and-installing-required-soft." class="section level2" number="24.2">
<h2><span class="header-section-number">24.2</span> Step 00: Connecting to GCCode and installing required soft.</h2>
<p>“Connecting” means being able to pull a repository to your local (gc-network connected) machine, modify code there (in RStudio is the easiest), commit your changes, and pull it back to GCCode.
Before doing that you need the following programs installed on your local (gc-network connected) machine,</p>
<p>Below (*) indicates options that have been tested as most efficient
<!-- imho (i.e. for Dmitry) --></p>
<ul>
<li><p>R:</p>
<ul>
<li>from Anaconda
<!-- (old version of 2017) --></li>
<li>from CRAN*: R version 4.0.2 (2020-06-22): As of Sept 2020, we have right to install packages directly from CRAN. So you can do <code>library(installr);  updateR()</code></li>
</ul></li>
<li><p>RStudio:</p>
<ul>
<li>From Anaconda Prompt in new environment*: <code>conda create -n e2020.03.02-markdown_issues  mro-base rstudio</code> (replace mro-base rstudio<code>(replace</code>e2020.03.02-markdown_issues<code>with</code>YOUR_NEW_ENVIRONMENT_NAME`)
(This will create a shortcut (R) on desktop). - old: Version 1.1.456 – © 2009-2018 RStudio, Inc.</li>
</ul>
<!-- - From RStudio.com - we can't seem to be able to use it. -->
<!--   - Version 1.2 or 1.3 - has integration with Python and terminal for doing git with command lines -->
<!--   - Version 1.4 (Daily builds) - has WYSWYG editor for RMarkdowb --></li>
<li><p>Git:</p>
<ul>
<li>From Anaconda Prompt*: <code>conda install git</code> (or you can install in new environment e2020.03.02-markdown_issues)</li>
<li>From Anaconda Prompt: <code>conda install m2-git</code> (I installed in new environment e2020.07.21_mintty)
<ul>
<li>Q: where is git.exe actually located in c: drive ? <code>cd \</code> .</li>
<li>A: C:.21_mintty</li>
</ul></li>
<li>Check with IT - from web: <a href="https://git-scm.com/download/win" class="uri">https://git-scm.com/download/win</a> (Git for Windows Portable (“thumbdrive edition”) -
64-bit Git for Windows Portable. NB: it’s not accessible from CBSA network)</li>
</ul></li>
<li><p>Command windows (where you can run <code>git</code> commands):</p>
<ul>
<li>Windows <code>cmd</code> (it may or may not work there for your machine)</li>
<li>Anaconda prompt: this does not take all shell commands)</li>
<li><code>mintty</code>* ( from www.msys2.org), install: <code>conda install m2-base</code> (creates ~/anaconda3/Library/mingw64 directory, git.exe installed with m2-git will be placed in /bin there).
<ul>
<li>You can then run it from conda terminal: <code>mintty</code></li>
<li>Run <code>which git</code> (linux style from mintty) or <code>where git</code>(windows style from mintty) to find out path to <code>git.exe</code></li>
<li>Note how Linux-like file system is mapped to Windows’ one below:
<ul>
<li>$ where git: C:.exe</li>
<li>$ which git: /usr/bin/git</li>
</ul></li>
</ul></li>
<li><code>Windows PowerShell</code>: works well but does not take all linux commands , e.g it does not know <code>which/where</code>, <code>ls -a</code>)</li>
<li><code>RStudio Terminal</code> ** : it runs from git in your active environment from which you started RStudio. This allows to use different git.exe settings or executables.</li>
</ul></li>
<li><p>There are additional recommended packages for efficient source control and collaborative code development, which however can be learnt later, such as :</p>
<ul>
<li>renv</li>
<li>docker</li>
<li>devtools</li>
</ul></li>
</ul>
</div>
<div id="step-0-configuring-windows-git-and-gitlab-tokens" class="section level2" number="24.3">
<h2><span class="header-section-number">24.3</span> Step 0: Configuring Windows, Git and GitLab (tokens)</h2>
<p>1: Edit environment variable for your account (Search “env”) and set <code>HOME</code> to <code>/c/users/gxd006/</code> (replace <code>gxd006</code> with your user id). - This will become your home directory <code>~</code> for <code>mintty</code> and this is where your <code>.gitconfig</code> file will reside for <code>git</code> used in mintty! - needed for next step below</p>
<ul>
<li>Test it: <code>$ echo $HOME: /c/Users/gxd006/</code></li>
</ul>
<p>2: Edit <code>.gitconfig</code> file as follows (note, it maybe invisable to your OS. The easiest way to open/edit it is using RStudio. )</p>
<p>Alternatively, you can view/edit using build-in <code>vim</code> editor: <code>vim .gitconfig</code> or by running <code>git config --global -e</code>.
- Three <code>vim</code> main commands:
- ESC a: (insert text after cursor), - ESC: wq (save and exit), - ESC: q! (dont save and exit)</p>
<p>NB: if you run terminal from RStudio (rather than from mintty), then <code>git config --global -e</code> will open .gitconfig file from where it is found using <code>where git</code></p>
<pre><code>[user]
     name = Your Name
     email = your.email@cbsa-asfc.gc.ca
[http]
     proxy = &quot;http://proxy.omega.dce-eir.net:8080&quot;</code></pre>
<p>NB: <em>if you do not do that, you’ll be this getting error</em>:</p>
<pre><code>fatal: unable to access &#39;https://gccode.ssc-spc.gc.ca/super-koalas/shared-code/&#39;: Failed to connect to gccode.ssc-spc.gc.ca port 443: Timed out</code></pre>
<p>3: Decide how/where you will organize your gccode on your machine. This is how I converged (after many iterations) to organize my projects - see <a href="">file_structure.md</a></p>
<p>4: If you dont want to be typing your login id/password everytime you connect to GCCode (which I’m sure you dont:), read this article: <a href="https://knasmueller.net/gitlab-authenticate-using-access-token" class="uri">https://knasmueller.net/gitlab-authenticate-using-access-token</a>, and create your new personal access token there (which will look something like tjxrg3GyUQJJDMaA6LfHA)</p>
</div>
<div id="step-1-find-or-create-a-gitlab-project-you-want-to-contribute-to." class="section level2" number="24.4">
<h2><span class="header-section-number">24.4</span> Step 1: Find (or create) a GitLab project you want to contribute to.</h2>
<p>Lets say, you want to contribute to this project: <a href="https://gccode.ssc-spc.gc.ca/r4gc/resources/gccode101" class="uri">https://gccode.ssc-spc.gc.ca/r4gc/resources/gccode101</a></p>
<p>1.1: Go to ~/_CODES/GCCodes (this where you keep all your GCCodes projects),<br />
and run from <code>cmd</code> terminal, or Anaconda prompt, or <code>mintty</code>:</p>
<p>CORRECTION:
Q: Currently works from <code>conda</code> or <code>mintty</code> termminal only. How to make <code>git</code> calleable from Windows <code>cmd</code>? I changed PATH to add a directory to <code>C:\Users\gxd006\anaconda3\Library\bin</code> it did not help</p>
<pre><code>(base) C:\Users\gxd006&gt;which git
/usr/bin/git</code></pre>
<p>vs.</p>
<pre><code>H:\&gt;git
&#39;git&#39; is not recognized as an internal or external command,
operable program or batch file.</code></pre>
<p>From Anaconda prompt, or <code>mintty</code>:</p>
<pre><code>git clone --progress https://gccode.ssc-spc.gc.ca/r4gc/resources/gccode101 r4gc_gccode101</code></pre>
<p>or better (if you set a personal token - see Step 0.4 above)</p>
<pre><code>git clone --progress https://oauth2:tjxrg3GyUQJJDMaA6LfHA@gccode.ssc-spc.gc.ca/r4gc/resources/gccode101 r4gc_gccode101</code></pre>
<p>Now you can go to the created directory <code>r4gc_gccode101</code> and do something there, either from command line or directly from RStudio.</p>
<div id="using-command-line" class="section level3" number="24.4.1">
<h3><span class="header-section-number">24.4.1</span> 1.2 Using Command Line</h3>
<pre><code>Push a new file
cd existing_folder
touch README.md
git add README.md
git commit -m &quot;add README&quot;
git push -u origin master

Push an existing folder
cd existing_folder
git init
git remote add origin https://gccode.ssc-spc.gc.ca/r4gc/resources/gccode101
git add .
git commit -m &quot;Initial commit&quot;
git push -u origin master

Push an existing Git repository
cd existing_repo
git remote rename origin old-origin
git remote add origin https://gccode.ssc-spc.gc.ca/r4gc/resources/gccode101
git push -u origin --all
git push -u origin --tags
</code></pre>
</div>
<div id="in-rstudio" class="section level3" number="24.4.2">
<h3><span class="header-section-number">24.4.2</span> 1.2 In RStudio</h3>
<p>Recommended - see below</p>
</div>
</div>
<div id="step-2-using-branches-optional" class="section level2" number="24.5">
<h2><span class="header-section-number">24.5</span> Step 2: Using Branches (optional)</h2>
<p>It is recommended that you create your own branch for every project where you want to contribute (e.g. I made branch <code>ivi</code> for myself) and do everything there.
NB: you can also do it from RStudio or command line.</p>
<pre><code>git fetch
git checkout ivi 
git checkout master
git init .
touch some.txt
git add some.txt
git commit
git log

git status
git push
</code></pre>
<ul>
<li>For the rest of the presentation, we focus on using RStudio to do everything you need with GitLab in GCCode</li>
</ul>
<!-- * See tutorial of Alex Goncharov on learn more about what git it doing and how to use  if from command line  -->
</div>
<div id="step-3-gccoding-from-rstudio" class="section level2" number="24.6">
<h2><span class="header-section-number">24.6</span> Step 3: GCcoding from RStudio</h2>
<ul>
<li><p>Configure git: in Global options</p></li>
<li><p>Create new Project from existing directory (point to directory where you cloned GCCode repo)</p></li>
</ul>
<p>You’ll note that GIT button is visible now there ! (that’s because it knows that this directory is cloned from gitlab)</p>
<ul>
<li><p>Make some changes</p></li>
<li><p>Click on GIT button menu -&gt; commit</p></li>
<li><p>Check on file(s) you want to commit, Describe you change, click Commit, click push - Voila! Done.</p></li>
</ul>
</div>
<div id="related-gc-discussions-and-links" class="section level2" number="24.7">
<h2><span class="header-section-number">24.7</span> Related GC discussions and links:</h2>
<ul>
<li><p><a href="https://gcconnex.gc.ca/discussion/view/64885627/downloading-r-packages-within-goc" class="uri">https://gcconnex.gc.ca/discussion/view/64885627/downloading-r-packages-within-goc</a></p></li>
<li><p><a href="https://gcconnex.gc.ca/discussion/view/50817255/publishing-gc-code" class="uri">https://gcconnex.gc.ca/discussion/view/50817255/publishing-gc-code</a></p></li>
<li><p><a href="https://github.com/canada-ca/open-source-logiciel-libre" class="uri">https://github.com/canada-ca/open-source-logiciel-libre</a></p></li>
<li><p><a href="https://canada-ca.github.io/open-source-logiciel-libre/en/guides/publishing-open-source-code.html" class="uri">https://canada-ca.github.io/open-source-logiciel-libre/en/guides/publishing-open-source-code.html</a></p></li>
<li><p><a href="https://isthisblockedinmydepartment.ca/" class="uri">https://isthisblockedinmydepartment.ca/</a></p></li>
<li><p><a href="https://environments.rstudio.com/shared.html" class="uri">https://environments.rstudio.com/shared.html</a></p></li>
</ul>
</div>
</div>
<div id="packages-101" class="section level1" number="25">
<h1><span class="header-section-number">25</span> Packages 101</h1>
<p>title: “How to convert your functions to package(s)”</p>
<!-- title: "Making your codes re-usable using R packages " -->
<p>subtitle: “GC Lunch and Learn: R packages 101”
author: Dmitry Gorodnichy and Joseph Stinziano
gitlab: <a href="https://gccode.ssc-spc.gc.ca/r4gc/gc-packages/packages101" class="uri">https://gccode.ssc-spc.gc.ca/r4gc/gc-packages/packages101</a>
date: “March -June 2021”
Taken from: <a href="https://gccode.ssc-spc.gc.ca/r4gc/gc-packages/packages101/-/blob/master/packages101.Rmd" class="uri">https://gccode.ssc-spc.gc.ca/r4gc/gc-packages/packages101/-/blob/master/packages101.Rmd</a></p>
<div id="resources-5" class="section level2" number="25.1">
<h2><span class="header-section-number">25.1</span> Resources</h2>
<div id="gc-groups-and-repos" class="section level3" number="25.1.1">
<h3><span class="header-section-number">25.1.1</span> GC groups and repos</h3>
<ul>
<li>Discussions:
<ul>
<li><a href="https://gccollab.ca/groups/profile/7391537/enuse-rfruse-r" class="uri">https://gccollab.ca/groups/profile/7391537/enuse-rfruse-r</a></li>
<li><a href="https://gccollab.ca/groups/profile/7855030/enfriday-lunch-and-learn-r-meet-upsfr" class="uri">https://gccollab.ca/groups/profile/7855030/enfriday-lunch-and-learn-r-meet-upsfr</a></li>
</ul></li>
<li>Codes:
<ul>
<li>Packages101 repo: <a href="https://gccode.ssc-spc.gc.ca/r4gc/gc-packages/packages101" class="uri">https://gccode.ssc-spc.gc.ca/r4gc/gc-packages/packages101</a></li>
<li>Related codes and resources: <a href="https://gccode.ssc-spc.gc.ca/r4gc" class="uri">https://gccode.ssc-spc.gc.ca/r4gc</a></li>
</ul></li>
</ul>
</div>
<div id="related-tutorials" class="section level3" number="25.1.2">
<h3><span class="header-section-number">25.1.2</span> Related tutorials</h3>
<ul>
<li><a href="https://r-pkgs.org/" class="uri">https://r-pkgs.org/</a>
<ul>
<li><a href="https://r-pkgs.org/vignettes.html" class="uri">https://r-pkgs.org/vignettes.html</a></li>
</ul></li>
<li><a href="https://fanwangecon.github.io/R4Econ/support/development/fs_packaging.pdf" class="uri">https://fanwangecon.github.io/R4Econ/support/development/fs_packaging.pdf</a></li>
<li><a href="https://rstudio4edu.github.io/rstudio4edu-book/data-pkg.html" class="uri">https://rstudio4edu.github.io/rstudio4edu-book/data-pkg.html</a> - <a href="https://github.com/rstudio4edu/rstudio4edu-book" class="uri">https://github.com/rstudio4edu/rstudio4edu-book</a></li>
<li><a href="http://www.danieldsjoberg.com/writing-R-packages" class="uri">http://www.danieldsjoberg.com/writing-R-packages</a> - github.com/ddsjoberg/writing-R-packages</li>
</ul>
</div>
<div id="how-to-contribute-1" class="section level3" number="25.1.3">
<h3><span class="header-section-number">25.1.3</span> How to contribute</h3>
<ol style="list-style-type: decimal">
<li><p>Anyone: Fork Packages101 repo - modify - commit changes - push - submit request to merge</p></li>
<li><p>Members of r4gc group:</p></li>
</ol>
<p>A token is generated to allow you to push/pull Packages101 repo.<br />
Use this line to push/pull from Packages101 repo:</p>
<pre><code>git clone --progress https://oauth2:tjxrg3GyUQJJDMaA6LfHA@gccode.ssc-spc.gc.ca/r4gc/gc-packages/packages101 r4gc_packages101</code></pre>
<p>=======</p>
</div>
<div id="r-script-to-start" class="section level3" number="25.1.4">
<h3><span class="header-section-number">25.1.4</span> * R script to start:</h3>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">create</span>(<span class="st">&quot;rCanada&quot;</span>) <span class="do">## if you are  in /my_package</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">create</span>(<span class="st">&quot;../../rCanada&quot;</span>) <span class="do">## will it erase it,if I lready have it?</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="co">#or usethis::create_package(&quot;../r4gc/packages/rCanada2&quot;)</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(roxygen2)</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="do">## library(testthis).&lt;- we dont use this!Dont confuse it with library(testthat) ??</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(testthat) <span class="do">## do we need it?</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usethis)</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="do">## https://github.com/r-lib/usethis</span></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_testthat</span>()</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a><span class="do">## use_testthat()</span></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a><span class="fu">use_news_md</span>()</span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a><span class="fu">use_test</span>(<span class="st">&quot;iviDT&quot;</span>)</span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a><span class="fu">use_data</span>(x, y)</span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a><span class="fu">use_vignette</span>(<span class="at">name=</span><span class="st">&quot;my_vignettes&quot;</span>) <span class="co">#</span></span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a><span class="fu">use_vignette</span>(<span class="at">name=</span><span class="st">&quot;data_linking&quot;</span>)</span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a><span class="fu">use_package</span>(<span class="st">&quot;data.table&quot;</span>)</span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a><span class="do">## &gt; use_package(&quot;data.table&quot;)</span></span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a><span class="do">## √ Adding &#39;data.table&#39; to Imports field in DESCRIPTION</span></span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a><span class="do">## * Refer to functions with `data.table::fun()`</span></span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-37"><a href="#cb48-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb48-38"><a href="#cb48-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb48-39"><a href="#cb48-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-40"><a href="#cb48-40" aria-hidden="true" tabindex="-1"></a><span class="fu">use_package</span>(<span class="st">&quot;magrittr&quot;</span>)</span>
<span id="cb48-41"><a href="#cb48-41" aria-hidden="true" tabindex="-1"></a><span class="fu">use_package</span>(<span class="st">&quot;data.table&quot;</span>)</span>
<span id="cb48-42"><a href="#cb48-42" aria-hidden="true" tabindex="-1"></a><span class="fu">use_package</span>(<span class="st">&quot;lubridate&quot;</span>, <span class="at">type=</span><span class="st">&quot;Imports&quot;</span>)  <span class="do">## how about order ?! lubridate must be after data.table !</span></span>
<span id="cb48-43"><a href="#cb48-43" aria-hidden="true" tabindex="-1"></a><span class="fu">use_package</span>(<span class="st">&quot;stringr&quot;</span>)</span>
<span id="cb48-44"><a href="#cb48-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-45"><a href="#cb48-45" aria-hidden="true" tabindex="-1"></a><span class="fu">use_package</span>(<span class="st">&quot;IVIM&quot;</span>)</span>
<span id="cb48-46"><a href="#cb48-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-47"><a href="#cb48-47" aria-hidden="true" tabindex="-1"></a><span class="do">## To update .Rd files in ./man, run:</span></span>
<span id="cb48-48"><a href="#cb48-48" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">document</span>()</span>
<span id="cb48-49"><a href="#cb48-49" aria-hidden="true" tabindex="-1"></a><span class="do">## Warning: The existing &#39;NAMESPACE&#39; file was not generated by roxygen2, and will not be overwritten.</span></span>
<span id="cb48-50"><a href="#cb48-50" aria-hidden="true" tabindex="-1"></a><span class="do">## So delete it, and then it will be created</span></span></code></pre></div>
<div id="to-be-discussed" class="section level4" number="25.1.4.1">
<h4><span class="header-section-number">25.1.4.1</span> To be discussed</h4>
<p>Q:
When I Clean and Rebuid:
????!
** testing if installed package can be loaded from final location</p>
<p>?????? C:/Users/gxd006/DOWNLO<sub>1/R-40</sub>1.2 /etc/Renviron.site ?? May 12 19:25:09
Warning: replacing previous import ‘data.table::month’ by ‘lubridate::month’ when loading ‘IVIM’</p>
</div>
</div>
</div>
<div id="setup" class="section level2" number="25.2">
<h2><span class="header-section-number">25.2</span> * Setup</h2>
<p><em>This is what you already have: </em><br />
- “Original”” folder, with no specific structure,
with R and Rmd files that contain:
a) functions that that you want to be re-used by others (and yourself many months later!).<br />
- They are tested and test codes are included in <code>if(F)</code> or in separate .Rmd, or, even better, in interactive Shiny App (eg <a href="https://rCanada.shinyapp.io/covid" class="uri">https://rCanada.shinyapp.io/covid</a>)
- Good idea to be have them in form that can be sourced: <code>source("caCovid.R"); source("iviBase.R")</code></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>functions and other codes that are not (yet) ready for re-use.</li>
</ol>
<p><a href="https://gccode.ssc-spc.gc.ca/r4gc/codes/tracking-covid-data" class="uri">https://gccode.ssc-spc.gc.ca/r4gc/codes/tracking-covid-data</a>
- caCovid.R
- iviBase.R
- … common.R, plot.R, etc</p>
<p><em>This is what you want to get:</em>
- Package folder (or several folders).
- GCCode/r4gc/packages/rCanada
- GCCode/r4gc/packages/IVI
<a href="https://gccode.ssc-spc.gc.ca/gorodnichy/rCanada" class="uri">https://gccode.ssc-spc.gc.ca/gorodnichy/rCanada</a></p>
<div id="ways-to-do-it" class="section level4" number="25.2.0.1">
<h4><span class="header-section-number">25.2.0.1</span> Ways to do it:</h4>
<p>You can create it in two ways:</p>
<div id="from-new-project" class="section level6" number="25.2.0.1.0.1">
<h6><span class="header-section-number">25.2.0.1.0.1</span> From New Project</h6>
<p>Either way RStudio will initialize and launch your new project.
In the second way, it also puts .gitignore</p>
<ol style="list-style-type: decimal">
<li>In RStudio -&gt; New Project -&gt; New Direcory -&gt;R package -&gt; package name: caPSES</li>
</ol>
<p>NB: there are many templates. Choose basic (“R package) and create in folder /my_packages
NB: If you have .R codes that are already source-able, attached them with”Add”button (one at a time), or you can copy them into /R folder later</p>
<p>note from Hadley: <a href="https://r-pkgs.org/workflows101.html" class="uri">https://r-pkgs.org/workflows101.html</a></p>
<p>Call usethis::create_package(“path/to/package/pkgname”).
Or, In RStudio, do File &gt; New Project &gt; New Directory &gt; R Package. This ultimately calls usethis::create_package(), so really there’s just one way.</p>
<p>Don’t use package.skeleton() to create a package. Because this function comes with R, you might be tempted to use it, but it creates a package that immediately throws errors with R CMD build.</p>
</div>
<div id="from-script" class="section level6" number="25.2.0.1.0.2">
<h6><span class="header-section-number">25.2.0.1.0.2</span> From script</h6>
<ol start="2" style="list-style-type: decimal">
<li>Run from any R, Rmd window or R console the command below</li>
</ol>
<p>NB: output from</p>
<pre><code>&gt; devtools::create(&quot;../r4gc/packages/rCanada&quot;)
&gt; #or usethis::create_package(&quot;../r4gc/packages/rCanada2&quot;)

New project &#39;rCanada&#39; is nested inside an existing project &#39;../r4gc/packages/&#39;, which is rarely a good idea.
If this is unexpected, the here package has a function, `here::dr_here()` that reveals why &#39;../r4gc/packages/&#39; is regarded as a project.
Do you want to create anyway?

1: Yes
2: Absolutely not
3: Nope

Selection: 1
√ Creating &#39;../r4gc/packages/rCanada/&#39;
√ Setting active project to &#39;C:/Users/gxd006/Downloads/_CODES/GCCode/r4gc/packages/rCanada&#39;
√ Creating &#39;R/&#39;
√ Writing &#39;DESCRIPTION&#39;
Package: rCanada
Title: What the Package Does (One Line, Title Case)
Version: 0.0.0.9000
Authors@R (parsed):
    * First Last &lt;first.last@example.com&gt; [aut, cre] (YOUR-ORCID-ID)
Description: What the package does (one paragraph).
License: `use_mit_license()`, `use_gpl3_license()` or friends to
    pick a license
Encoding: UTF-8
LazyData: true
Roxygen: list(markdown = TRUE)
RoxygenNote: 7.1.1
√ Writing &#39;NAMESPACE&#39;
√ Writing &#39;rCanada.Rproj&#39;
√ Adding &#39;^rCanada\\.Rproj$&#39; to &#39;.Rbuildignore&#39;
√ Adding &#39;.Rproj.user&#39; to &#39;.gitignore&#39;
√ Adding &#39;^\\.Rproj\\.user$&#39; to &#39;.Rbuildignore&#39;
√ Opening &#39;C:/Users/gxd006/Downloads/_CODES/GCCode/r4gc/packages/rCanada/&#39; in new RStudio session
√ Setting active project to &#39;&lt;no active project&gt;&#39;</code></pre>
</div>
</div>
</div>
<div id="overall-workflow" class="section level2" number="25.3">
<h2><span class="header-section-number">25.3</span> * Overall Workflow</h2>
<div id="copy-needed-codes-from-my_codes-to-r-directory" class="section level4" number="25.3.0.1">
<h4><span class="header-section-number">25.3.0.1</span> .. Copy needed codes from MY_CODES to R directory</h4>
<ul>
<li>Copy a function</li>
</ul>
<pre><code>dt.replaceAwithB &lt;- function(dt, col, a, b) {
  dt[get(col)==a, (col):=b]; 
}</code></pre>
<ul>
<li>Insert roxigen skeleton (from magic wand menu) and add description
NB: you may need to manually insert @ import and @ export</li>
</ul>
</div>
<div id="section" class="section level3" number="25.3.1">
<h3><span class="header-section-number">25.3.1</span> </h3>
<p>no need to Load All?
Always start from “Clean and rebuild”
Then Check</p>
</div>
</div>
<div id="rbuildignore" class="section level2" number="25.4">
<h2><span class="header-section-number">25.4</span> * .Rbuildignore</h2>
<p>^.*.Rproj$
^.Rproj.user$
MY_CODES incorrect
^MY_CODES$ correct
^MY_DATASETS$
^LICENSE.md$</p>
</div>
<div id="license-use_mit_license" class="section level2" number="25.5">
<h2><span class="header-section-number">25.5</span> * License: <code>use_mit_license()</code></h2>
<p>License: MIT + file LICENSE</p>
</div>
<div id="description-9" class="section level2" number="25.6">
<h2><span class="header-section-number">25.6</span> * DESCRIPTION</h2>
</div>
<div id="namespace" class="section level2" number="25.7">
<h2><span class="header-section-number">25.7</span> * NAMESPACE</h2>
<p><a href="https://r-pkgs.org/namespace.html" class="uri">https://r-pkgs.org/namespace.html</a></p>
<pre><code>use_package(&quot;data.table&quot;)
## &gt; use_package(&quot;data.table&quot;)
## √ Adding &#39;data.table&#39; to Imports field in DESCRIPTION
## * Refer to functions with `data.table::fun()`</code></pre>
<p>However this does notchange NAMESPACE ! Who changes is it?
is that devtools::document() ???</p>
<p>Generated by roxygen2: do not edit by hand</p>
<pre><code>export()
export(addDerivatives)
export(extractMostInfectedToday)
export(readCovidUofT.csv)
importFrom(lubridate,dmy)
importFrom(stringr,str_replace)</code></pre>
<p>I deleted NAMESPACE so that roxigen can generate it!
then added manually there . Not sure that’s theway to do it !</p>
<pre><code>import(data.table)
import(ggplot2)
import(lubridate)
import(magrittr)
import(IVIM)</code></pre>
<p>It Worked !</p>
<p>If you are using just a few functions from another package, the recommended option is to note the package name in the Imports: field of the DESCRIPTION file and call the function(s) explicitly using ::, e.g., pkg::fun(). Alternatively, though no longer recommended due to its poorer readability, use <span class="citation">@importFrom</span>, e.g., <span class="citation">@importFrom</span> pgk fun, and call the function(s) without ::.</p>
</div>
<div id="examples-and-tests" class="section level2" number="25.8">
<h2><span class="header-section-number">25.8</span> * Examples and tests</h2>
<div id="in-main-file-in-r-folder" class="section level4" number="25.8.0.1">
<h4><span class="header-section-number">25.8.0.1</span> .. In main file in /R folder</h4>
<pre><code>#&#39; @examples</code></pre>
<p>Some could be such :</p>
<pre><code>#&#39; \dontrun{}</code></pre>
</div>
<div id="in-tests-folder" class="section level4" number="25.8.0.2">
<h4><span class="header-section-number">25.8.0.2</span> .. In /tests folder</h4>
<pre><code>&gt; use_testthat()

√ Setting active project to &#39;C:/Users/gxd006/Downloads/_CODES/GCCode/r4gc/packages/IVIM&#39;
√ Adding &#39;testthat&#39; to Suggests field in DESCRIPTION
√ Setting Config/testthat/edition field in DESCRIPTION to &#39;3&#39;
√ Creating &#39;tests/testthat/&#39;
√ Writing &#39;tests/testthat.R&#39;
* Call `use_test()` to initialize a basic test file and open it for editing.
Warning messages:
1: In readLines(f, n) :
  incomplete final line found on &#39;C:/Users/gxd006/Downloads/_CODES/GCCode/r4gc/packages/IVIM/DESCRIPTION&#39;
...
  incomplete final line found on &#39;C:/Users/gxd006/Downloads/_CODES/GCCode/r4gc/packages/IVIM/DESCRIPTION&#39;
&gt; use_vignette()
Error in check_vignette_name(name) : 
  argument &quot;name&quot; is missing, with no default</code></pre>
</div>
</div>
<div id="in-my_codes" class="section level2" number="25.9">
<h2><span class="header-section-number">25.9</span> .. in MY_CODES</h2>
<p>Provide as .R, Rmd or shiny</p>
</div>
<div id="testthat" class="section level2" number="25.10">
<h2><span class="header-section-number">25.10</span> * testthat</h2>
<p><a href="https://testthat.r-lib.org/" class="uri">https://testthat.r-lib.org/</a></p>
</div>
<div id="documentation" class="section level2" number="25.11">
<h2><span class="header-section-number">25.11</span> * Documentation</h2>
<p>devtools::document()</p>
<p><a href="https://kbroman.org/pkg_primer/pages/docs.html" class="uri">https://kbroman.org/pkg_primer/pages/docs.html</a></p>
<pre><code>#&#39; For more details see the help vignette:
#&#39; \code{vignette(&quot;help&quot;, package = &quot;mypkg&quot;)}

or 

\href{../doc/help.html}{\code{vignette(&quot;help&quot;, package = &quot;mypkg&quot;)}}
</code></pre>
</div>
<div id="vignettes" class="section level2" number="25.12">
<h2><span class="header-section-number">25.12</span> * Vignettes</h2>
<pre><code>&gt; use_vignette(name=&quot;my_vignettes&quot;)

√ Adding &#39;knitr&#39; to Suggests field in DESCRIPTION
√ Setting VignetteBuilder field in DESCRIPTION to &#39;knitr&#39;
√ Adding &#39;inst/doc&#39; to &#39;.gitignore&#39;
√ Creating &#39;vignettes/&#39;
√ Adding &#39;*.html&#39;, &#39;*.R&#39; to &#39;vignettes/.gitignore&#39;
√ Adding &#39;rmarkdown&#39; to Suggests field in DESCRIPTION
√ Writing &#39;vignettes/my_vignettes.Rmd&#39;
* Modify &#39;vignettes/my_vignettes.Rmd&#39;</code></pre>
<p>I later renamed my first vignette to intro.Rmd - manually</p>
<p><a href="https://bookdown.org/yihui/rmarkdown-cookbook/package-vignette.html" class="uri">https://bookdown.org/yihui/rmarkdown-cookbook/package-vignette.html</a></p>
</div>
<div id="delivering-package" class="section level2" number="25.13">
<h2><span class="header-section-number">25.13</span> Delivering package</h2>
<ul>
<li>[Easiest way] Put binary in package repo. Then you can install it simply using <code>install.packages("IVIM", repos = "https://gccode.ssc-spc.gc.ca/r4gc/gc-packages/IVIM/-/blob/master/versions/IVIM_0.0.0.9000.tar.gz")</code>
<ul>
<li>this .tar ball is obtained by running <code>devtools::build()</code> or <code>devtools::check()</code> which will place it in “../yourRPackageProject” directory.</li>
</ul></li>
<li>[CONFIRM THIS!] Put source in github. Then people will be able to install using <code>devtools::install_github("https://gccode.ssc-spc.gc.ca/r4gc/gc-packages/IVIM")</code></li>
</ul>
</div>
<div id="packaging-and-publishing-w.-pkgdown" class="section level2" number="25.14">
<h2><span class="header-section-number">25.14</span> Packaging and publishing w. <code>pkgdown</code></h2>
<p><a href="https://fanwangecon.github.io/R4Econ/support/development/fs_packaging.pdf" class="uri">https://fanwangecon.github.io/R4Econ/support/development/fs_packaging.pdf</a></p>
<div id="appendix-various-possible-errors-and-problems" class="section level4" number="25.14.0.1">
<h4><span class="header-section-number">25.14.0.1</span> Appendix: Various possible Errors and problems</h4>
<div id="errors-in-using-usethisuse_testthat" class="section level6" number="25.14.0.1.0.1">
<h6><span class="header-section-number">25.14.0.1.0.1</span> Errors in using usethis::use_testthat()</h6>
<p>Problem:</p>
<pre><code>
&gt; usethis::use_vignette(name=&quot;howtoCovid&quot;)
Error in read.dcf(con) : 
  Line starting &#39;analyze and visualiz ...&#39; is malformed!
&gt; </code></pre>
<p>Solution:<br />
<a href="https://stackoverflow.com/questions/59303030/devtools-error-in-read-dcfpath-desc-line-starting-this-corresponds-to" class="uri">https://stackoverflow.com/questions/59303030/devtools-error-in-read-dcfpath-desc-line-starting-this-corresponds-to</a></p>
<p>Corrections from <a href="https://gccode.ssc-spc.gc.ca/r4gc/gc-packages/IVIM/-/tree/useR-dev/" class="uri">https://gccode.ssc-spc.gc.ca/r4gc/gc-packages/IVIM/-/tree/useR-dev/</a></p>
</div>
</div>
</div>
<div id="optional-rtools" class="section level2" number="25.15">
<h2><span class="header-section-number">25.15</span> (optional) Rtools</h2>
<p>NBL This is not required</p>
<p><a href="https://cran.r-project.org/bin/windows/Rtools/" class="uri">https://cran.r-project.org/bin/windows/Rtools/</a></p>
<p><a href="http://web.mit.edu/insong/www/pdf/rpackage_instructions.pdf" class="uri">http://web.mit.edu/insong/www/pdf/rpackage_instructions.pdf</a></p>
<div id="package_initialization_script.r" class="section level4" number="25.15.0.1">
<h4><span class="header-section-number">25.15.0.1</span> package_initialization_script.R</h4>
<pre><code>
 ## package_initialization_script.R
 
 library(devtools)

devtools::create(&quot;rCanada&quot;) ## if you are  in /my_package
devtools::create(&quot;../../rCanada&quot;) ## will it erase it,if I lready have it?
&gt; #or usethis::create_package(&quot;../r4gc/packages/rCanada2&quot;)

library(roxygen2)
## library(testthis). What&#39;s the difference from library(testthat) ??
library(testthat) ## do we need it?
## Attaching package: ‘testthat’
#
## The following object is masked from ‘package:devtools’:
#
##   test_file
#
## The following objects are masked from ‘package:magrittr’:
#
##   equals, is_less_than, not


usethis::use_testthat() ## from usethis, which is callsed from devtools


use_vignette(name=&quot;my_vignettes&quot;) #
use_vignette(name=&quot;data_linking&quot;)


use_package(&quot;data.table&quot;)
use_package(&quot;magrittr&quot;)
use_package(&quot;data.table&quot;)
use_package(&quot;lubridate&quot;, type=&quot;Imports&quot;)  ## how about order ?! lubridate must be after data.table !
use_package(&quot;stringr&quot;)</code></pre>
</div>
</div>
</div>
<div id="r101-building-covid-19-tracker-app-from-scratch" class="section level1" number="26">
<h1><span class="header-section-number">26</span> R101: Building COVID-19 Tracker App from scratch</h1>
<p>A nine-session R101 tutorial for beginners was run in 2020.
The following page provides codes and video-recording for this tutorial: <a href="https://ivi-m.github.io/R-Ottawa/101.html" class="uri">https://ivi-m.github.io/R-Ottawa/101.html</a></p>
<!-- One day they will be moved here (maybe) -->
<!-- https://open-canada.github.io/UseR/learn2020.html -->
<p>Season 1 (Summer 2020)<br />
Topic: “Building COVID Web App from scratch”<br />
Sub-topic: “Doing Data Science with R: Computer Science way”<br />
Dates: April - June 2020</p>
<p>Summary:</p>
<p>In this first Season of R101 training, we showed how to build from scratch AI and Data Science tools using R in RStudio. You can see the final result from this tutorial here: <a href="https://itrack.shinyapps.io/covid/us.Rmd" class="uri">https://itrack.shinyapps.io/covid/us.Rmd</a></p>
</div>
<div id="part-community-databases" class="section level1 unnumbered">
<h1 class="unnumbered">(PART) Community Databases</h1>
</div>
<div id="gc-data" class="section level1" number="27">
<h1><span class="header-section-number">27</span> Accessing Open Data Canada databases</h1>
<p>This section provides code snippets to read, process and visualize various Open Canada databases of high common interest to the GC community.
Where possible, an App is developed to help visualizing and understanding the data.
See also <a href="#gc-apps">Shiny Apps</a> section of this book.</p>
<!-- ## Ways to access Open Canada Data -->
<div id="with-curl-fread-readxls" class="section level2" number="27.1">
<h2><span class="header-section-number">27.1</span> With curl, fread, readxls</h2>
<p>Many databases can be accessed via direct link to an .csv, .zip, .xls file, using the code shown below.
<!-- Note, the preferred functions. --></p>
<pre><code># txt
dt &lt;- data.table::fread (&quot;https://health-infobase.canada.ca/src/data/covidLive/vaccination-coverage-byAgeAndSex-overTimeDownload.csv&quot;) 

# compressed Rds
curl::curl_download(&quot;https://github.com/open-canada/datasets/raw/main/statcan/13100810-20211206.Rds&quot;, &quot;13100810-20211206.Rds&quot;)
dt &lt;- readRDS(&quot;13100810-20211206.Rds&quot;) 

# All other archives
download.file(&quot;https://www150.statcan.gc.ca/n1/tbl/csv/13100810-eng.zip&quot;, temp) # or using curl::curl_download()
dt &lt;- fread(unzip(temp, files = &quot;13100810.csv&quot;))
rm(temp)
</code></pre>
</div>
<div id="with-cansim-package" class="section level2" number="27.2">
<h2><span class="header-section-number">27.2</span> With cansim package</h2>
<p>Most Statistics Canada databases can be accessed using <code>cansim</code> package with a code like the one shown below.</p>
<p>See <a href="">L&amp;L of 2 Dec 2021 dedicated to CAMSIM</a></p>
<p>Note that when StatCan website is unavailable however (which is often the case), you wont be able to run any <code>cansim</code> commands.
Hence, most poupular StatCan datasets, such as those we use for R training and which we building Apps, are also cached at <a href="https://github.com/open-canada/datasets" class="uri">https://github.com/open-canada/datasets</a>, where they can be accessed using the method described above.</p>
</div>
<div id="via-api-using-libraryckanr" class="section level2" number="27.3">
<h2><span class="header-section-number">27.3</span> Via API using <code>library(ckanr)</code></h2>
<p>Many databases can also be accessed using <code>ckanr</code> package (e.g. Open Ontario Database), as shown in the code below.</p>
<p>See <a href="https://github.com/open-canada/lunch_and_learn_opengov/">L&amp;L in June dedicated to CKAN</a> to learn more.
See also <a href="https://rpubs.com/Jamesmurray1/594450">this blog</a></p>
<!-- 

library(ckanr)
library(data.table) 

ckanr_setup(url = "https://data.ontario.ca/")
resource_search(q = "name:Vaccin")$results

res <-resource_show(id ="274b819c-5d69-4539-a4db-f2950794138c")
res$url
destfile <- "Hospitalizations by vaccination status.csv"
curl::curl_download(res$url, destfile)

[[2]]
<CKAN Resource> e760480e-1f95-4634-a923-98161cfb02fa 
  Name: COVID-19 cases in hospital and ICU by OH region|
[[3]]
<CKAN Resource> 274b819c-5d69-4539-a4db-f2950794138c 
  Name: Hospitalizations by vaccination status


[[4]]
<CKAN Resource> e760480e-1f95-4634-a923-98161cfb02fa 
  Name: COVID-19 cases in hospital and ICU by OH region| Cas de COVID-19 dans les hôpitaux et USI par région de SO
[[5]]
<CKAN Resource> 8a89caa9-511c-4568-af89-7f2174b4378c 
  Name: COVID-19 Vaccine data
[[8]]
<CKAN Resource> ed270bb8-340b-41f9-a7c6-e8ef587e6d11 
  Name: Status of COVID-19 cases in Ontario
  Description: Compiled daily reported data on COVID-19 testing and outcomes in Ontario. Blank cells represent values that were not reported.

As of November 12, 2021, routine Variants of Concern (VOC) PCR testing of positive COVID-19 samples is no longer being conducted. All eligible positive COVID-19 samples will now be forwarded for whole genome sequencing.  Starting on November 16, 2021, VOC data will not be reported in Status of COVID-19 cases in Ontario.

Data on VOC can be found on Public Health Ontario's [COVID-19 Variants of Concern (VOCs)](https://www.publichealthontario.ca/en/diseases-and-conditions/infectious-diseases/respiratory-diseases/novel-coronavirus/variants). Historical data on VOCs and mutations in daily and weekly epidemiological summaries can be found on [COVID-19: Epidemiologic summaries from Public Health Ontario](https://covid-19.ontario.ca/covid-19-epidemiologic-summaries-public-health-ontario)
  

[[9]]
<CKAN Resource> 37cfeca2-059e-4a5f-a228-249f6ab1b771 
  Name: COVID Alert downloads - Canada
[[10]]
<CKAN Resource> 455fd63b-603d-4608-8216-7d8647f43350 
  Name: Confirmed positive cases of COVID19 in Ontario
  Description: Compiled daily reported data from public health units on confirmed positive cases of COVID-19 in Ontario. 
[[11]]
<CKAN Resource> 775ca815-5028-4e9b-9dd4-6975ff1be021 
  Name: COVID-19 Vaccine data by age
  Description: As of December 1, 2021, the population counts are based on Statistics Canada's 2020 estimates.
[[15]]
<CKAN Resource> 2a362139-b782-43b1-b3cb-078a2ef19524 
  Name: COVID-19 Vaccine data by Public Health Unit (PHU) and by age



[[3]]
<CKAN Resource> 2a362139-b782-43b1-b3cb-078a2ef19524 
  Name: COVID-19 Vaccine data by Public Health Unit (PHU) and by age
  
[[4]]
<CKAN Resource> eed63cf2-83dd-4598-b337-b288c0a89a16 
  Name: Cases and rates by vaccination status
  Description: Effective September 13, 2021, individuals are considered fully vaccinated if they have had two doses and the second dose was at least fourteen days ago. Individuals are considered partially vaccinated if they have had one dose at least fourteen days ago, or two doses where the second dose was less than fourteen days ago. Individuals are considered unvaccinated if they have not had a dose, or if their first dose was less than fourteen days ago.
  
[[5]] ***
<CKAN Resource> 274b819c-5d69-4539-a4db-f2950794138c 
  Name: Hospitalizations by vaccination status
  Description: * This is a new data collection and the data quality will continue to improve as hospitals continue to submit data.
* In order to understand the vaccination status of patients currently hospitalized, a new data collection process was developed and this may cause discrepancies between other hospitalization numbers being collected using a different data collection process.
* Data on patients in ICU are being collected from two different data sources with different extraction times and public reporting cycles. The existing data source (Critical Care Information System, CCIS) does not have vaccination status. 
* Historical data for hospitalizations by region may change over time as hospitals update previously entered data.
* Due to incomplete weekend and holiday reporting, vaccination status data for hospital and ICU admissions is not updated on Sundays, Mondays and the day after holidays
* Unvaccinated is defined as not having any dose, or between 0-13 days after administration of the first dose of a COVID-19 vaccine
* Partially vaccinated is defined as 14 days or more after the first dose of a 2-dose series COVID-19 vaccine, or between 0-13 days after administration of the second dose
* Fully vaccinated is defined as 14 days or more after receipt of the second dose of a 2-dose series COVID-19 vaccine
  Creator/Modified: 2021-08-20T14:29:47.628879 / 2021-12-15T14:16:14.713347
  Size: 3769
  Format: CSV

[[6]] ***
<CKAN Resource> c08620e0-a055-4d35-8cec-875a459642c3 
  Name: Case rates by vaccination status and age group
  Description: Effective September 13, 2021, individuals are considered fully vaccinated if they have had two doses and the second dose was at least fourteen days ago. Individuals are considered partially vaccinated if they have had one dose at least fourteen days ago, or two doses where the second dose was less than fourteen days ago. Individuals are considered unvaccinated if they have not had a dose, or if their first dose was less than fourteen days ago.
 


[[1]]
<CKAN Resource> 97622ce6-c06a-4970-afe5-be540c748f24 
  Name: Vital events data by month


-->
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span><span class="fu">resource_show</span>(<span class="at">id =</span><span class="st">&quot;274b819c-5d69-4539-a4db-f2950794138c&quot;</span>)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>res<span class="sc">$</span>url</span></code></pre></div>
<pre><code>## [1] &quot;https://data.ontario.ca/dataset/752ce2b7-c15a-4965-a3dc-397bf405e7cc/resource/274b819c-5d69-4539-a4db-f2950794138c/download/vac_status_hosp_icu.csv&quot;</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>destfile <span class="ot">&lt;-</span> <span class="st">&quot;Hospitalizations by vaccination status.csv&quot;</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>curl<span class="sc">::</span><span class="fu">curl_download</span>(res<span class="sc">$</span>url, destfile)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>dtHosp_Vac <span class="ot">&lt;-</span> <span class="fu">fread</span>(destfile)</span></code></pre></div>
<div id="via-api-using-libraryrgovcan" class="section level3" number="27.3.1">
<h3><span class="header-section-number">27.3.1</span> Via API using library(“rgovcan”)</h3>
</div>
</div>
</div>
<div id="health-related-databases" class="section level1" number="28">
<h1><span class="header-section-number">28</span> Health-related databases</h1>
<div id="canadian-vitals-statistics-database" class="section level2" number="28.1">
<h2><span class="header-section-number">28.1</span> Canadian Vitals Statistics Database</h2>
<div id="vital-statistics---death-database" class="section level3" number="28.1.1">
<h3><span class="header-section-number">28.1.1</span> Vital Statistics - Death Database</h3>
<p>Statistique de l’état civil - Base de données sur les décès</p>
<!-- \* / \*\* indicate that the R code / Shiny App are available in this book -->
<div id="leading-causes-of-death" class="section level4" number="28.1.1.1">
<h4><span class="header-section-number">28.1.1.1</span> Leading causes of death</h4>
<p>Provisional weekly death counts, by selected grouped causes of death</p>
<p>Nombre provisoire de décès et surmortalité janvier 2020 à août 2021</p>
<p>Frequency: Weekly
Table: 13-10-0810-01
<a href="https://www150.statcan.gc.ca/t1/tbl1/en/tv.action?pid=1310081001" class="uri">https://www150.statcan.gc.ca/t1/tbl1/en/tv.action?pid=1310081001</a>
<a href="https://www150.statcan.gc.ca/n1/tbl/csv/13100810-eng.zip" class="uri">https://www150.statcan.gc.ca/n1/tbl/csv/13100810-eng.zip</a></p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (F) {</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  curl<span class="sc">::</span><span class="fu">curl_download</span>(<span class="st">&quot;https://www150.statcan.gc.ca/n1/tbl/csv/13100810-eng.zip&quot;</span>,</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;13100810.zip&quot;</span>,</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mode =</span> <span class="st">&quot;wb&quot;</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>  url <span class="ot">&lt;-</span> <span class="st">&quot;https://www150.statcan.gc.ca/n1/tbl/csv/13100810-eng.zip&quot;</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>  temp <span class="ot">&lt;-</span> <span class="fu">tempfile</span>()</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">download.file</span>(url, temp)</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>  dt <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="fu">unzip</span>(temp, <span class="at">files =</span> <span class="st">&quot;13100810.csv&quot;</span>))</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rm</span>(temp)</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">fread</span> (<span class="st">&quot;https://github.com/open-canada/datasets/raw/main/statcan/13100810-after-20190901.csv&quot;</span>, <span class="at">stringsAsFactors =</span> F)</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>dt[, Date <span class="sc">:</span><span class="er">=</span> <span class="fu">ymd</span>(Date)]</span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>dt[, GEO <span class="sc">:</span><span class="er">=</span> <span class="fu">gsub</span>(<span class="st">&quot;, place of occurrence&quot;</span>, <span class="st">&quot;&quot;</span>, GEO)]</span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>dt0 <span class="ot">&lt;-</span> dt[ Date <span class="sc">&gt;=</span> <span class="st">&quot;2019-10-01&quot;</span> ]</span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot GEO vertically - allows comparison across Causes</span></span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt0) <span class="sc">+</span>    <span class="fu">guides</span>(<span class="at">col =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_step</span>(<span class="fu">aes</span>(Date, val_norm, <span class="at">col =</span> <span class="st">`</span><span class="at">Cause of death (ICD-10)</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(GEO <span class="sc">~</span> <span class="st">`</span><span class="at">Cause of death (ICD-10)</span><span class="st">`</span>, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb65-28"><a href="#cb65-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>( <span class="at">title =</span> <span class="cn">NULL</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb65-29"><a href="#cb65-29" aria-hidden="true" tabindex="-1"></a>          <span class="at">caption =</span> <span class="st">&quot;Source: Statistics Canada - Table 13-10-0810-01&quot;</span>  )</span></code></pre></div>
<pre><code>## Warning: Removed 745 row(s) containing missing values (geom_path).</code></pre>
<p><img src="LL-book_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Causes vertically - allows comparison across GEO</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt0) <span class="sc">+</span>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_step</span>(<span class="fu">aes</span>(Date, val_norm, <span class="at">col =</span> <span class="st">`</span><span class="at">Cause of death (ICD-10)</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(<span class="st">`</span><span class="at">Cause of death (ICD-10)</span><span class="st">`</span> <span class="sc">~</span> GEO, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(  <span class="at">title =</span> <span class="cn">NULL</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">caption =</span> <span class="st">&quot;Source: Statistics Canada - Table 13-10-0810-01&quot;</span>    )</span></code></pre></div>
<pre><code>## Warning: Removed 745 row(s) containing missing values (geom_path).</code></pre>
<p><img src="LL-book_files/figure-html/unnamed-chunk-22-2.png" width="672" /></p>
</div>
<div id="other" class="section level4" number="28.1.1.2">
<h4><span class="header-section-number">28.1.1.2</span> Other</h4>
<p>Provisional weekly death counts, by age group and sex
Frequency: Weekly
Table: 13-10-0768-01
Release date: 2021-12-06
Geography: Canada, Province or territory
<a href="https://www150.statcan.gc.ca/t1/tbl1/en/tv.action?pid=1310076801" class="uri">https://www150.statcan.gc.ca/t1/tbl1/en/tv.action?pid=1310076801</a></p>
<p>Previous releases and revisions to provisional weekly death counts1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13
Frequency: Weekly
Table: 13-10-0783-01
Release date: 2021-12-06
Geography: Canada, Province or territory
<a href="https://www150.statcan.gc.ca/t1/tbl1/en/tv.action?pid=1310078301" class="uri">https://www150.statcan.gc.ca/t1/tbl1/en/tv.action?pid=1310078301</a></p>
<p>Fetal deaths (20 weeks or more of gestation) and late fetal deaths (28 weeks or more of gestation)
Table: 13-10-0427-01 (formerly: CANSIM 102-4514)</p>
<p>Perinatal mortality (late fetal deaths and early neonatal deaths)
Table: 13-10-0714-01 (formerly: CANSIM 102-0508)</p>
<p>Deaths and age-specific mortality rates, by selected grouped causes1, 2, 3, 4, 5, 6, 7, 8, 9, 10
Frequency: Annual
Table: 13-10-0392-01</p>
<p>Leading causes of death, total population, by age group
Frequency: Annual. till 2019
Table: 13-10-0394-01</p>
<p>Leading causes of death, infants
Table: 13-10-0395-01 (formerly: CANSIM 102-0562)</p>
</div>
</div>
<div id="vital-statistics---birth-database" class="section level3" number="28.1.2">
<h3><span class="header-section-number">28.1.2</span> Vital Statistics - Birth Database</h3>
<p><a href="https://www150.statcan.gc.ca/n1/en/surveys/3231" class="uri">https://www150.statcan.gc.ca/n1/en/surveys/3231</a></p>
<p>Crude birth rate, age-specific fertility rates and total fertility rate (live births)
Table: 13-10-0418-01 (formerly: CANSIM 102-4505)</p>
<p>Live births, by month
Table: 13-10-0415-01 (formerly: CANSIM 102-4502)</p>
<p>Live births, by age of mother
Table: 13-10-0416-01 (formerly: CANSIM 102-4503)</p>
</div>
</div>
<div id="covid-19-infection-and-vaccination-related" class="section level2" number="28.2">
<h2><span class="header-section-number">28.2</span> COVID-19 infection and vaccination related:</h2>
<ul>
<li><a href="https://health-infobase.canada.ca/covid-19/vaccination-coverage" class="uri">https://health-infobase.canada.ca/covid-19/vaccination-coverage</a></li>
</ul>
<p>Cumulative number and percent of people who have received a COVID-19 vaccine in Canada by vaccination status, age group, sex, and jurisdiction, November 20, 2021
- <a href="https://health-infobase.canada.ca/src/data/covidLive/vaccination-coverage-byAgeAndSex-overTimeDownload.csv" class="uri">https://health-infobase.canada.ca/src/data/covidLive/vaccination-coverage-byAgeAndSex-overTimeDownload.csv</a></p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>strVac <span class="ot">&lt;-</span> <span class="st">&quot;https://health-infobase.canada.ca/src/data/covidLive/vaccination-coverage-byAgeAndSex-overTimeDownload.csv&quot;</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>dtVac <span class="ot">&lt;-</span> <span class="fu">fread</span>(strVac, <span class="at">stringsAsFactors =</span> F)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>dtVac<span class="sc">$</span>prfname <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>dtVac<span class="sc">$</span>pruid <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>dtVac[, week_end <span class="sc">:</span><span class="er">=</span> <span class="fu">ymd</span>(week_end)]</span></code></pre></div>
</div>
</div>
<div id="open-ontario-data" class="section level1" number="29">
<h1><span class="header-section-number">29</span> Open Ontario Data</h1>
<div id="section-1" class="section level3" number="29.0.1">
<h3><span class="header-section-number">29.0.1</span> </h3>
<p>COVID-19 cases in hospital and ICU, by Ontario Health (OH) region
<a href="https://data.ontario.ca/datastore/dump/e760480e-1f95-4634-a923-98161cfb02fa?bom=True" class="uri">https://data.ontario.ca/datastore/dump/e760480e-1f95-4634-a923-98161cfb02fa?bom=True</a></p>
<p><a href="https://data2.ontario.ca/en/dataset/deaths-by-cause-sex-and-age" class="uri">https://data2.ontario.ca/en/dataset/deaths-by-cause-sex-and-age</a>
We are reviewing the data in this record to determine if it can be made open.</p>
<p><a href="https://data.ontario.ca/en/dataset?q=vital+statistics" class="uri">https://data.ontario.ca/en/dataset?q=vital+statistics</a></p>
<p><a href="https://data.ontario.ca/en/dataset/covid-19-vaccine-data-in-ontario" class="uri">https://data.ontario.ca/en/dataset/covid-19-vaccine-data-in-ontario</a></p>
</div>
</div>
<div id="performance-related-databases" class="section level1" number="30">
<h1><span class="header-section-number">30</span> Performance-related databases</h1>
<div id="pses-results-interactive-analysis-and-visualization" class="section level2" number="30.1">
<h2><span class="header-section-number">30.1</span> PSES Results interactive analysis and visualization:</h2>
<p>URL: <a href="https://open-canada.github.io/Apps/pses" class="uri">https://open-canada.github.io/Apps/pses</a>
<!-- (mirror:  https://itrack.shinyapps.io/PSES/, use case: https://itrack.shinyapps.io/PSES-CBSA-SE).   -->
Source: <a href="https://gccode.ssc-spc.gc.ca/r4gc/codes/pses" class="uri">https://gccode.ssc-spc.gc.ca/r4gc/codes/pses</a></p>
<!-- It illustrates the power of Data Science and Visualization (when implemented for the purpose). It uses the concept of concept of Vertical vs. Horizontal comparison of results, which is most insightful when one needs to find out where (or when) exactly the problem is (or was) in an Organization. -->
<p>No other Open Canada data is of as much common interest across the government as the PSES results [^11]. These data contain the information about all GC departments, their organizational structure and performance. A Shiny App prototype is developed to perform three most desired tasks one wished to do with these data (see Figure):</p>
<p>[^11] <a href="https://www.canada.ca/en/treasury-board-secretariat/services/innovation/public-service-employee-survey.html" class="uri">https://www.canada.ca/en/treasury-board-secretariat/services/innovation/public-service-employee-survey.html</a></p>
<ol style="list-style-type: decimal">
<li>Vertical result tracking: results comparison across an organization, automated detection and visualization of the performance variation across the organization - for any given PSES question.</li>
<li>Horizontal results tracking: results comparison over time - for any given unit, in comparison to the organization and Public Service averages</li>
<li>Performance summary by theme: automated generation of report cards that show the performance at each level of the organization for each of theme and in relation to the rest of the organization and Public Service average.</li>
<li>Automated generation of full report with detailed comparative analysis and recommendations: for each unit and each level of organization</li>
</ol>
<p><img height="300" src="https://github.com/open-canada/Apps/blob/main/docs/images/pses-eccc-st.png?raw=true">
<img height="300" src="https://github.com/open-canada/Apps/blob/main/docs/images/pses-eccc-st-vs-themes.png?raw=true">
<img height="300" src="https://github.com/open-canada/Apps/blob/main/docs/images/pses-cbsa-se-over-time.png?raw=true">
<img height="300" src="https://github.com/open-canada/Apps/blob/main/docs/images/pses-cbsa-se-autoreport.png?raw=true"></p>
<!-- ```{r, echo=FALSE, out.width="100%", fig.align = "center"} -->
<!-- knitr::include_graphics( -->
<!--   c( -->
<!--     paste0("images/frontpage/Screenshot_20211024-204851-with-trees-triangle.jpg") ) -->
<!-- ) -->
<!-- ``` -->
<p>Figure. Key functionalities of the PSES App prototype: a) vertical results tracking - for any question over entire organization, b) horizontal results tracking - for any unit over time, and c) performance report summary - for each unit, by theme, and in comparison to the Public Service average (shown as crosses) and other units within organization (shown as small dots). The results can be displayed filtered and sorted by score, ranking percentile, org. structure, number of responses, by theme or question.</p>
<div id="other-pses-tools-and-dashboards" class="section level3" number="30.1.1">
<h3><span class="header-section-number">30.1.1</span> Other PSES tools and dashboards</h3>
<p>TBS Official PSES Results viewer (developed in PowerBI):
<a href="https://hranalytics-analytiquerh.tbs-sct.gc.ca/Home/ReportList/2019?GoCTemplateCulture=en-CA" class="uri">https://hranalytics-analytiquerh.tbs-sct.gc.ca/Home/ReportList/2019?GoCTemplateCulture=en-CA</a><br />
Direct link to PowerBI here: <a href="https://hranalytics-analytiquerh.tbs-sct.gc.ca/Home/EmbedReport/6?GoCTemplateCulture=en-CA" class="uri">https://hranalytics-analytiquerh.tbs-sct.gc.ca/Home/EmbedReport/6?GoCTemplateCulture=en-CA</a></p>
<p>​</p>
<!-- Example Using Tableau -->
<!-- https://publicservicesr.blogspot.com/p/500-vizelement.html -->
</div>
</div>
<div id="tip-requests-dataset" class="section level2" number="30.2">
<h2><span class="header-section-number">30.2</span> TIP requests dataset</h2>
<!-- URL: <https://open-canada.github.io/Apps/atip> (mirror: https://rcanada.shinyapps.io/TBS-ATI-NLP/).    -->
<p>Another Open Canada dataset that relates to the performance of many GC departments is the ATIP requests dataset [^22]. An interactive Natural Language Processing (NLP) application has been developed to enable the analysis and visualization of these requests for each participating department (see Figure 2). Its functionalities include: statistics summary, automated key-words and topic extraction using N-grams, document term matrix and Latent Dirichlet Allocation. The topics can be visualized as word-clouds or as graphs that connect the related words.</p>
<p>[^22] <a href="https://open.canada.ca/en/search/ati" class="uri">https://open.canada.ca/en/search/ati</a>.</p>
<p>See “Text Mining with R!” by Julia Silge and David Robinson (<a href="https://www.tidytextmining.com" class="uri">https://www.tidytextmining.com</a>) for definitions of the terms.</p>
<p><img height="300" src="https://github.com/open-canada/Apps/blob/main/docs/images/NLP-ATIP1.png?raw=true">
<img height="300" src="https://github.com/open-canada/Apps/blob/main/docs/images/NLP-ATIP2.png?raw=true"></p>
<p>Figure 2. Key functionalities of the ATIP App: a) department specific bi-variable statics (such as dispositions by year, shown in the image), b) department specific key topics, visualized as correlated terms graphs , c) key topics for each participating department, visualized as N-gram frequency bars (such as 2-gram, or two-word combination, shown in the image).</p>
</div>
<div id="geo-mapped-current-historical-and-predicted-border-wait-times" class="section level2" number="30.3">
<h2><span class="header-section-number">30.3</span> Geo-mapped current, historical and predicted border wait times:</h2>
<p>URL: <a href="https://open-canada.github.io/Apps/border" class="uri">https://open-canada.github.io/Apps/border</a> (redirect to <a href="https://open.canada.ca/en/app/border-wait-time-interactive-tracker-itrack-border">open.canada.ca</a>).<br />
Source: <a href="https://gccode.ssc-spc.gc.ca/gorodnichy/simborder" class="uri">https://gccode.ssc-spc.gc.ca/gorodnichy/simborder</a></p>
<p>This App (shown in Figure 4) combines Open geo-spatial data with Open historical and current border wait times data to predict and visualize delays at Canadian land border crossings. The App is included (entitled iTrack-Border) in the Open Canada Apps Gallery at <a href="https://open.canada.ca/en/apps" class="uri">https://open.canada.ca/en/apps</a>, where more information about it can be found.</p>
<p><img height="300" src="https://github.com/open-canada/Apps/blob/main/docs/images/itrack-border1.png?raw=true">
<img height="300" src="https://github.com/open-canada/Apps/blob/main/docs/images/itrack-border2.png?raw=true"></p>
<!-- # (PART) Community Codes {-} -->
<!-- ```{r 20_gc_apps, child = '20_gc_apps.Rmd'} -->
<!-- ``` -->
<!-- # (PART) Community Development {-} -->
</div>
</div>
<div id="part-community-codes" class="section level1 unnumbered">
<h1 class="unnumbered">(PART) Community Codes</h1>
</div>
<div id="lunch-and-learn-notes" class="section level1" number="31">
<h1><span class="header-section-number">31</span> Lunch and Learn notes</h1>
<p>These are the draft notes from the Lunch and Learn ‘Data Science with R’ series organized by R4GC community.
Please see <a href="index.html#lunch-and-learn-meetups">Lunch and Learn</a> page for details on how to join these meetings.</p>
<p>For video-recordings and additional notes, please join <a href="https://gccollab.ca/groups/about/7855030">Lunch and Learn ‘Data Science with R’ GCcollab group</a></p>
<div id="interactive-outputs-in-r-without-shiny" class="section level3 unnumbered">
<h3 class="unnumbered">Interactive Outputs in R without Shiny</h3>
<p>26 Nov 2021 -
This meeting will be dedicated to tools to generate interactive graphs, tables, and other content without Shiny (which, as you know, requires a server to host your Shiny application and which for this reason cannot be easily shared with your clients, e.g. by email)</p>
<p>Here are the most popular ones:</p>
<p><a href="https://rstudio.github.io/DT/" class="uri">https://rstudio.github.io/DT/</a>
<a href="https://plotly.com/r/" class="uri">https://plotly.com/r/</a> and
<a href="https://glin.github.io/reactable" class="uri">https://glin.github.io/reactable</a>.
Many worked with plotly and DT, but reactable is another great package, which will make your outputs loved by your clients.</p>
<p>12 Nov - 19 Nov 2021:
Text Analysis with R follow-up / Converting codes to Shiny App</p>
<p>8 Oct 2021:
Text Analysis with R. Part 1: identifying near-duplicate documents</p>
<p>1 Oct 2021:
Shiny App to summarize very large, high-dimensional tables (code &amp; app provided)</p>
<p>30 Jul - 17 Sep 2021:
Geo/Spatial coding and visualization with R. (code provided)</p>
<p>16 Jul 2021:
Dual Coding - Python and R unite ! (code provided)</p>
<p>9 Jul 2021:
Exploring ggplots (recording, code provided)</p>
<p>2 Jul 2021:
Parsing GC Tables (code provided)</p>
<p>25 Jun 2021:
Using the Open Government Portal API within R (recording, code on github.com/open-canada)</p>
<p>21 Apr 2021:
Analyzing PSES results using R and Shiny</p>
<p>16 Apr - 15 May 2021:
Building R packages (recording, codes provided)</p>
</div>
<div id="geospatial-coding-and-visualization-with-r.-part-1" class="section level2" number="31.1">
<h2><span class="header-section-number">31.1</span> Geo/Spatial coding and visualization with R. Part 1:</h2>
<p>Contributed by:</p>
</div>
<div id="text-analysis-with-r.-part-1" class="section level2" number="31.2">
<h2><span class="header-section-number">31.2</span> Text Analysis with R. Part 1:</h2>
<p>Contributed by:</p>
</div>
<div id="dual-coding---python-and-r-unite" class="section level2" number="31.3">
<h2><span class="header-section-number">31.3</span> Dual Coding - Python and R unite !</h2>
<p>Contributed by:</p>
</div>
<div id="working-with-ggtables" class="section level2" number="31.4">
<h2><span class="header-section-number">31.4</span> Working with ggtables</h2>
<p>Contributed by:</p>
</div>
<div id="automate-common-look-and-feel-of-your-ggplot-graphs" class="section level2" number="31.5">
<h2><span class="header-section-number">31.5</span> Automate common look and feel of your ggplot graphs</h2>
<p>Contributed by:</p>
</div>
<div id="automated-generation-of-report-cards" class="section level2" number="31.6">
<h2><span class="header-section-number">31.6</span> Automated generation of report cards</h2>
<p>Contributed by:</p>
</div>
<div id="discussed-rstudio-webinars" class="section level2" number="31.7">
<h2><span class="header-section-number">31.7</span> Discussed RStudio Webinars</h2>
<p>Webinars at RStudio - <a href="https://www.rstudio.com/resources/webinars/" class="uri">https://www.rstudio.com/resources/webinars/</a> (codes at <a href="https://github.com/rstudio/webinars" class="uri">https://github.com/rstudio/webinars</a>)
The new insights from these webinars and other R-related blogs and events are discussed at R4GC community meetups</p>
<!-- # (PART) Q & A -->
<!-- # (APPENDIX) Appendix {-} -->
<!-- ##  Video recordings -->
<!-- ```{r 20_gc_apps, child = '20_gc_apps.Rmd'} -->
<!-- ``` -->
</div>
</div>
<div id="canada-related-open-source-r-codes-and-packages" class="section level1" number="32">
<h1><span class="header-section-number">32</span> Canada-related Open source R codes and packages</h1>
<div id="packages" class="section level2" number="32.1">
<h2><span class="header-section-number">32.1</span> Packages</h2>
<div id="packages-on-cran" class="section level3" number="32.1.1">
<h3><span class="header-section-number">32.1.1</span> Packages on CRAN</h3>
<p>One can go to <a href="https://packagemanager.rstudio.com/" class="uri">https://packagemanager.rstudio.com/</a> to search and explore packages.</p>
<p>Install them from Tools-&gt; Install Packages in RStudio, or directly using the line below:</p>
<pre><code>install.packages(&#39;cansim&#39;) `</code></pre>
<div id="rgovcan---easy-access-to-the-canadian-open-government-portal" class="section level4" number="32.1.1.1">
<h4><span class="header-section-number">32.1.1.1</span> rgovcan - Easy Access to the Canadian Open Government Portal</h4>
<p><a href="https://github.com/open-canada/rgovcan" class="uri">https://github.com/open-canada/rgovcan</a></p>
<p>A R package to interact with the Open Canada API (see <a href="https://open.canada.ca/en/access-our-application-programming-interface-api" class="uri">https://open.canada.ca/en/access-our-application-programming-interface-api</a>), to search and download datasets (see Licence at <a href="https://open.canada.ca/en/open-government-licence-canada" class="uri">https://open.canada.ca/en/open-government-licence-canada</a>). It is our hope that we will be able to bring this package up to the standard of a ropensci packages (see this issue on ropensci/wishlist <a href="https://github.com/ropensci/wishlist/issues/27" class="uri">https://github.com/ropensci/wishlist/issues/27</a>).</p>
<p>This package makes extensive use of ckanr to access the Canadian government’s CKAN REST API.</p>
<pre><code>library(&quot;rgovcan&quot;)
dfo_search &lt;- govcan_search(keywords = c(&quot;dfo&quot;), records = 10)
dfo_search

# Another possibility is to start with a package id corresponding to an actual record 
id &lt;- &quot;7ac5fe02-308d-4fff-b805-80194f8ddeb4&quot; # Package ID
id_search &lt;- govcan_get_record(record_id = id)
id_search
id_resources &lt;- govcan_get_resources(id_search)
id_resources
dfo_resources &lt;- govcan_get_resources(dfo_search)

path &lt;- &quot;tmp/data/&quot;
dir.create(path, recursive = TRUE)
govcan_dl_resources(id_resources, path = path)</code></pre>
</div>
<div id="cansim2r---directly-extracts-complete-cansim-data-tables" class="section level4" number="32.1.1.2">
<h4><span class="header-section-number">32.1.1.2</span> CANSIM2R - Directly Extracts Complete CANSIM Data Tables</h4>
<p>Extract CANSIM (Statistics Canada) tables and transform them into readily usable data in panel (wide) format. It can also extract more than one table at a time and produce the resulting merge by time period and geographical region.</p>
</div>
<div id="cansim---accessing-statistics-canada-data-table-and-vectors" class="section level4" number="32.1.1.3">
<h4><span class="header-section-number">32.1.1.3</span> cansim - Accessing Statistics Canada Data Table and Vectors</h4>
<p><a href="https://github.com/mountainMath/cansim" class="uri">https://github.com/mountainMath/cansim</a></p>
<p>Searches for, accesses, and retrieves new-format and old-format Statistics Canada data tables, as well as individual vectors, as tidy data frames. This package deals with encoding issues, allows for bilingual English or French language data retrieval, and bundles convenience functions to make it easier to work with retrieved table data. Optional caching features are provided.</p>
</div>
<div id="cancensus" class="section level4" number="32.1.1.4">
<h4><span class="header-section-number">32.1.1.4</span> cancensus</h4>
<p><a href="https://github.com/mountainMath/cancensus" class="uri">https://github.com/mountainMath/cancensus</a></p>
<p>See also censusmapper</p>
</div>
<div id="httpsgithub.commountainmathtongfen" class="section level4" number="32.1.1.5">
<h4><span class="header-section-number">32.1.1.5</span> <a href="https://github.com/mountainMath/tongfen" class="uri">https://github.com/mountainMath/tongfen</a></h4>
</div>
<div id="httpsgithub.commountainmathstatcanxtabs" class="section level4" number="32.1.1.6">
<h4><span class="header-section-number">32.1.1.6</span> <a href="https://github.com/mountainMath/statcanXtabs" class="uri">https://github.com/mountainMath/statcanXtabs</a></h4>
</div>
<div id="httpsgithub.comwarintstatcanr" class="section level4" number="32.1.1.7">
<h4><span class="header-section-number">32.1.1.7</span> <a href="https://github.com/warint/statcanR" class="uri">https://github.com/warint/statcanR</a></h4>
<p>statcanR</p>
<p>Easily connect to Statistics Canada’s Web Data Service with R. Open economic data (formerly known as CANSIM tables, now identified by Product IDs (PID)) are accessible as a data frame, directly in the user’s R environment.</p>
</div>
<div id="install.packagescanadamaps" class="section level4" number="32.1.1.8">
<h4><span class="header-section-number">32.1.1.8</span> install.packages(‘canadamaps’)</h4>
<p>Terrestrial maps with simplified topologies for Census Divisions, Agricultural Regions, Economic Regions, Federal Electoral Divisions and Provinces.</p>
</div>
</div>
</div>
<div id="packages-not-on-cran" class="section level2" number="32.2">
<h2><span class="header-section-number">32.2</span> Packages not on CRAN</h2>
<div id="httpsgithub.comvlucetrgovcan" class="section level4" number="32.2.0.1">
<h4><span class="header-section-number">32.2.0.1</span> <a href="https://github.com/VLucet/rgovcan" class="uri">https://github.com/VLucet/rgovcan</a></h4>
<p>rgovcan
Easy access to the Canadian Open Government Portal</p>
</div>
<div id="httpsgithub.combcgovcanwqdata" class="section level4" number="32.2.0.2">
<h4><span class="header-section-number">32.2.0.2</span> <a href="https://github.com/bcgov/canwqdata" class="uri">https://github.com/bcgov/canwqdata</a></h4>
<p>canwqdata
An R package to download open water quality data from Environment and Climate Change Canada’s National Long-term Water Quality Monitoring Data.</p>
</div>
</div>
<div id="codes-on-github" class="section level2" number="32.3">
<h2><span class="header-section-number">32.3</span> Codes on GitHub</h2>
<div id="expenditures-and-procurement" class="section level3" number="32.3.1">
<h3><span class="header-section-number">32.3.1</span> Expenditures and procurement</h3>
<div id="httpsgithub.comnmarumcanadadefencespending" class="section level4" number="32.3.1.1">
<h4><span class="header-section-number">32.3.1.1</span> <a href="https://github.com/nmarum/canadadefencespending" class="uri">https://github.com/nmarum/canadadefencespending</a></h4>
<p>Data wrangling and exploratory analysis of publicly available data about National Defence expenditures and defence procurement.</p>
</div>
</div>
<div id="health-and-environment" class="section level3" number="32.3.2">
<h3><span class="header-section-number">32.3.2</span> Health and Environment</h3>
<div id="httpsgithub.comdbuijshealthcanadaopendata" class="section level4" number="32.3.2.1">
<h4><span class="header-section-number">32.3.2.1</span> <a href="https://github.com/dbuijs/HealthCanadaOpenData" class="uri">https://github.com/dbuijs/HealthCanadaOpenData</a></h4>
<p>A project for importing open data from Health Canada’s website into R.</p>
</div>
</div>
<div id="elections" class="section level3" number="32.3.3">
<h3><span class="header-section-number">32.3.3</span> Elections</h3>
<div id="canadian-election-forecast" class="section level4" number="32.3.3.1">
<h4><span class="header-section-number">32.3.3.1</span> 2019 Canadian election forecast</h4>
</div>
<div id="httpsgithub.comthisismactancanada-2019" class="section level4" number="32.3.3.2">
<h4><span class="header-section-number">32.3.3.2</span> <a href="https://github.com/thisismactan/Canada-2019" class="uri">https://github.com/thisismactan/Canada-2019</a></h4>
<p>This is the repository for the Election StatSheet 2019 Canadian election forecast.</p>
</div>
<div id="canadian-election-data" class="section level4" number="32.3.3.3">
<h4><span class="header-section-number">32.3.3.3</span> 2015 Canadian Election Data</h4>
<p><a href="https://github.com/lchski/canada-2015-federal-election-data" class="uri">https://github.com/lchski/canada-2015-federal-election-data</a></p>
</div>
<div id="httpsgithub.comlchskicanada-2015-federal-election-data" class="section level4" number="32.3.3.4">
<h4><span class="header-section-number">32.3.3.4</span> <a href="https://github.com/lchski/canada-2015-federal-election-data" class="uri">https://github.com/lchski/canada-2015-federal-election-data</a></h4>
<p>2015 Canadian Election Data</p>
</div>
<div id="fptp-election-strategizer" class="section level4" number="32.3.3.5">
<h4><span class="header-section-number">32.3.3.5</span> FPTP Election Strategizer</h4>
<p>“FPTP Election Strategizer: A data-science driven tool to mitigate the political biases of the First Past The Post electoral system in Canada” -
Research article, with R code and visualizations in support of <a href="%22https://www.fairvote.ca">Fair Vote Canada</a></p>
<p><a href="https://github.com/ivi-m/election-strategizer/" class="uri">https://github.com/ivi-m/election-strategizer/</a></p>
<!-- (https://ivi-m.github.io/election-strategizer/) -->
</div>
</div>
<div id="ottawa" class="section level3" number="32.3.4">
<h3><span class="header-section-number">32.3.4</span> Ottawa</h3>
<div id="httpsgithub.comwhipsonottawa_bicycles" class="section level4" number="32.3.4.1">
<h4><span class="header-section-number">32.3.4.1</span> <a href="https://github.com/whipson/Ottawa_Bicycles" class="uri">https://github.com/whipson/Ottawa_Bicycles</a></h4>
<p>Data and cleaning scripts for Ottawa Bicycle Counter shiny app.</p>
</div>
<div id="httpsgithub.comlchskiottawa-fire-stations" class="section level4" number="32.3.4.2">
<h4><span class="header-section-number">32.3.4.2</span> <a href="https://github.com/lchski/ottawa-fire-stations" class="uri">https://github.com/lchski/ottawa-fire-stations</a></h4>
<p>Mapping Ottawa’s fire stations</p>
</div>
</div>
<div id="vancouver" class="section level3" number="32.3.5">
<h3><span class="header-section-number">32.3.5</span> Vancouver</h3>
<p>Many codes, packages, and blogs related to Vancouver and Canada, and other utility functions, are developed by<br />
<a href="https://mountainmath.ca/">MountainMath (Jens von Bergman)</a> - Source: <a href="https://github.com/mountainMath" class="uri">https://github.com/mountainMath</a></p>
</div>
<div id="other-related-packages" class="section level3" number="32.3.6">
<h3><span class="header-section-number">32.3.6</span> Other related packages</h3>
<p>From <a href="https://github.com/jennybc">jennybc</a></p>
<p>googlesheets Public
Google Spreadsheets R API</p>
<p>googleComputeEngineR Public
Forked from cloudyr/googleComputeEngineR</p>
<!-- # (APPENDIX) Appendices {-} -->
<!-- # Technical information -->
<!-- This book is written in R Markdown and R, with the use of 'bookdown' package, and compiled in R Studio. -->
<!-- ## Colophone -->
<!-- When archiving an article that was generated from R code, it's a good practice to include the information about the system where the code was run, the way it is done here: -->
<!-- ```{r} -->
<!-- sessionInfo() -->
<!-- ``` -->
<!-- ```{r 00-releaseNotes.Rmd, child = '00-releaseNotes.Rmd'} -->
<!-- ``` -->
</div>
</div>
</div>
<!--bookdown:body:end-->
            </section>

          </div>
        </div>
      </div>
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
    </div>
  </div>
<!--bookdown:config-->

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
